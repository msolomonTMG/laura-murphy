/*hash:2e91d49d1e03882c7d3cd7eaa95c60c3*/var config={getSiteBaseHREF:function(){return'http://www.mtv.com/';},getSiteAdViewability:function(){return'';},getFacebookApiKey:function(){return'';},getFacebookGraphFeedURL:function(){return'';},getFacebookSiteName:function(){return'';},getFacebookAppId:function(){return'122150691493';},getRepoUrl:function(){return'';},getRepoSiteName:function(){return'';},getRepoVersion:function(){return'2';},getRepoCodaUrl:function(){return'http://btg.mtvnservices.com/aria/coda.html?site=mtv.com&v=3.22&stage=1';},getRepoReportingUrl:function(){return'http://repo.cc.com/feeds/websites/mtv.com/pages';},getRepoBoxAdMobile:function(){return'1';},getRepoBoxAdTablet:function(){return'1';},getTwitterKey:function(){return'0zBKOd6FJsqRehJufopNQ';},getTwitterUserDataURL:function(){return'http://search.twitter.com/search.json?callback=?&rpp=1&q=from%3A';},getTwitterBaseHref:function(){return'http://search.twitter.com/search.json';},getTweetRiverUrl:function(){return'http://tweetriver.com/';},getTweetRiverFeed:function(){return'';},getTweetRiverType:function(){return'json';},getMediaMissingImage:function(){return'https://mtv.mtvnimages.com/images/lyricsmode-mtv_100x100.jpg';},getMediaConfigParamSite:function(){return'mtv.com';},getTriforceScriptLoader:function(){return'/media/triforce/';},getPlayerContentsidsVideo:function(){return'MTV_Video_Clip';},getPlayerContentsidsEpisode:function(){return'MTV_Video_Episode';},getPlayerContentsidsPlaylist:function(){return'MTV_Video_Clip';},getPlayerContentsidsFight:function(){return'';},getTriforceGlobalZones:function(){return'';},getTriforceManifestFeed:function(){return'/feeds/triforce/manifest';},getTriforceDebugPageClearButton:function(){return'';},getSmeEnabled:function(){return'';},getTveIsStaging:function(){return'';},getAdobeTargetEnabled:function(){return'1';},getAdobeTargetMboxName:function(){return'viavmn';},getAdobeTargetAT_Property:function(){return'5475157e-ace2-2f76-9f33-767678005f55';},getSearchFeedURL:function(){return'http://relaunch-search.mtv.com/solr/mtv/select/?q=';}};window.TriforceConfiguration={"globalZones":["header","footer","ads-reporting","ENT_M171","ENT_M243"],"manifestFeed":"http:\/\/www.mtv.com\/feeds\/triforce\/manifest\/v8","scriptConcatenator":"http:\/\/www.mtv.com\/media\/module\/","priorityTimeout":"300","stragglersTimeout":"3000","tierWrapper":"true","playerScript":"http:\/\/media.mtvnservices.com\/edge\/player\/edgeplayer-2.4.1.min.js","optimizelyEnabled":"false"};jQuery.cookie=function(key,value,options){if(arguments.length>1&&String(value)!=="[object Object]"){options=jQuery.extend({},options);if(value===null||value===undefined){options.expires=-1;}
if(typeof options.expires==='number'){var days=options.expires,t=options.expires=new Date();t.setDate(t.getDate()+days);}
value=String(value);return(document.cookie=[encodeURIComponent(key),'=',options.raw?value:encodeURIComponent(value),options.expires?'; expires='+options.expires.toUTCString():'',options.path?'; path='+options.path:'',options.domain?'; domain='+options.domain:'',options.secure?'; secure':''].join(''));}
options=value||{};var result,decode=options.raw?function(s){return s;}:decodeURIComponent;return(result=new RegExp('(?:^|; )'+encodeURIComponent(key)+'=([^;]*)').exec(document.cookie))?decode(result[1]):null;};(function($){var methods={};$.namespace=function(ns){methods[ns]=methods[ns]||{};function nsfun(selector,context){return $(selector,context).namespace(ns);}
nsfun.fn=methods[ns];return nsfun;};$.fn.namespace=function(ns){if(methods[ns]){$.extend(this,methods[ns]);}
return this;};})(jQuery);(function($){$Crabapple=$.namespace('Crabapple');})(jQuery);(function($){$Crabapple.Class=function(){};var Hierarchy=$Crabapple.Class.Hierarchy=function(type){this.type=type;};Hierarchy.prototype.set=function(type){this.type=type;return this;};Hierarchy.prototype.map=function(cb){var stack=this.stack=[];for(var ancestor=this.type.prototype;'parentClass'in ancestor;ancestor=ancestor.parentClass){if(false!==cb(ancestor)){stack.push(ancestor);}}
return this;};Hierarchy.prototype.reduce=function(cb){this.stack=cb(this.stack);return this;};Hierarchy.prototype.apply=function(cb){var stack=this.stack;for(var i=stack.length-1;i>-1;--i){cb(stack[i]);}
return this;};$Crabapple.extend=function(parent,child,o){o=o||{};var fn=function(){};fn.prototype=parent.prototype;child.prototype=new fn();child.prototype.parentClass=parent.prototype;child.prototype.constructor=child;for(var key in o){child.prototype[key]=o[key];}
var h=new Hierarchy(child).map(function(ancestor){return'options'in ancestor;}).apply(function(ancestor){$.extend(child.prototype.options,ancestor.options);});h.set(child).map(function(ancestor){return'requires'in ancestor;}).apply(function(ancestor){$.extend(child.prototype.requires,ancestor.requires);});};$Crabapple.instantiate=function(type,args){var o=new type();new Hierarchy(type).map(function(ancestor){if(ancestor.hasOwnProperty){return ancestor.hasOwnProperty('init');}else{return'init'in ancestor;}}).apply(function(ancestor){ancestor.init.apply(o,args);});return o;};})(jQuery);(function(){$Crabapple.utils={};$Crabapple.utils.DateTime={};$Crabapple.utils.DateTime.currentDate=false;$Crabapple.utils.DateTime.format=function(format){var returnStr='';var replace=this.replaceChars;for(var i=0;i<format.length;i++){var curChar=format.charAt(i);if(i-1>=0&&format.charAt(i-1)=="\\"){returnStr+=curChar;}
else if(replace[curChar]){returnStr+=replace[curChar].call(this);}else if(curChar!="\\"){returnStr+=curChar;}}
return returnStr;};$Crabapple.utils.DateTime.replaceChars={shortMonths:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],longMonths:['January','February','March','April','May','June','July','August','September','October','November','December'],shortDays:['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],longDays:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],d:function(){return(this.currentDate.getDate()<10?'0':'')+this.currentDate.getDate();},D:function(){return this.replaceChars.shortDays[this.currentDate.getDay()];},j:function(){return this.currentDate.getDate();},l:function(){return this.replaceChars.longDays[this.currentDate.getDay()];},N:function(){return this.currentDate.getDay()+1;},S:function(){return(this.currentDate.getDate()%10==1&&this.currentDate.getDate()!=11?'st':(this.currentDate.getDate()%10==2&&this.currentDate.getDate()!=12?'nd':(this.currentDate.getDate()%10==3&&this.currentDate.getDate()!=13?'rd':'th')));},w:function(){return this.currentDate.getDay();},z:function(){var d=new Date(this.currentDate.getFullYear(),0,1);return Math.ceil((this.currentDate-d)/ 86400000);},W:function(){var d=new Date(this.currentDate.getFullYear(),0,1);return Math.ceil((((this.currentDate-d)/ 86400000)+d.getDay()+1)/ 7);},F:function(){return this.replaceChars.longMonths[this.currentDate.getMonth()];},m:function(){return(this.currentDate.getMonth()<9?'0':'')+(this.currentDate.getMonth()+1);},M:function(){return this.replaceChars.shortMonths[this.currentDate.getMonth()];},n:function(){return this.currentDate.getMonth()+1;},t:function(){var d=new Date();return new Date(d.getFullYear(),d.getMonth(),0).getDate();},L:function(){var year=this.currentDate.getFullYear();return(year%400==0||(year%100!=0&&year%4==0));},o:function(){var d=new Date(this.currentDate.valueOf());d.setDate(d.getDate()-((this.currentDate.getDay()+6)%7)+3);return d.getFullYear();},Y:function(){return this.currentDate.getFullYear();},y:function(){return(''+this.currentDate.getFullYear()).substr(2);},a:function(){return this.currentDate.getHours()<12?'am':'pm';},A:function(){return this.currentDate.getHours()<12?'AM':'PM';},B:function(){return Math.floor((((this.currentDate.getHours()+1)%24)+this.currentDate.getMinutes()/ 60+this.currentDate.getSeconds()/ 3600)*1000 / 24);},g:function(){return this.currentDate.getHours()%12||12;},G:function(){return this.currentDate.getHours();},h:function(){return((this.currentDate.getHours()%12||12)<10?'0':'')+(this.currentDate.getHours()%12||12);},H:function(){return(this.currentDate.getHours()<10?'0':'')+this.currentDate.getHours();},i:function(){return(this.currentDate.getMinutes()<10?'0':'')+this.currentDate.getMinutes();},s:function(){return(this.currentDate.getSeconds()<10?'0':'')+this.getSeconds();},u:function(){var m=this.currentDate.getMilliseconds();return(m<10?'00':(m<100?'0':''))+m;},e:function(){return"Not Yet Supported";},I:function(){return"Not Yet Supported";},O:function(){return(-this.currentDate.getTimezoneOffset()<0?'-':'+')+(Math.abs(this.currentDate.getTimezoneOffset()/ 60)<10?'0':'')+(Math.abs(this.currentDate.getTimezoneOffset()/ 60))+'00';},P:function(){return(-this.currentDate.getTimezoneOffset()<0?'-':'+')+(Math.abs(this.currentDate.getTimezoneOffset()/ 60)<10?'0':'')+(Math.abs(this.currentDate.getTimezoneOffset()/ 60))+':00';},T:function(){var m=this.currentDate.getMonth();this.currentDate.setMonth(0);var result=this.currentDate.toTimeString().replace(/^.+ \(?([^\)]+)\)?$/,'$1');this.currentDate.setMonth(m);return result;},Z:function(){return-this.currentDate.getTimezoneOffset()*60;},c:function(){return this.format("Y-m-d\\TH:i:sP");},r:function(){return this.currentDate.toString();},U:function(){return this.currentDate.getTime()/ 1000;}};$Crabapple.utils.DateTime.relativeTime=function(originalDate){formatPattern=(arguments[1]&&arguments[1].length>0)?arguments[1]:"F d, Y";if(originalDate instanceof Date){this.currentDate=originalDate;}else{currentDate=(originalDate||"").replace(/-/g,"/").replace(/TZ/g," ").replace(/\+(\w+)/g,"");this.currentDate=new Date(currentDate);}
var diff=(((new Date()).getTime()-this.currentDate.getTime())/ 1000);var day_diff=Math.floor(diff / 86400);if(isNaN(day_diff)||day_diff<0)
return;return day_diff==0&&(diff<60&&"just now"||diff<120&&"1 minute ago"||diff<3600&&Math.floor(diff / 60)+" minutes ago"||diff<7200&&"1 hour ago"||diff<86400&&Math.floor(diff / 3600)+" hours ago")||day_diff==1&&"Yesterday"||day_diff<7&&day_diff+" days ago"||day_diff<30&&(Math.ceil(day_diff / 7)>1?Math.ceil(day_diff / 7)+" weeks ago":"1 week ago")||day_diff<365&&(Math.floor(day_diff / 30)>1?Math.floor(day_diff / 30)+" months ago":"1 month ago")||this.format(formatPattern);};$Crabapple.utils.linkToHtml=function(elm){var returning=[];var regexp=/((ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?)/gi;elm.each(function(){returning.push(this.replace(regexp,"<a href=\"$1\">$1</a>"));});return jQuery(returning);};})(jQuery);(function(){var method;var noop=function(){};var methods=['assert','clear','count','debug','dir','dirxml','error','exception','group','groupCollapsed','groupEnd','info','log','markTimeline','profile','profileEnd','table','time','timeEnd','timeStamp','trace','warn'];var length=methods.length;var console=(window.console=window.console||{});while(length--){method=methods[length];if(!console[method]){console[method]=noop;}}}());(function($){$Crabapple.TriforceDebug_v1=function(){};$Crabapple.extend($Crabapple.Class,$Crabapple.TriforceDebug_v1,{sprite:'/webclient/mike/megaman_sprite.png',background:"#FFFFFF",currentFrame:0,elm:null,po:null,animation:['megaman-0','megaman-1','megaman-2','megaman-3','megaman-4','megaman-5','megaman-6','megaman-7'],init:function(){this.hasAuthCookie();},cleanup:function(){$('li[data-mode="modes.debug.sections.crap"] .switch').trigger('click');$('body').attr('style','');$('head').append('<link rel="stylesheet" type="text/css" href="/media/base.css?r='+Math.floor(Math.random()*1000000)+'" />');},debugEnabled:function(){var cookie=$.cookie("crabappleInformation");var info=JSON.parse(cookie);return this.hasMode('modes.debug.sections.javascript',info);},hasMode:function(mode,info){var parts=mode.split('.'),tmp=info;if(tmp==null)return false;for(var i=0;i<parts.length-1;i++){if(tmp[parts[i]]!=null&&tmp[parts[i]])tmp=tmp[parts[i]];else return false;}
return tmp[parts[i]];},drawModule:function(){$.ajaxSetup({cache:true});var self=this;var body=$('body');body.append('<div id="triforce_debug"></div>');this.elm=$('#triforce_debug');this.elm.html(this.getHTML());this.fetchManifests();this.fetchArcStages();this.startAnimation();this.elm.find('.corner').on('click',function(event){event.preventDefault();if($(this).hasClass('stopped')){$(this).removeClass('stopped');self.startAnimation();self.hideOverlay();}
else{$(this).addClass('stopped');self.stopAnimation();self.showOverlay();}});this.elm.find('.page-clear').on('click',function(){if(self.po){self.po.clear();}else{$.getScript('/triforce/debug/page-clear').done(function(){self.po=new $Crabapple.PageClear();self.po.showOverlay();});}});this.elm.find('.showMore').on('click',function(event){event.preventDefault();if(self.elm.find('.moreOptions').hasClass('visible')){self.elm.find('.moreOptions').removeClass('visible').hide();$(this).text('More Options');}else{self.elm.find('.moreOptions').addClass('visible').show();$(this).text('Fewer Options');}});this.elm.find('div.manifest select').on('change',function(){var manifest=$(this).val();self.setCurrentManifest(manifest);});this.elm.find('div.arcStageOverride select').on('change',function(){var stage=$(this).val();self.setCurrentArcStage(stage);});this.elm.find('div.logout').on('click',function(event){event.preventDefault();$.cookie('crabappleAuthorization',null,{path:'/'});$.cookie('crabappleAuthorizationName',null,{path:'/'});$.cookie('crabappleInformation',null,{path:'/'});window.location.reload();});var cookie=$.cookie('crabappleInformation');if(cookie){cookie=JSON.parse(cookie);}
if(cookie&&cookie.modes&&cookie.modes.sme){$.getScript('/__crabapple_admin/js/sme/v1_0_0/sme.js',function(){$Crabapple.SME.init();});}
this.elm.find('.switch').on('click',function(){var mode=$(this).parents('li').attr('data-mode');var crabappleInformation=$.cookie('crabappleInformation');if(crabappleInformation)
var crabappleInformationObject=JSON.parse(crabappleInformation);else{var crabappleInformationObject={'modes':{'manifest':'production',},'configuration':{}};}
if($(this).hasClass('on')){$(this).removeClass('on');self.setModeValue(mode,false,crabappleInformationObject);if(mode.indexOf('sme')>0){if($Crabapple.SME){$Crabapple.SME.destroy();}}}
else{$(this).addClass('on');if(mode.indexOf('crap')>=0){$('head').find('link').each(function(){var href=$(this).attr('href');if(href.indexOf('base.css')>=0)$(this).remove();});$('body').attr('style','font-family:"comic sans ms" !important;background:url("http://thecatapi.com/api/images/get?format=src&type=gif") repeat;');setTimeout(function(){self.cleanup();},5000);}else if(mode.indexOf('sme')>0){$.getScript('/__crabapple_admin/js/sme/v1_0_0/sme.js',function(){$Crabapple.SME.init();});}
self.setModeValue(mode,true,crabappleInformationObject);}
$.cookie('crabappleInformation',JSON.stringify(crabappleInformationObject),{path:'/'});});$('#triforceStandAloneFragment').on('click',function(event){for(var zone in triforceManifestFeed.zones){var standAlone_url='/triforce/module_debug/'+triforceManifestFeed.zones[zone].moduleName+'?feedUrl='+triforceManifestFeed.zones[zone].feed+'&crabappleErrors=true',html='';if(zone.replace('_promo','')==zone){html+='<a title="'+zone+'" class="standalone_debug" target="_blank" href="'+standAlone_url+'">'+zone+': '+triforceManifestFeed.zones[zone].moduleName+' </a>';}else{html+='<a title="'+zone+'" class="standalone_debug" target="_blank" href="'+standAlone_url+'">'+zone+': '+triforceManifestFeed.zones[zone].moduleName+' </a>';}
$('body').prepend(html);}});},setModeValue:function(mode,value,o){var parts=mode.split('.');for(var i=0,tmp=o;i<parts.length-1;i++){if(!tmp[parts[i]]){tmp=tmp[parts[i]]={};}
else{tmp=tmp[parts[i]];}}
tmp[parts[i]]=value;return o;},getHTML:function(){var self=this;var html='';html+='<div class="corner">';html+=' <div class="megaman '+self.animation[self.currentFrame]+'">';html+=' </div>';html+='</div>';html+='<div class="triforce_overlay">';html+='   <div class="manifest"></div>';html+='   <div class="arcStageOverride"></div>';html+=' <button class="page-clear">Clear This Page</button>';html+=' <div class="showMore">More Options</div>';html+=' <ul class="moreOptions" style="display:none;">';html+='  <li data-mode="modes.debug.sections.javascript" class="debug"><div class="switch"><span class="thumb"></span><input type="checkbox" /></div><div class="text">Debug</div></li>';html+='  <li data-mode="modes.cache.refreshObjects" class="cache"><div class="switch"><span class="thumb"></span><input type="checkbox" /></div><div class="text">Cache Refresh</div></li>';html+='  <li data-mode="modes.cdn.akamai.clearRequests" class="akamai"><div class="switch"><span class="thumb"></span><input type="checkbox" /></div><div class="text">Akamai Clear</div></li>';html+='  <li data-mode="modes.cache.refreshFeeds" class="feed"><div class="switch"><span class="thumb"></span><input type="checkbox" /></div><div class="text">Feed Refresh</div></li>';if(config.getTriforceDebugPageClearButton&&config.getTriforceDebugPageClearButton()=="1"){html+='  <li class="feed"><div class="standalone_debug" id="triforceCacheClearButton">Clear Page Cache</div></li>';}
if(config.getSmeEnabled&&config.getSmeEnabled()=="1"){html+='  <li data-mode="modes.sme" class="feed"><div class="switch"><span class="thumb"></span><input type="checkbox" /></div><div class="text">SME</div></li>';}
html+='  <li data-mode="modes.debug.sections.crap" class="feed"><div class="switch"><span class="thumb"></span><input type="checkbox" /></div><div class="text">MEOW!</div></li>';html+=' <div class="standalone_debug" id="triforceStandAloneFragment">StandAlone fragment</div>';html+=' </ul>';html+='   <div class="logout">Logout</div>';html+='</div>';return html;},hasAuthCookie:function(){var self=this;if(document.cookie.indexOf('crabappleAuthorization')>-1){$.getJSON('/debugbar',function(response){if(response&&response.access){self.drawModule();var cookie=$.cookie('crabappleInformation');if(cookie){var info=JSON.parse(cookie);self.elm.find('li[data-mode]').each(function(){if(self.hasMode($(this).attr('data-mode'),info)){$(this).find('.switch').addClass('on');if($(this).attr('data-mode').indexOf('crap')>=0){$(this).find('.switch').removeClass('on');}}});}}});return true;}
return false;},nextFrame:function(){var self=this;var timeout=100;var previousFrame=self.currentFrame;if(self.currentFrame+1==self.animation.length){self.currentFrame=0;}
else{self.currentFrame++;}
if(self.currentFrame+1==self.animation.length){timeout=1000;}
var megaman=self.elm.find('.megaman');if(megaman.hasClass('stopped'))return;megaman.removeClass(self.animation[previousFrame]).addClass(self.animation[self.currentFrame]);setTimeout(function(){self.nextFrame();},timeout);},startAnimation:function(){var self=this;var megaman=self.elm.find('.megaman');megaman.removeClass('stopped');setTimeout(function(){self.nextFrame();},100);},stopAnimation:function(){var self=this;var megaman=self.elm.find('.megaman');megaman.removeClass(self.animation[self.currentFrame]);self.currentFrame=0;megaman.addClass('stopped');},showOverlay:function(){this.elm.find('.triforce_overlay').fadeIn('fast');},hideOverlay:function(){this.elm.find('.triforce_overlay').fadeOut('fast');},fetchManifests:function(){var self=this,currentManifest=this.getCurrentManifest();this.elm.find('div.manifest').append('Manifest: <select name="modes.manifest"></select>');$.getJSON('/__crabapple_admin/manifest/ajax/list',function(response){if(response.result){for(var i in response.result){if(response.result[i].id==currentManifest){self.elm.find('div.manifest select').append('<option value="'+response.result[i].id+'" selected>'+response.result[i].name+'</option>');}
else{self.elm.find('div.manifest select').append('<option value="'+response.result[i].id+'">'+response.result[i].name+'</option>');}}}});},getCurrentManifest:function(){var cookie=$.cookie('crabappleInformation');cookie=JSON.parse(cookie);if(cookie!=null&&cookie.modes&&cookie.modes.manifest)return cookie.modes.manifest;return"production";},setCurrentManifest:function(manifest){var cookie=$.cookie('crabappleInformation');cookie=JSON.parse(cookie);if(cookie==null){cookie={'modes':{'manifest':''},'configuration':{}};}
if(cookie.modes&&cookie.modes.manifest){cookie.modes.manifest=manifest;}
else if(cookie.modes){cookie.modes.manifest=manifest;}
else{cookie.modes={"manifest":manifest};}
if(localStorage&&localStorage.clear){localStorage.clear();}
$.cookie('crabappleInformation',JSON.stringify(cookie),{path:'/'});},fetchArcStages:function(){var self=this,currentArcStage=this.getCurrentArcStage();this.elm.find('div.arcStageOverride').append('Arc Stage: <select name="modes.arcStage"></select>');var arcStagesAvailable=[{id:'default',name:'Site Default'},{id:'live',name:'Live'},{id:'staging',name:'Staging'},{id:'authoring',name:'Authoring'}];for(var stage in arcStagesAvailable){var selected='';if(arcStagesAvailable[stage].id==currentArcStage){selected=' selected="selected"';}
self.elm.find('div.arcStageOverride select').append('<option value="'+arcStagesAvailable[stage].id+'"'+selected+'>'+arcStagesAvailable[stage].name+'</option>');}},getCurrentArcStage:function(){var cookie=$.cookie('crabappleInformation');cookie=JSON.parse(cookie);if(cookie!=null&&cookie.modes&&cookie.modes.arcStage)return cookie.modes.arcStage;return"default";},setCurrentArcStage:function(arcStage){var cookie=$.cookie('crabappleInformation');cookie=JSON.parse(cookie);if(cookie==null){cookie={'modes':{'arcStage':''},'configuration':{}};}
if(cookie.modes&&cookie.modes.arcStage){cookie.modes.arcStage=arcStage;}
else if(cookie.modes){cookie.modes.arcStage=arcStage;}
else{cookie.modes={"arcStage":arcStage};}
if(localStorage&&localStorage.clear){localStorage.clear();}
$.cookie('crabappleInformation',JSON.stringify(cookie),{path:'/'});}});})(jQuery);(function($,w){$Crabapple.TriforceImageBroker=function(){};$Crabapple.extend($Crabapple.Class,$Crabapple.TriforceImageBroker,{_deferredImages:null,devicePixelRatio:null,init:function(){this._deferredImages=[];this.devicePixelRatio=w.devicePixelRatio||1;this.addEvents();this.processDeferredImages();},processDeferredImages:function(){var images=document.querySelectorAll('.image_holder.deferred');for(var i=0,len=images.length;i<len;i++){var info=false;try{info=JSON.parse(images[i].getAttribute('data-info'));}catch(e){info=false;}
if(info!==false){w.Triforce.getMediator().trigger('triforce:queueimage',{'holder':images[i],'info':JSON.parse(images[i].getAttribute('data-info'))});}else{window.Triforce.getMediator().trigger('triforce:message',{'type':'warning','message':'Image info could not be parsed.  This means there is probably an issue with the feed'});}}},addEvents:function(){var self=this,mediator=w.Triforce.getMediator();mediator.on('triforce:queueimage',function(event){var imageToQueue=event[1];if(imageToQueue&&imageToQueue.holder){$(imageToQueue.holder).on('loadImage',function(){window.Triforce.getMediator().trigger('triforce:loadqueuedimage',imageToQueue);});self._deferredImages.push(imageToQueue);}});mediator.on('triforce:loadqueuedimage',function(event){self.checkDeferredImage(event[1]);});mediator.on('triforce:rendercomplete',function(){self.removeDeferredImage();});mediator.on('triforce:module:rendered triforce:pagerendercomplete triforce:pageintouch',function(){self.checkDeferredImages();});var scrollCounter=1,scrollTimeoutId;$(w).on('ontouchmove'in w?'touchmove scroll':'scroll',function(){clearTimeout(scrollTimeoutId);if(scrollCounter%10===0){scrollCounter=1;mediator.trigger('triforce:pageintouch');}
scrollCounter++;scrollTimeoutId=setTimeout(function(){mediator.trigger('triforce:pageintouch');},50);});var resizeTimeoutId;$(w).on('resize',function(){clearTimeout(resizeTimeoutId);resizeTimeoutId=setTimeout(function(){self.checkDeferredImages();},300);});},removeDeferredImage:function(){var deferredImages=[];for(var i=0,len=this._deferredImages.length;i<len;i++){if(!document.body.contains(this._deferredImages[i].holder)){continue;}
deferredImages.push(this._deferredImages[i]);}
this._deferredImages=deferredImages;},checkDeferredImages:function(){for(var i=0,len=this._deferredImages.length;i<len;i++){if(this.isVisible(this._deferredImages[i].holder)){this.checkDeferredImage(this._deferredImages[i]);}else{if(this._deferredImages[i].image&&this._deferredImages[i].image.src.indexOf('.gif')>=1){if(this._deferredImages[i].image.src.indexOf('?format=jpg')<0){this._deferredImages[i].image.src=this._deferredImages[i].image.src+'?format=jpg';}}}}},checkDeferredImage:function(image){if(image){if(!image.processed){this.processLoadingImage(image);}else{this.processReloadingImage(image);}}},processLoadingImage:function(deferredImage){var image=deferredImage.image=new Image(),imageDimensions={width:deferredImage.holder.clientWidth,height:deferredImage.holder.clientHeight},imageInformation=deferredImage.source=this.getAppropriateImage(deferredImage.info,imageDimensions);imageInformation.original&&this.getImageDimensions(imageDimensions,imageInformation.original);deferredImage.width=imageDimensions.width;if(imageDimensions.height){deferredImage.height=imageDimensions.height;deferredImage.aspectRatio=this.getAspectRatio(imageDimensions);}
image.className='image';image.onload=function(){if('classList'in deferredImage.holder){deferredImage.holder.classList.remove('deferred');}else{var classes=deferredImage.holder.className.split(' '),index=classes.indexOf('deferred');if(index!==-1){classes.splice(index,1);deferredImage.holder.className=classes.join(' ');}}};deferredImage.loadingImage=image;if(imageInformation.animated){image.src=imageInformation.src;}else{image.src=this.getImageURL(imageInformation.src,{width:deferredImage.width,height:deferredImage.height,quality:imageInformation.quality});}
image.alt=imageInformation.alt?imageInformation.alt:'';deferredImage.holder.appendChild(image);deferredImage.processed=true;},processReloadingImage:function(imageObject){var imageDimensions={width:imageObject.holder.clientWidth,height:imageObject.holder.clientHeight},imageInformation=this.getAppropriateImage(imageObject.info,imageDimensions),sourceChanged=imageObject.source!==imageInformation,aspectRatio,image;imageObject.source=imageInformation;imageInformation.original&&this.getImageDimensions(imageDimensions,imageInformation.original);if(imageObject.aspectRatio){aspectRatio=this.getAspectRatio(imageDimensions);}
if(sourceChanged||imageDimensions.width>imageObject.width||(imageObject.height&&(imageDimensions.height>imageObject.height||aspectRatio!==imageObject.aspectRatio))){imageObject.width=imageDimensions.width;if(imageObject.height){imageObject.height=imageDimensions.height;imageObject.aspectRatio=aspectRatio;}
if(imageObject.loadingImage){image=imageObject.loadingImage;}else{image=new Image();image.className='image';image.onload=function(){imageObject.holder.replaceChild(imageObject.loadingImage,imageObject.image);imageObject.image=imageObject.loadingImage;imageObject.loadingImage=null;};imageObject.loadingImage=image;}
if(imageInformation.animated){image.src=imageInformation.src;}else{image.src=this.getImageURL(imageInformation.src,{width:imageObject.width,height:imageObject.height,quality:imageInformation.quality});}
image.alt=imageInformation.alt?imageInformation.alt:'';}
if(imageObject.image&&imageObject.image.src&&imageObject.image.src.indexOf('.gif?format=jpg')>0){imageObject.image.src=imageObject.image.src.replace('.gif?format=jpg','.gif');}},getImageURL:function(src,params){var resizeParams=[];if(src.toLowerCase().indexOf('.gif')!==-1){return src;}
if(params.quality){resizeParams.push('quality='+params.quality);}
if(params.width){resizeParams.push('width='+params.width);}
if(params.height){resizeParams.push('height='+params.height);}
if(params.width&&params.height){resizeParams.push('crop=true');}
if(resizeParams.length){src+=(src.indexOf('?')!==-1?'&':'?')+resizeParams.join('&');}
return src;},getAppropriateImage:function(images,dimensions){var i,len,bestImage,bestAspectRatioDiff,image,aspectRatioDiff,requiredAspectRatio;if(images instanceof Array){if(images.length>1){requiredAspectRatio=this.getAspectRatio(dimensions);for(i=0,len=images.length;i<len;i++){image=images[i];if(!image||!image.original){continue;}
aspectRatioDiff=requiredAspectRatio-this.getAspectRatio(image.original);if(aspectRatioDiff<0){aspectRatioDiff*=-1;}
if(!bestImage||bestAspectRatioDiff>aspectRatioDiff&&image.original.width-dimensions.width>=0||aspectRatioDiff===bestAspectRatioDiff&&image.original.width>bestImage.original.width||image.original.width-dimensions.width>=0&&bestImage.original.width-dimensions.width<0){bestImage=image;bestAspectRatioDiff=aspectRatioDiff;}}
return bestImage;}else{return images[0];}}else{return images;}},getImageDimensions:function(dimensions,originalDimensions){var aspectRatioRounded=this.getAspectRatio(dimensions),aspectRatio=this.getAspectRatio(dimensions,true);if(this.devicePixelRatio>1){dimensions.width=Math.ceil(this.devicePixelRatio*dimensions.width);dimensions.height=Math.ceil(this.devicePixelRatio*dimensions.height);}
if(!dimensions.width||dimensions.width>originalDimensions.width){dimensions.width=originalDimensions.width;}
if(dimensions.height&&dimensions.height>originalDimensions.height){dimensions.height=originalDimensions.height;}
if(originalDimensions.aspectRatio!==null){originalDimensions.aspectRatio=this.getAspectRatio(originalDimensions);}
if(originalDimensions.aspectRatio){if(originalDimensions.aspectRatio>aspectRatioRounded){dimensions.width=Math.ceil(dimensions.height*aspectRatio);if(Math.abs(dimensions.width-originalDimensions.width)<=1){dimensions.width=originalDimensions.width;}}else{dimensions.height=Math.ceil(dimensions.width / aspectRatio);if(Math.abs(dimensions.height-originalDimensions.height)<=1){dimensions.height=originalDimensions.height;}}}},getAspectRatio:function(dimension,notRound){var aspectRatio=null;if(dimension.height){aspectRatio=dimension.width / dimension.height;if(!notRound){aspectRatio=Math.round(aspectRatio*10)/ 10;}}
return aspectRatio;},isVisible:function(el){if(!el.parentNode){return false;}
var elRect=el.getBoundingClientRect(),wWidth=w.innerWidth,wHeight=w.innerHeight,hasRect=elRect.bottom||elRect.height||elRect.left||elRect.right||elRect.top||elRect.width;return hasRect&&(elRect.top>=0?elRect.top<=wHeight:elRect.bottom>=0)&&(elRect.left>=0?elRect.left<=wWidth:elRect.right>=0);}});})(jQuery,window);(function($,w){$Crabapple.TriforceLayoutManager=function(){};$Crabapple.extend($Crabapple.Class,$Crabapple.TriforceLayoutManager,{contentHolder:$('#content_holder'),$body:$(document.body),globalZones:null,globalZoneList:[],priorityList:{},moduleTimeout:30000,pageClass:null,languagePreferences:null,init:function(){if(window.Triforce&&window.Triforce.config&&window.Triforce.config.globalZones){this.globalZones=window.Triforce.config.globalZones.join(',');}},startLayout:function(){var feed=triforceManifestFeed,isInitialLoad=false;if(this.pageClass!=null){$('body').removeClass(this.pageClass);}
if(feed.pageClass&&feed.pageClass!=null){$('body').addClass(feed.pageClass);}
if(feed.pageClass){this.pageClass=feed.pageClass;}else{this.pageClass=null;}
if(!feed||!feed.zones){w.Triforce.getMediator().trigger('triforce:pageerror','No zones in feed');}
if(feed.languagePreferences){this.languagePreferences=feed.languagePreferences;}
for(var key in feed.zones){var zone=feed.zones[key];if(zone.feed){if(this.languagePreferences){if(zone.feed.indexOf('lang=true')<0){zone.feed+=(zone.feed.indexOf('?')<0?'?':'&')+'lang=true';zone.feedData=null;}}
if(zone.mobile&&window.Triforce.getMediator().isMobile()){if(zone.feed.indexOf('mobile=true')<0){zone.feed+=(zone.feed.indexOf('?')<0?'?':'&')+'mobile=true';zone.feedData=null;}}}}
this.clearBodyCSS();if(feed.css!=null||feed.supplemental!=null){this.addBodyCSS(feed);}
w.Triforce.getMediator().trigger('triforce:bodystart','Triggering bodystart');if(this.contentHolder.attr('data-initial')&&this.contentHolder.attr('data-initial')==='true'){isInitialLoad=true;this.contentHolder.removeAttr('data-initial');}
if(window.Triforce.config.tierWrapper){var $tierWrapper=$('.tier_wrapper');if($tierWrapper.length){$tierWrapper.children().unwrap();}}
this.clearContent(feed.zones,isInitialLoad);this.globalZoneList=[];this.priorityList={};this.createZones(feed.zones);if(window.Triforce.config.tierWrapper){var $tiersToWrap=$('.tier_2_col, .tier_3_col');if($tiersToWrap.length){$tiersToWrap.wrapInner('<div class="tier_wrapper"></div>');}}
return this.priorityList;},clearContent:function(zones,isInitialLoad){var manager=this;$('.module, .triforce-module').each(function(key,module){var $module=$(module),moduleData=$module.data(),controller=moduleData.tfcontroller,newZoneInfo=moduleData.zone?zones[moduleData.zone]:null,isSameLanguage=!this.languagePreferences&&!moduleData.currentLanguage||moduleData.currentLanguage===this.languagePreferences,destroyModule=true;if(isInitialLoad&&!moduleData.tfdriver){return;}
if(newZoneInfo&&moduleData.tfdriver===newZoneInfo.driver&&isSameLanguage){if(manager.stripHashFromURL(moduleData.tffeed)===manager.stripHashFromURL(newZoneInfo.feed)){destroyModule=false;}else{if(controller&&typeof controller.onModuleWillRefresh==='function'){try{if(controller.onModuleWillRefresh(newZoneInfo)){moduleData.tfrefreshing=true;moduleData.tfrendered=false;moduleData.feedloaded=false;moduleData.feedData=null;destroyModule=false;}}catch(e){window.Triforce.getMediator().trigger('triforce:message',{type:'error',message:'Module '+module.id+':'+moduleData.tfdriver+': onModuleWillRefresh caused an error',exception:e});}}}}
if(destroyModule){if(controller&&typeof controller.onModuleDestroy==='function'){try{controller.onModuleDestroy();}catch(e){window.Triforce.getMediator().trigger('triforce:message',{type:'error',message:'Module '+module.id+':'+moduleData.tfdriver+': onModuleDestroy caused an error',exception:e});}}
$module.remove();}});var requiredTiers={};for(var zoneKey in zones){var splittedZoneKey=zoneKey.split('_'),tier=parseInt(splittedZoneKey[0].substr(1),10),col=splittedZoneKey[1];if(!requiredTiers[tier]){requiredTiers[tier]={};}
if(!requiredTiers[tier][col]){requiredTiers[tier][col]=true;}}
var tiers=this.contentHolder[0].querySelectorAll('[id^="tier_"]');if(tiers&&tiers.length){for(var i=0;i<tiers.length;i++){var tierRequired=requiredTiers[tiers[i].id.split('_')[1]];if(!tierRequired){tiers[i].parentNode.removeChild(tiers[i]);}else{var cols=tiers[i].querySelectorAll('[id$="_lc"],[id$="_rc"],[id$="_mc"]');if(cols&&cols.length){if(cols.length){for(var j=0;j<cols.length;j++){if(!tierRequired[cols[j].id.split('_')[1]]){cols[j].parentNode.removeChild(cols[j]);}}}}}}}
window.Triforce.getMediator().trigger('triforce:clearqueues');},stripHashFromURL:function(URL){if(!URL){return URL;}
var splittedURL=URL.split('?'),queryString=splittedURL&&splittedURL[1];if(queryString){queryString=queryString.replace(/hash=[^&]*&?/g,'');}
return splittedURL[0]+(queryString&&queryString.length?'?'+queryString:'');},createZones:function(zones){for(var key in zones){var zone=zones[key],zoneName=zone.zone;if(this.globalZones.indexOf(zoneName)>=0){this.addGlobalZone(zone);continue;}
if(zoneName.indexOf('_')<0){w.Triforce.getMediator().message({'type':'warning','message':'Zone '+zoneName+' seems to be invalid.  It cannot be placed on the page'});continue;}
var $module=this.placeModule(zoneName,this.getModulePlacement(zoneName));this.addModuleAttributes($module,zone);if($module.data('tfrendered')===true){$module.removeAttr('data-tfpriority');}else{this.addPriority(zone.priority,zoneName,$module);if(zone.feedData){w.Triforce.getMediator().trigger('triforce:feedloaded',zone.feed,zone.feedData,$module);}else{if(!$module.data('tffeed')){w.Triforce.getMediator().trigger('triforce:feedloaded',zone.feed,zone.feedData,$module);}else{w.Triforce.getMediator().trigger('triforce:loadfeed',$module.data('tffeed'),$module);}}
this.fireModuleEvent(zone);}}
this.sortGlobalZones();this.createGlobalZones();},addGlobalZone:function(zone){this.globalZoneList.push(zone);},addPriority:function(priority,zone,$module){if(!this.priorityList[priority]){this.priorityList[priority]=[];}
this.priorityList[priority].push({'zone':zone,'module':$module,'uid':$module.data('uid')});},getModulePlacement:function(zone){var splittedZone=zone.split('_'),tier=splittedZone&&parseInt(splittedZone[0].replace(/(t|tier)/ig,''),10),promo,column;if(!splittedZone||splittedZone.length===2){column='1';promo=1;}else{column=splittedZone[1].replace(/(c)/ig,'');promo=parseInt(splittedZone[2].replace(/promo/ig,''),10)}
return{'tier':tier,'column':column,'promo':promo};},placeModule:function(zone,placement){var currentTierName='tier_'+placement.tier,currentColName='t'+placement.tier+'_'+placement.column+'c',tier=document.getElementById(currentTierName),col=document.getElementById(currentColName),zoneDiv=document.getElementById(zone)||document.querySelector('[data-zone="'+zone+'"]'),i,tiersCount,zonesCount;if(!tier){var tiers=this.contentHolder[0].querySelectorAll('[id^="tier_"]'),tierNumber;tier=document.createElement('div');tier.id=currentTierName;for(i=0,tiersCount=tiers.length;i<tiersCount;i++){tierNumber=parseInt(tiers[i].id.replace('tier_',''),10);if(tierNumber>placement.tier){tiers[i].parentNode.insertBefore(tier,tiers[i]);break;}else if(i==tiersCount-1){tiers[i].parentNode.insertBefore(tier,tiers[i].nextSibling);}}
if(!document.getElementById(currentTierName)){tier=this.contentHolder[0].insertBefore(tier,this.contentHolder[0].lastElementChild);}}else{if(this.getColumnCount(tier)>1){tier.className='tier_'+this.getColumnCount(tier)+'_col';}
else{tier.className='';}}
if(!col){col=document.createElement('div');col.id='t'+placement.tier+'_'+placement.column+'c';tier.appendChild(col);if(this.getColumnCount(tier)>1){tier.className='tier_'+this.getColumnCount(tier)+'_col';}
else{tier.className='';}}
if(!zoneDiv){zoneDiv=this.createZoneDiv(zone);if(typeof placement.promo==='number'&&!isNaN(placement.promo)){var zoneKeyPrefix='t'+placement.tier+'_'+placement.column+'c'+'_promo',zones=col.querySelectorAll('[id^="'+zoneKeyPrefix+'"]'),promoNumber;if(zones&&zones.length){for(i=0,zonesCount=zones.length;i<zonesCount;i++){promoNumber=parseInt(zones[i].id.replace(zoneKeyPrefix,''),10);if(promoNumber>placement.promo){zones[i].parentNode.insertBefore(zoneDiv,zones[i]);break;}else if(i===zonesCount-1){zones[i].parentNode.insertBefore(zoneDiv,zones[i].nextSibling);}}}else{col.appendChild(zoneDiv);}}else{col.appendChild(zoneDiv);}}
return $(zoneDiv);},createZoneDiv:function(zone){var zoneDiv=document.createElement('div');zoneDiv.id=zone;zoneDiv.setAttribute('data-zone',zone);return zoneDiv;},getUniqId:function(){var id=0;return function(){return id++;};},addModuleAttributes:function(module,zone){module.data('uid',this.getUniqId());module.addClass('triforce-module');if(zone.version&&zone.version=="V3"){module.data('tfversion','3');module.data('tfname',zone.moduleName);module.data('tfscripthash',zone.scriptHash);module.data('tfdriver',zone.driver);module.attr('data-tfdriver',zone.driver);if(zone.moduleName){module.addClass(zone.moduleName.toLowerCase());}}
module.attr({'data-zone':zone.zone,'data-tffeed':zone.feed,'data-tfmethod':zone.method,'data-tfpriority':zone.priority});module.data('zone',zone.zone);module.data('tffeed',zone.feed);module.data('tfpriority',zone.priority);if(this.languagePreferences){module.data('currentLanguage',this.languagePreferences);}
if(!module.data('tfrendered')&&!module.data('tfrefreshing')&&!module.attr('data-tfstatic')){module.attr('data-tfloading',true);}
if(zone.libraries!==null){var libraries=zone.libraries,libsString='',hashString='';module.data('tfdriver',zone.moduleDriver);if(zone.template){module.data('tftemplate',zone.template);}
if(libraries){for(var index=0;index<libraries.length;index++){libsString+=libraries[index].script;hashString+=libraries[index].hash;if(index!=(libraries.length-1)){libsString+=',';hashString+=',';}}
module.data('tflibs',libsString);module.data('tflibshash',hashString);}}},sortGlobalZones:function(){this.globalZoneList.sort(function(a,b){if(a.zone.indexOf('menu')||b.zone.indexOf('footer')){return-1;}
if(a.zone.indexOf('footer')||b.zone.indexOf('menu')){return 1;}
return 0;});},createGlobalZones:function(){var $zone,zone,zoneName,key;for(key in this.globalZoneList){zone=this.globalZoneList[key];zoneName=zone.zone;$zone=$('#'+zoneName);w.Triforce.getMediator().registerModule(zoneName,zone.feed,zone.moduleDriver,zone.libraries);if(!$zone.length){if(zoneName.indexOf('menu')>=0||zoneName.indexOf('report')>=0){if(!this.contentHolder.parent().find('.header #'+zoneName).length){if(this.contentHolder.parent().find('.header').length){$zone=$('<div id="'+zoneName+'"/>').prependTo(this.contentHolder.parent().find('.header'));}else{$zone=$('<div id="'+zoneName+'"/>').prependTo(this.contentHolder);}}}else if(zoneName.indexOf('header')>=0){$zone=$('<div id="'+zoneName+'"/>').insertBefore(this.contentHolder);}else if(zoneName.indexOf('footer')>=0){$zone=$('<div id="'+zoneName+'"/>').appendTo(this.contentHolder.parent());}else{$zone=$('<div id="'+zoneName+'"/>').appendTo(this.contentHolder);}}
this.addModuleAttributes($zone,zone);if($zone.data('tfrendered')===true){$zone.removeAttr('data-tfpriority');}else{this.addPriority(zone.priority,zoneName,$zone);if(zone.feedData){w.Triforce.getMediator().trigger('triforce:feedloaded',zone.feed,zone.feedData,$zone);}else{if(!$zone.data('tffeed')){w.Triforce.getMediator().trigger('triforce:feedloaded',zone.feed,zone.feedData,$zone);}else{w.Triforce.getMediator().trigger('triforce:loadfeed',$zone.data('tffeed'),$zone);}}
this.fireModuleEvent(zone);}}},fireModuleEvent:function(zone){if(zone.moduleName&&zone.feed){w.Triforce.getMediator().trigger('triforce:module:load:'+zone.moduleName,zone.feed);}},getColumnCount:function(tier){var nodes=tier.childNodes,count=0;if(nodes.length){for(var i=0;i<nodes.length;i++){if(typeof(nodes[i].tagName)!='undefined'&&nodes[i].tagName.toLowerCase()=='div'){count++;}}}
return count;},clearBodyCSS:function(){var classes=this.$body.attr('class'),$colorScheme=$('#color_scheme');this.$body.removeAttr('style');if(classes){classes=classes.split(' ');for(var i in classes){if(classes[i].indexOf('from_page')>=0){this.$body.removeClass(classes[i]);$('#'+classes[i].replace('from_page_','')).remove();}}}
if($colorScheme.length){if($colorScheme.attr('data-setup')){$colorScheme.removeAttr('data-setup');}else{$colorScheme.remove();}}},addBodyCSS:function(feed){if(feed.css){var css=feed.css,pageId=feed.id;if(window.Triforce.config.CSSHelperDriverName&&window.Triforce.config.CSSHelperPackage){w.Triforce.scriptManager.loadStandaloneScript(window.Triforce.config.CSSHelperPackage,function(){var driver=new window['$Crabapple']['TriforceHelper_'+window.Triforce.config.CSSHelperDriverName]();driver.init(css,pageId);});}else{var prefix='.from_page_'+pageId,style=document.createElement('style');this.$body.addClass('from_page_'+pageId);style.type='text/css';style.id=pageId;style.innerHTML=(this.getCSSContents(css,prefix));document.head.appendChild(style);}}
if(feed.supplemental&&feed.supplemental.colors&&feed.supplemental.colors.colors){var colorScheme=feed.supplemental.colors.colors,s=document.createElement('style'),content='';s.type='text/css';s.id='color_scheme';for(var selector in colorScheme){content+=' .'+selector+' { '+'color:'+colorScheme[selector]+' } ';content+=' .'+selector+'_background { '+'background-color:'+colorScheme[selector]+' } ';}}},getCSSContents:function(css,prefix){var contents='@media screen and (min-width: 1200px) {',selectorsList='#background_holder';if(triforceManifestFeed.CMSTitle.match(/player/i)){selectorsList='.player';}
if(css.pageBackgroundImage){if(!css.pageBackgroundColor)css.pageBackgroundColor='transparent';contents+=prefix+' '+selectorsList+' {';contents+='background: '+css.pageBackgroundColor+' url('+css.pageBackgroundImage+') no-repeat top center !important;';contents+='}';}
contents+='}';return contents;},fetchLegacyPriorities:function(){var self=this,$tfPriorities=$('[data-tfpriority]');this.priorityList={};if($tfPriorities.length){$tfPriorities.each(function(){var t=$(this);self.addPriority(t.attr('data-tfpriority'),t.attr('data-zone'),t);if(!t.attr('data-tffeed'))t.data('feedloaded','true');});return this.priorityList;}else{return false;}}});})(jQuery,window);(function($,w){$Crabapple.TriforceMediator=function(){};$Crabapple.extend($Crabapple.Class,$Crabapple.TriforceMediator,{listeners:{},registeredModules:{},waitTimes:{'priority':1000,'helper':3000},triforceDebugEnabled:false,triforceDebug:{},triforcePageReady:false,triforcePageUrl:'',triforceInitialLoad:true,_firedEvents:null,on:function(eventNames,callback,checkFired){var eventType;eventNames=eventNames.split(' ');for(var i=0,len=eventNames.length;i<len;i++){eventNames[i]=eventNames[i].toLowerCase();this.listeners[eventNames[i]]=this.listeners[eventNames[i]]||[];this.listeners[eventNames[i]].push(callback);if(checkFired===true&&this.isPageLevelEvent(eventNames[i])){eventType='page';if(this._firedEvents[eventType]&&this._firedEvents[eventType][eventNames[i]]){callback(this._firedEvents[eventType][eventNames[i]]);}}}},off:function(eventName,callback){var toKeepAlive,callbacks,i,len;if(!this.listeners[eventName]||!this.listeners[eventName].length){return;}
if(eventName&&!callback){this.listeners[eventName]=null;delete this.listeners[eventName];return;}
callbacks=this.listeners[eventName];this.listeners[eventName]=toKeepAlive=[];for(i=0,len=callbacks.length;i<len;i++){if(callbacks[i].callback!==callback){toKeepAlive.push(callbacks[i]);}}
if(!toKeepAlive.length){this.listeners[eventName]=null;delete this.listeners[eventName];}},trigger:function(eventName){var eventType;if(!arguments||!arguments.length)return;eventName=eventName.toLowerCase();if(this.isPageLevelEvent(eventName)){eventType='page';this._firedEvents[eventType]=this._firedEvents[eventType]||{};this._firedEvents[eventType][eventName]=arguments;}
if(!this.listeners[eventName]||!this.listeners[eventName].length){this.message({'type':'debug','message':'No listener is registered for '+eventName});return;}
for(var i=0,len=this.listeners[eventName].length;i<len;i++){try{this.listeners[eventName][i](arguments);}catch(e){this.message({type:'error',message:eventName+' event callback failed with an error',exception:e});}}},isPageLevelEvent:function(eventName){eventName=eventName.split(':');return eventName[0]==='page'&&eventName[1]!==undefined;},init:function(){this.initializeDebug();this.initializeEvents();},initializeDebug:function(){if(document.cookie.indexOf('crabappleAuthorization')>=0){this.triforceDebugEnabled=true;this.triforceDebug=new window.$Crabapple.TriforceDebug_v1();this.triforceDebug.init();}
else if(typeof(triforceDebugOverride)!='undefined'&&triforceDebugOverride==true){this.triforceDebugEnabled=true;this.triforceDebug=new window.$Crabapple.TriforceDebug_v1();this.triforceDebug.init();}},initializeEvents:function(){this._firedEvents={};this.initializePageEvents();this.initializeFeedEvents();this.initializeScriptEvents();this.initializeModuleEvents();this.initializeErrorEvents();this.initializeStorageEvents();this.initializeMonitorEvents();},debugEnabled:function(){if(window.Triforce.config.debug&&window.Triforce.config.debug!='false')return true;if(this.triforceDebugEnabled===true){return this.triforceDebug.debugEnabled();}
return false;},initializePageEvents:function(){var self=this;this.on('triforce:complete',function(){w.Triforce.priorityManager.completeFired=true;self.message({'type':'message','message':':: Triforce:complete - all modules rendered ::.'});});this.on('triforce:pagestartload',function(){self._firedEvents.page={};self.message({'type':'message','message':'Triforce Page started loading.'});});this.on('triforce:pageredirect',function(){self.message({'type':'message','message':'Triforce Page got redirect.'});});this.on('triforce:pageloaded',function(){w.Triforce.getPageLoader().handleInitialLoad();});this.on('triforce:pageready',function(){w.Triforce.pageReady();self.trigger('triforce:message',{'type':'debug','message':'Triforce Page Ready'});self.triforcePageReady=true;self.triforcePageUrl=document.location.pathname;});this.on('triforce:rendercomplete',function(){w.Triforce.getPageLoader().hideActivityIndicator();self.message({'type':'message','message':'Page render is complete.  All modules rendered'});});this.on('triforce:message',function(arg){var data=null;if(arg&&arg.length&&arg.length===2){data=arg[1];}
if(data!==null){self.message(data);}});this.on('triforce:loadpage',function(arg){var url=arg[1];self.triforceInitialLoad=false;self.triforcePageReady=false;w.Triforce.abortAllRequests();w.Triforce.priorityManager.clearState();self.triforcePageUrl='';w.Triforce.loadPage(url,{'eventFired':'pushstate'});});},initializeFeedEvents:function(){this.on('triforce:loadfeed',function(arg){if(arg.length&&arg.length===3){w.Triforce.queueFeedLoad(arg[1],arg[2]);}});this.on('triforce:feedloaded',function(arg){if(arg&&arg.length&&arg.length===4){w.Triforce.registerFeedLoaded(arg[1],arg[2],arg[3]);}});},initializeScriptEvents:function(){this.on('triforce:loadscript',function(arg){if(arg.length&&arg.length===4&&!arg[2].scriptFetching){w.Triforce.queueJavascript(arg[1],arg[2],arg[3]);arg[2].scriptFetching=true;}});},initializeModuleEvents:function(){var self=this;this.on('triforce:modulerender',function(arg){var $module=arg[1];w.Triforce.getModuleRenderer().renderModule($module);});this.on('triforce:module:process',function(arg){var wrapper=arg[1],info=arg[2],hashList;hashList=typeof(btoa)==='function'?btoa(hashList):hashList;w.Triforce.layoutManager.addModuleAttributes(wrapper,info);if(!info.feedData){w.Triforce.getMediator().trigger('triforce:loadfeed',info.feed,wrapper);}else{w.Triforce.getMediator().trigger('triforce:feedloaded',info.feed,{result:info.feedData},wrapper);}
w.Triforce.getMediator().trigger('triforce:loadscript',info.moduleName,wrapper,hashList);});this.on('triforce:module:render',function(arg){var module=arg[1];w.Triforce.getPageLoader().hideActivityIndicator();w.Triforce.getModuleRenderer().moduleReady(module);});this.on('triforce:module:fail',function(arg){var module=arg[1];$(module).remove();});this.on('triforce:module:scriptsloaded',function(arg){var module=arg[1];module.data('scriptsloaded','true');if(module.data('feedloaded')==='true'){self.trigger('triforce:module:render',module);}});this.on('triforce:module:feedloaded',function(arg){var module=arg[1];module.data('feedloaded','true');if(module.data('tfshouldnotrender')==='true'&&module.data('tfrefreshing')!==true){self.trigger('triforce:module:fail',module);return;}
if(module.data('scriptsloaded')==='true'){self.trigger('triforce:module:render',module);}});this.on('triforce:priority:removemodule',function(arg){var module=arg[1];w.Triforce.getPriorityManager().removeModule(module);});this.on('triforce:moduleRenderComplete',function(instance){});this.on('triforce:moduleRenderFailed',function(data){});},initializeErrorEvents:function(){var self=this;this.on('triforce:pageerror',function(arg){var event,data;if(arg&&arg.length&&arg.length===2){data=arg[1];}
self.message({'type':'error','message':data});});this.on('triforce:legacyload',function(){w.Triforce.loadLegacyPage();});},initializeStorageEvents:function(){},initializeMonitorEvents:function(){var self=this;w.digitalData={};if(w.Triforce.config&&w.Triforce.config.monitorEnabled){this.on('triforce:triggermonitor',function(arg){var event,data;if(arg&&arg.length&&arg.length==2){data=arg[1];if(typeof(_satellite)!='undefined'){self.message({'type':'message','message':'Triggering '+data+' monitor event'});_satellite.track(data);}}});this.on('triforce:monitorPageChange',function(){w.digitalData={page:{pageURL:w.location.href},user:{loginSocial:'logged out',loginTVE:'logged out'}};self.trigger('triforce:triggermonitor','pageChange');});this.on('triforce:monitorContentClick',function(arg){w.digitalData={page:{pageURL:w.location.href},user:{loginSocial:'logged out',loginTVE:'logged out'}};if(arg&&arg.length&&arg.length==2){w.digitalData.content={module:arg[1]};self.trigger('triforce:triggermonitor','contentClick');}else if(arg&&arg.length&&arg.length==3){w.digitalData.content={module:arg[1],franchise:arg[2]};self.trigger('triforce:triggermonitor','contentClick');}});this.on('triforce:monitorContentShare',function(arg){if(arg&&arg.length&&arg.length==3){w.digitalData={page:{pageURL:w.location.href},user:{loginSocial:'logged out',loginTVE:'logged out'},content:{shareContentName:arg[1],shareContentProvider:arg[2]}};self.trigger('triforce:triggermonitor','contentShare');}});this.on('triforce:monitorVideoStart',function(arg){if(arg&&arg.length&&arg.length==2){self.trigger('triforce:triggermonitor','videoStart');}});this.on('triforce:monitorVideoComplete',function(arg){if(arg&&arg.length&&arg.length==2){w.digitalData={page:{pageURL:w.location.href},user:{loginSocial:'logged out',loginTVE:'logged out'},content:{videoName:arg[1]}};self.trigger('triforce:triggermonitor','videoComplete');}});}},storeValue:function(key,value){w.Triforce.getStorageManager().storeValue(key,value);},getValue:function(key){return w.Triforce.getStorageManager().getValue(key);},storeObject:function(key,obj){w.Triforce.getStorageManager().storeObject(key,obj);},getObject:function(key){return w.Triforce.getStorageManager().getObject(key);},storeSharedObject:function(key,obj,expiry){w.Triforce.getStorageManager().setSharedObject(key,obj,expiry);},getSharedObject:function(key){return w.Triforce.getStorageManager().getSharedObject(key);},initialLoad:function(){return this.triforceInitialLoad;},message:function(message){if(console&&console.log&&message.type&&message.message){message.message=new Date().toLocaleString()+' - '+message.message;switch(message.type){case'message':console.debug(message.message);break;case'warning':console.warn(message.message);break;case'debug':console.debug(message.message);break;case'error':console.error(message.message);if(message.exception){console.error(message.exception);}
break;default:console.log(message.message);}}},getFeedData:function(feedUrl){return w.Triforce.getFeedData(feedUrl);},isMobileStored:null,isMobile:function(){if(this.isMobileStored===null){var c=$.cookie('btg_device');if(c!=null&&c.length){if(c.indexOf('1')>0)this.isMobileStored=true;}
if(this.isMobileStored===null){this.isMobileStored=navigator.userAgent.match(/Android|webOS|iPhone|iPod|iPad|BlackBerry|Windows Phone/i)!=null;}}
return this.isMobileStored;},isIOS:function(){return navigator.userAgent.match(/(iPod|iPhone|iPad)/);},isIPad:function(){return navigator.userAgent.match(/(iPad)/);},isAndroid:function(){return navigator.userAgent.match(/(andriod|Andriod)/);},registerModule:function(zone,feed,driver,libraries){this.registeredModules[zone]={'zone':zone,'feed':feed,'driver':driver,'libraries':libraries};},isModuleRegistered:function(zone,feed,driver,libraries){if(!this.registeredModules[zone])return false;var moduleObj=this.registeredModules[zone];if(moduleObj.feed==feed&&moduleObj.driver==driver){if(!libraries||this.libraryMatch(libraries,moduleObj.libraries)){return true;}}else{return false;}
return false;},libraryMatch:function(source,target){if(source.length==target.length){for(var i in source){if(source[i]!=target[i])return false;}
return true;}
return false;}});})(jQuery,window);(function($,w){$Crabapple.TriforceModuleRenderer=function(){};$Crabapple.extend($Crabapple.Class,$Crabapple.TriforceModuleRenderer,{init:function(){},moduleReady:function(module){var moduleData=module.data(),feedData=moduleData.tffeed?w.Triforce.getMediator().getFeedData(moduleData.tffeed):null,driver=moduleData.tfdriver,controller=moduleData.tfcontroller;if(moduleData.tfrendered===true){w.Triforce.getMediator().trigger('triforce:priority:removemodule',module);w.Triforce.getMediator().message({'type':'message','message':'Module '+driver+' is already rendered'});return;}
if(!moduleData.scriptsloaded){return;}
try{if(moduleData.tfrefreshing===true){if(controller&&typeof controller.onModuleRefresh){controller.onModuleRefresh(feedData);w.Triforce.getMediator().trigger('triforce:priority:removemodule',module);moduleData.tfrendered=true;moduleData.tfrefreshing=false;}else{throw new Error('Module '+module[0].id+':'+moduleData.tfdriver+' is set to refresh but does not implement onModuleRefresh method');}}else{if(driver){if(!window.$Crabapple['TriforceModule_'+driver]){w.Triforce.getMediator().message({'type':'message','message':'TriforceModule_'+driver+': not loaded yet or doesn\'t exist may need to check the js library.'});return;}
if(window.$Crabapple['TriforceModule_'+driver].parentController){this.inheritController('$Crabapple.TriforceModule_'+driver);}
var moduleDriver=new window.$Crabapple['TriforceModule_'+driver]();moduleDriver.init(module,feedData);module.data('tfcontroller',moduleDriver);}else{w.Triforce.getMediator().message({'type':'error','message':'Module has no driver - '+module.attr('data-zone')});return;}}
w.Triforce.getMediator().trigger('triforce:module:rendered',module);w.Triforce.getMediator().trigger('triforce:priority:removemodule',module);}catch(e){w.Triforce.getMediator().message({'type':'error','message':'Module '+module[0].id+':'+moduleData.tfdriver+' render failed'+(moduleData.tfrefreshing?': refresh':''),'exception':e});w.Triforce.getMediator().trigger('triforce:module:fail',module);}},renderModule:function($module){var data=$module.data(),mediator=w.Triforce.getMediator(),scriptList,hashList;if(!$module.length||data.zone===undefined){mediator.trigger('triforce:priority:removemodule',$module);return;}
if(!$('[data-zone="'+data.zone+'"]').length){mediator.trigger('triforce:priority:removemodule',$module);return;}
mediator.message({'type':'message','message':'Rendering module in '+data.zone+' with priority '+data.tfpriority});if(data.scriptsloaded==='true'){if(data.feedloaded==='true'){mediator.trigger('triforce:module:render',$module);}
return;}
if(data.tfversion&&data.tfversion=='3'){scriptList=data.tfname;hashList=data.tfscripthash+data.tfdriver;if(typeof(btoa)=='function')hashList=btoa(hashList);mediator.trigger('triforce:loadscript',scriptList,$module,hashList);}else if(data.tflibs&&data.tflibs.length){scriptList=data.tflibs;hashList=data.tflibshash+data.tfdriver;if(data.tfscripthash)hashList=data.tfscripthash+data.tfdriver;if(typeof(btoa)=='function'){hashList=btoa(hashList);}
mediator.trigger('triforce:loadscript',scriptList,$module,hashList);}else{mediator.trigger('triforce:module:scriptsloaded',$module);}},inheritController:function(controllerName){var Controller,parentController,extension;controllerName=controllerName.split('.');Controller=window[controllerName[0]][controllerName[1]];if(typeof Controller!=='function'){parentController=this.inheritController(Controller.parentController);extension=Controller.extension;Controller=window[controllerName[0]][controllerName[1]]=function(){};$Crabapple.extend(parentController,Controller,extension);}
return Controller;}});})(jQuery,window);(function($,w){$Crabapple.TriforcePageLoader=function(){};$Crabapple.extend($Crabapple.Class,$Crabapple.TriforcePageLoader,{activityIndicator:null,previousPage:'',currentPage:'',customPostPageLoadFunc:null,init:function(){this.activityIndicator=$('#activityIndicator');this.previousPage=w.location.href;this.currentPage=w.location.href;this.addWindowEvents();},handleInitialLoad:function(){var self=this;this.activityIndicator.fadeIn(100);if(typeof(triforceManifestFeed)=='undefined'||triforceManifestFeed==''){var feedURL=window.Triforce.config.manifestFeed+'?url='+encodeURIComponent(w.location.href);$.getJSON(feedURL,function(response){triforceManifestFeed=response.manifest;if(triforceManifestFeed===false){w.Triforce.getPageLoader().hideActivityIndicator();w.Triforce.getMediator().trigger('triforce:legacyload');}
else{if(null!=self.customPostPageLoadFunc){triforceManifestFeed=self.customPostPageLoadFunc(triforceManifestFeed);}
w.Triforce.getMediator().trigger('triforce:pageready');}});return;}
if(triforceManifestFeed){triforceManifestFeed=triforceManifestFeed.manifest;if(null!=self.customPostPageLoadFunc){triforceManifestFeed=self.customPostPageLoadFunc(triforceManifestFeed);}
w.Triforce.getMediator().trigger('triforce:pageready');}
else{w.Triforce.getMediator().trigger('triforce:errornomanifest');}},hideActivityIndicator:function(){this.activityIndicator.fadeOut(100);},loadPage:function(url,pageStatus){var self=this,additionalParams='';if(url.substr(0,15)=='javascript:void')return;if(url.substr(0,1)=='#')return;if(url.match(/^\//)){url=w.location.protocol+'//'+w.location.host+url;}
if(url.replace(window.location.href,'').substr(0,1)=='#')return;if(!pageStatus){if(url==window.location.href&&url.match(/#/))return;}else if(pageStatus&&pageStatus.eventFired&&pageStatus.eventFired!='popstate'){if(url==window.location.href&&url.match(/#/))return;}
var newUrl=url;if(triforceManifestFeed==false){window.location.href=url;return;}
if(typeof($.cookie)=='function'){if($.cookie('crabappleInformation')){var ci=JSON.parse($.cookie('crabappleInformation'));if(ci.modes&&ci.modes.manifest){additionalParams='&currentManifest='+ci.modes.manifest;}}}
w.Triforce.getMediator().trigger('triforce:pagestartload');if(this.checkPageStatus(pageStatus)){if(this.manifestAjax){this.manifestAjax.abort();}
this.activityIndicator.fadeIn(100);this.previousPage=w.location.href;var feedURL=window.Triforce.config.manifestFeed+"?url="+encodeURIComponent(url);this.manifestAjax=$.getJSON(feedURL+additionalParams,function(response){var newLocationURL;self.currentPage=url;self.manifestAjax=null;triforceManifestFeed=response.manifest;if(triforceManifestFeed===false||!self.handlePushState(newUrl)){document.location.href=newUrl;return;}
if(triforceManifestFeed.type=='redirect'&&triforceManifestFeed.newLocation){if(triforceManifestFeed.newLocation.url){newLocationURL=triforceManifestFeed.newLocation.url;}else{newLocationURL=triforceManifestFeed.newLocation;}
if(!self.isSameOrigin(newLocationURL)){window.location.href=newLocationURL;return;}
self.updateHistoryState(newLocationURL);w.Triforce.loadPage(newLocationURL,{eventFired:'redirect'});w.Triforce.getMediator().trigger('triforce:pageredirect');return;}else{if(null!=self.customPostPageLoadFunc){triforceManifestFeed=self.customPostPageLoadFunc(triforceManifestFeed);}
if(triforceManifestFeed.title){document.title=triforceManifestFeed.title;}
if(triforceManifestFeed.CMSTitle){document.body.id=triforceManifestFeed.CMSTitle.replace(/\s/g,'_').replace(/[@\.\[\]\(\)]/g,'').replace(/__/g,'_').toLowerCase();}
if(document.body.className.indexOf('triforce_rendered')===-1){document.body.className=document.body.className+' triforce_rendered';}
w.Triforce.getMediator().trigger('triforce:pageready');}});}else{if(document.location.href!==url){document.location.href=url;}}},handlePushState:function(url){if(w.history&&w.history.pushState){if(url!=w.location.href){var state={'state':encodeURIComponent(url)};try{history.pushState(state,'',url);}catch(e){return false;}
return true;}
else{if(typeof(TriforceConfiguration)!='undefined'&&!TriforceConfiguration.disabledSamePageReload){window.location.reload();}}}
return false;},updateHistoryState:function(url){if(w.history&&w.history.replaceState){history.replaceState({'state':encodeURIComponent(url)},'',url);}},checkPageStatus:function(pageStatus){if(pageStatus){if(pageStatus.eventFired&&pageStatus.eventFired.match(/redirect|popstate|pushstate/)){return true;}}
return false;},addWindowEvents:function(){var self=this,isTriforcePage=(typeof(triforceManifestFeed)=='undefined'||!triforceManifestFeed)?(false):(true),eventFired='popstate';$(window).on('popstate',function(){if(self.currentPage==location.href&&self.currentPage==self.previousPage)return;if(self.currentPage.replace(location.href,'').substr(0,1)=='#'){self.currentPage=location.href;return;}
var locationHash=location.href,currentHash=self.currentPage;if(locationHash.indexOf('#')>=0){locationHash=locationHash.substr(0,locationHash.indexOf('#'));}
if(currentHash.indexOf('#')>=0){currentHash=currentHash.substr(0,currentHash.indexOf('#'));}
if(currentHash==locationHash){self.currentPage=location.href;return;}
if(location.href.replace(self.currentPage,'').substr(0,1)=='#'){eventFired='pushstate';}else{eventFired='popstate';}
self.currentPage='';if(isTriforcePage){self.currentPage=location.href;w.Triforce.loadPage(location.href,{eventFired:eventFired});}else{window.location.href=location.href;}});},isSameOrigin:function(url){if(url.indexOf(window.location.protocol+'//'+window.location.host)===0){return true;}
return false;}});})(jQuery,window);(function($,w){$Crabapple.TriforcePriorityManager=function(){};$Crabapple.extend($Crabapple.Class,$Crabapple.TriforcePriorityManager,{PRIORITY_TIMEOUT:0,ATTEMPT_TIMEOUT:0,waitTime:0,priorities:[],modulesLeft:0,processingModules:[],numberAttempts:0,modulesToBeRendered:0,queuesFired:false,renderComplete:false,completeFired:false,init:function(){this.PRIORITY_TIMEOUT=window.Triforce.config.priorityTimeout;this.ATTEMPT_TIMEOUT=window.Triforce.config.stragglersTimeout;this.completeFired=false;this.checkIsPageLoaded();},startRenderPriorities:function(priorities){this.priorities=priorities;this.waitTime=this.PRIORITY_TIMEOUT;this.sortPriorities();if(this.priorities.length===1&&this.priorities[0].modules.length===1){this.waitTime=this.ATTEMPT_TIMEOUT;}
this.renderModulesByPriority(this.priorities.shift());},sortPriorities:function(){var sorted=[],priority;for(var i in this.priorities){sorted.push(i);}
sorted.sort(function(a,b){return a-b;});for(i=0;i<sorted.length;i+=1){priority={'priority':sorted[i],'modules':this.priorities[sorted[i]],'iteration':0};sorted[i]=priority;}
this.priorities=sorted;},renderModulesByPriority:function(priority){if(priority){this.processingModules=this.processingModules.concat(priority.modules);this.modulesLeft+=priority.modules.length;if(this.modulesLeft>this.modulesToBeRendered){this.modulesToBeRendered=this.modulesLeft;}
this.triggerLoadModules(priority.modules);}else{this.nextPriority();}},triggerLoadModules:function(moduleList){var _this=this,len=moduleList.length;for(var i=0;i<len;i+=1){var module=moduleList[i].module;if(module.data('tfrendered')!==true){w.Triforce.getMediator().trigger('triforce:modulerender',module);}else{w.Triforce.getMediator().trigger('triforce:priority:removemodule',module);}}
this.timeout=w.setTimeout(function(){_this.nextPriority();},this.waitTime);},removeModule:function($module){var len=this.processingModules.length,uid=$module.data('uid');for(var i=0;i<len;i+=1){if(this.processingModules[i]&&this.processingModules[i].uid===uid){this.processingModules[i]=null;this.modulesLeft-=1;}}
if(this.modulesLeft===0){this.processingModules=[];this.nextPriority();}},nextPriority:function(){w.clearTimeout(this.timeout);if(this.priorities.length){this.renderModulesByPriority(this.priorities.shift());}else{this.waitTime=(this.numberAttempts+1)*this.ATTEMPT_TIMEOUT;if(this.processingModules.length){this.tryLoadAgain();if(!this.queuesFired){setTimeout(function(){w.Triforce.getMediator().trigger('triforce:queuesready');},1500);this.queuesFired=true;}}else{if(!this.renderComplete){this.clearState();w.Triforce.getMediator().trigger('triforce:queuesready');w.Triforce.getMediator().trigger('triforce:rendercomplete');if(!w.Triforce.priorityManager.completeFired){w.Triforce.getMediator().trigger('triforce:complete');}
this.renderComplete=true;}}}},checkIsPageLoaded:function(){var self=this;w.Triforce.getMediator().on('triforce:module:rendered',function(){self.modulesToBeRendered--;if(self.modulesToBeRendered<1&&!w.Triforce.priorityManager.completeFired){w.Triforce.getMediator().trigger('triforce:complete');self.modulesToBeRendered=0;}});},clearProcessingModules:function(){var len=this.processingModules.length,cleared=[];for(var i=0;i<len;i+=1){if(this.processingModules[i]){cleared.push(this.processingModules[i]);}}
this.processingModules=cleared;},tryLoadAgain:function(){if(this.numberAttempts<3){this.clearProcessingModules();this.triggerLoadModules(this.processingModules);this.numberAttempts+=1;}else{var modulesNotRendered=[];for(var i in this.processingModules){if(this.processingModules[i]&&this.processingModules[i].zone){modulesNotRendered.push(this.processingModules[i].zone);}}
window.Triforce.getMediator().trigger('triforce:message',{'type':'message','message':'Zone render failure for: ['+modulesNotRendered.toString()+'] '+this.numberAttempts+' times. Increasing timeout.'});this.waitTime+=500;this.numberAttempts=0;this.clearProcessingModules();this.triggerLoadModules(this.processingModules);}},modulePriorityFailed:function(){var len=this.processingModules.length,zoneList='';for(var i=0;i<len;i+=1){if(this.processingModules[i]){zoneList+=this.processingModules[i].zone+', ';this.processingModules[i].module.remove();}}
this.clearState();w.Triforce.getMediator().message({'type':'warning','message':'Some modules failed to render - the zones were '+zoneList});w.Triforce.getMediator().trigger('triforce:rendercomplete');},clearState:function(){w.clearTimeout(this.timeout);this.waitTime=this.PRIORITY_TIMEOUT;this.priorities=[];this.modulesLeft=0;this.processingModules=[];this.numberAttempts=0;this.queuesFired=false;this.renderComplete=false;}});})(jQuery,window);(function($,w){$Crabapple.TriforceQueue=function(){};$Crabapple.extend($Crabapple.Class,$Crabapple.TriforceQueue,{_queues:{},_mediator:null,_ready:false,addQueue:function(queueName,loadFunction,processFunction,type){if(this._queues[queueName]){this._queues[queueName].loadFunction=loadFunction;this._queues[queueName].processFunction=processFunction;this._queues[queueName].type=type;}
else{this._queues[queueName]={'loadFunction':loadFunction,'processFunction':processFunction,'ready':false,'type':type,items:[]};}},addQueueItem:function(queueName,domElement){if(!this._queues[queueName]){this._queues[queueName]={'ready':false,'items':[]};this._queues[queueName].items.push(domElement);return true;}
if(this._queues[queueName].ready===true&&this._queues[queueName].type==='default'){this._queues[queueName].processFunction(domElement);}else{this._queues[queueName].items.push(domElement);}
return true;},processDeferredQueues:function(){if(this._ready)return;this._ready=true;for(var queueName in this._queues){this._queues[queueName].loadFunction();}},onLoadComplete:function(queueName){this._queues[queueName].ready=true;if(this._queues[queueName].type=='default'){for(var item in this._queues[queueName].items){this._queues[queueName].processFunction(this._queues[queueName].items[item]);this._queues[queueName].items.splice(item,1);}}else{this.checkDeferredQueues();}},checkDeferredQueues:function(){var item;for(var queueName in this._queues){if(this._queues[queueName].type=='scroll'){for(item in this._queues[queueName].items){if(this.isVisible(this._queues[queueName].items[item])){this._queues[queueName].processFunction(this._queues[queueName].items[item]);this._queues[queueName].items.splice(item,1);}}}else{for(item in this._queues[queueName].items){this._queues[queueName].processFunction(this._queues[queueName].items[item]);this._queues[queueName].items.splice(item,1);}}}},clearQueues:function(){for(var queueName in this._queues){this._queues[queueName].items=[];}
this._ready=false;},init:function(){this._mediator=w.Triforce.getMediator();this.addMediatorEvents();},addMediatorEvents:function(){var _this=this;this._mediator.on('triforce:addqueue',function(args){if(args.length&&args.length>1){var queue=args[1];if(queue.queueName&&queue.loadFunction&&queue.processFunction){if(!queue.type)queue.type='default';_this.addQueue(queue.queueName,queue.loadFunction,queue.processFunction,queue.type);}else{_this._mediator.trigger('triforce:message',{'type':'error','message':'Error creating queue.  Missing a field (queueName, loadFunction or processFunction'});}}});this._mediator.on('triforce:addqueueitem',function(args){if(args.length&&args.length>1){var queue=args[1];if(queue.queueName&&queue.item){_this.addQueueItem(queue.queueName,queue.item);}else{_this._mediator.trigger('triforce:message',{'type':'error','message':'Error adding item to queue.  Missing a field (item or queueName'});}}});this._mediator.on('triforce:clearqueues',function(){_this.clearQueues();});this._mediator.on('triforce:queuesready',function(){_this.processDeferredQueues();});this._mediator.on('triforce:queueready',function(args){if(args.length&&args.length>1){_this.onLoadComplete(args[1])}});this._mediator.on('triforce:pageintouch',function(){_this.checkDeferredQueues();});},isVisible:function(el){if(!el[0].parentNode){return false;}
var elRect=el[0].getBoundingClientRect(),wWidth=w.innerWidth,wHeight=w.innerHeight,hasRect=elRect.bottom||elRect.height||elRect.left||elRect.right||elRect.top||elRect.width;return hasRect&&(elRect.top>=0?elRect.top<=wHeight:elRect.bottom>=0)&&(elRect.left>=0?elRect.left<=wWidth:elRect.right>=0);}});})(jQuery,window);(function($,w){$Crabapple.TriforceScriptManager=function(){};$Crabapple.extend($Crabapple.Class,$Crabapple.TriforceScriptManager,{feeds:{},scripts:{},queuedScripts:{},feedRequests:{},preloadedScripts:null,init:function(){var preloadedScripts=$('[data-tfmodulescript]'),i,len;this.preloadedScripts={};for(i=0,len=preloadedScripts.length;i<len;i++){this.preloadedScripts[preloadedScripts[i].src]=preloadedScripts[i];}},queueFeedLoad:function(feedURL,module){var self=this;if(this.getFeedData(feedURL)!=null){w.Triforce.getMediator().trigger('triforce:module:feedloaded',module);return;}
else if(feedURL==''||feedURL==null){w.Triforce.getMediator().trigger('triforce:module:feedloaded',module);return;}
this.feedRequests[feedURL]=$.getJSON(feedURL,function(response){self.feedRequests[feedURL]=null;w.Triforce.getMediator().trigger('triforce:feedloaded',feedURL,response,module);});},registerFeedLoaded:function(feedURL,feedData,module){this.feeds[feedURL]=feedData;if(feedData&&feedData.result&&feedData.result.output===false){module.data('tfshouldnotrender','true');}
w.Triforce.getMediator().trigger('triforce:module:feedloaded',module);},getFeedData:function(feedURL){if(this.feeds[feedURL])return this.feeds[feedURL];return null;},queueJavascript:function(scriptList,module,hashList){if(typeof(scriptList)=="string"){scriptList=scriptList.split(",");if(typeof(hashList)!="undefined"){hashList=hashList.split(",");}}
var scripts='',hash='';var self=this;for(var index=0;index<scriptList.length;index++){if(!this.scriptRegistered(scriptList[index])&&!this.scriptQueued(scriptList[index])){scripts+=(scripts=='')?(''):(',');scripts+=scriptList[index];if(hashList&&hashList[index]){hash+=(hash===''?'':',')+hashList[index];}
this.queuedScripts[scriptList[index]]=1;}}
if(scripts===''){this.checkAllScriptLoaded(scriptList,module);return;}
var scriptURL=window.Triforce.config.scriptConcatenator+scripts+'?hash='+hash,script=this.preloadedScripts[scriptURL],isScriptPreloaded=!!script;if(!script){script=document.createElement('script');script.async=true;script.src=scriptURL;}else{if(script.getAttribute('data-loaded')){this.registerJavascript(scripts);this.checkAllScriptLoaded(scriptList,module);return;}}
script.onload=function(){self.registerJavascript(scripts);self.checkAllScriptLoaded(scriptList,module);};script.onerror=function(){w.Triforce.getMediator().trigger('triforce:message',{'type':'error','message':'Script failed to load at '+scriptURL});};if(!isScriptPreloaded){document.head.appendChild(script);}},registerJavascript:function(script){this.unqueueScripts(script);var scriptArray=script.split(',');for(var i=0;i<scriptArray.length;i++){this.scripts[scriptArray[i]]=1;}},checkAllScriptLoaded:function(scriptList,module){var i=0,len=scriptList.length,_this=this;for(i;i<len;i+=1){if(!this.scriptRegistered(scriptList[i])){setTimeout(function(){_this.checkAllScriptLoaded(scriptList,module);},100);return;}}
w.Triforce.getMediator().trigger('triforce:module:scriptsloaded',module);},scriptRegistered:function(script){if(this.scripts[script])return true;return false;},scriptQueued:function(script){if(this.queuedScripts[script])return true;return false;},unqueueScripts:function(scripts){var scriptList=scripts.split(",");for(var i=0;i<scriptList.length;i++){if(this.queuedScripts[scriptList[i]]==1)this.queuedScripts[scriptList[i]]=0;}},unqueueAllScripts:function(){this.queuedScripts={};},abortAllFeedRequests:function(){for(var i in this.feedRequests){if(this.feedRequests[i]){this.feedRequests[i].abort();}}
this.feedRequests={};},loadStandaloneScript:function(script,callback){var self=this;if(this.scriptRegistered(script)){callback();}else{var scriptURL=window.Triforce.config.scriptConcatenator+script,scriptElement=document.createElement('script');scriptElement.async='async';scriptElement.type='text/javascript';scriptElement.src=scriptURL;scriptElement.onload=function(_,isAbort){if(!scriptElement.readyState||/loaded|complete/.test(scriptElement.readyState)){if(isAbort){return;}else{self.registerJavascript(script);callback();}}};script.onerror=function(){w.Triforce.getMediator().trigger('triforce:message',{'type':'error','message':'Script failed to load at '+scriptURL});};$('head')[0].appendChild(scriptElement);}}});})(jQuery,window);(function($,w){$Crabapple.TriforceStorageManager=function(){};$Crabapple.extend($Crabapple.Class,$Crabapple.TriforceStorageManager,{storageEnabled:false,storage:null,indexedDB:null,indexedDBEnabled:false,dbName:'TriforceDB',objectStores:[{'name':'feeds','keyPath':'hash'}],init:function(){if(this.storageEnabled)return;try{if(w.localStorage&&this.isLocalStorageEnabled()){this.storage=w.localStorage;this.storageEnabled=true;}else{this.addCookiesFallback();}}catch(e){w.Triforce.getMediator().trigger('triforce:message',{type:'error',message:'Error occurred trying access to localStorage',exception:e});this.addCookiesFallback();}},isLocalStorageEnabled:function(){var testKey='test',s=window.localStorage;try{s.setItem(testKey,'1');s.removeItem(testKey);return true;}catch(e){return false;}},addCookiesFallback:function(){this.storage={setItem:function(key,data){$.cookie(key,data);},getItem:function(key){return $.cookie(key);}};this.storageEnabled=true;},storeValue:function(key,value){if(!this.storageEnabled)return false;key=this.sanitizeKey(key);try{this.storage.setItem(key,value);}catch(e){w.Triforce.getMediator().trigger('triforce:message',{'type':'error','message':'Storing '+key+' in local storage failed','exception':e});}},storeObject:function(key,obj){if(!this.storageEnabled)return false;key=this.sanitizeKey(key);try{this.storage.setItem(key,JSON.stringify(obj));}catch(e){w.Triforce.getMediator().trigger('triforce:message',{'type':'error','message':'Storing '+key+' in local storage failed','exception':e});}},getValue:function(key){if(!this.storageEnabled)return false;key=this.sanitizeKey(key);return this.storage.getItem(key);},getObject:function(key){if(!this.storageEnabled)return false;key=this.sanitizeKey(key);try{return JSON.parse(this.storage.getItem(key));}catch(e){w.Triforce.getMediator().trigger('triforce:message',{'type':'error','message':'Retrieving '+key+' from local storage failed','exception':e});return false;}},sanitizeKey:function(key){return'triforce_'+key+'|'+window.location.hostname;},setSharedObject:function(key,value,expiry){var now=new Date().getTime(),domain=this.getDomain(),expiryDays,storageObject;now=parseInt(now / 1000);key=domain+'|'+key;if(!expiry){expiry=0;}
if(expiry!=0){expiryDays=expiry / 60 / 24;expiry=now+(60*expiry);}
storageObject={'value':value,'expiry':expiry};if(expiry!=0){$.cookie(key,JSON.stringify(storageObject),{path:'/',domain:domain,expires:expiryDays});}else{$.cookie(key,JSON.stringify(storageObject),{path:'/',domain:domain,expires:1000});}},getSharedObject:function(key){var domain=this.getDomain(),value;key=domain+'|'+key;value=$.cookie(key);if(!value){return null;}else{value=JSON.parse(value);return value.value;}},getDomain:function(){var hostname=window.location.hostname,hostnameParts=hostname.split('.');if(hostnameParts.length>=2){var tld=hostnameParts.pop(),domain=hostnameParts.pop();return domain+'.'+tld;}
else{if(hostname.indexOf('local')>=0){return'local';}}
return'unknown';},initIndexedDB:function(){if('indexedDB'in w){this.indexedDB={};this.indexedDBEnabled=true;this.openIndexedDB();}},openIndexedDB:function(){if(!this.indexedDBEnabled){return false;}
var _this=this,version=1,request;_this.indexedDB[this.dbName]=null;request=w.indexedDB.open(this.dbName,version);request.onupgradeneeded=function(e){_this.handleUpgradeNeeded(e);};request.onsuccess=function(e){_this.handleOpenDBSuccess(e);};request.onerror=this.handleIndexedDBError;},addObject:function(object,objectStoreName){var db=this.indexedDB[this.dbName],transaction=db.transaction([objectStoreName],'readwrite'),store=transaction.objectStore(objectStoreName),request=store.put(object),_this=this;request.onsuccess=function(){_this.handleAddObjectSuccess();};request.onerror=this.handleIndexedDBError;},handleAddObjectSuccess:function(){},handleOpenDBSuccess:function(e){this.indexedDB[this.dbName]=e.target.result;},handleUpgradeNeeded:function(e){var db=e.target.result;e.target.transaction.onerror=this.handleIndexedDBError;for(var i=0;i<this.objectStores.length;i++){if(db.objectStoreNames.contains(this.objectStores[i].name)){db.deleteObjectStore(this.objectStores[i].name);}
db.createObjectStore(this.objectStores[i].name,{keyPath:this.objectStores[i].keyPath});}},handleIndexedDBError:function(e){var errorMessage='Error occured working with endexedDB';w.Triforce.getMediator().trigger('triforce:message',{'type':'error','message':errorMessage,'exception':e});}});})(jQuery,window);(function($){$Crabapple.TriforceModule=function(){};$Crabapple.extend($Crabapple.Class,$Crabapple.TriforceModule,{moduleElement:null,view:null,views:null,viewsListOrdered:null,helpers:null,feedResponse:null,name:'default',enhance:false,forceHide:false,defaultEvents:null,events:null,eventsSplitter:/^(\S+)\s*(.*)$/,init:function(element,feedData){var originalData=element.data();this.moduleElement=element;this.feedResponse=feedData;this.events={};if(this.moduleElement.data('tfdriver')){this.name=this.moduleElement.data('tfdriver');}
try{this.initializeHelpers();this.initViewComponents();this.initView();}catch(e){console.error('Triforce Module Render Failed: '+this.moduleElement.attr('class'),e.message,e.stack);window.Triforce.getMediator().trigger('triforce:moduleRenderFailed',{'instance':this,'exception':e});}
if(this.moduleElement[0]!==element[0]&&this.moduleElement.data()!==originalData){this.moduleElement.data($.extend(originalData,this.moduleElement.data()));element.data(this.moduleElement.data());this.moduleElement.attr('data-zone',element.attr('data-zone'));this.moduleElement.attr('id',element.attr('id'));}
this.moduleElement.data('tfrendered',true);this.moduleElement.data('tfloading',false);this.moduleElement.removeAttr('data-tfstatic data-tfpriority data-tfloading');window.Triforce.getMediator().trigger('triforce:moduleRenderComplete',this);},initView:function(){this.runViewInheritance();if(this.moduleElement.attr('data-tfstatic')){this.enhanceModule();}else{this.drawModule();}},initViewComponents:function(){this.views={};for(var viewName in this.viewNames){this.views[viewName]=this.inheritView(this.viewNames[viewName]);this.views[viewName].init();}
if(this.viewsListOrdered&&this.viewsListOrdered.length){var viewsList=this.viewsListOrdered,viewInfo,i,len;for(i=0,len=viewsList.length;i<len;i++){viewInfo=viewsList[i];this.views[viewInfo.name]=this.inheritView(viewInfo.viewName);this.views[viewInfo.name].init();}}},processOrderedViews:function(methodName){var viewsList=this.viewsListOrdered,views=this.views,data=this.data,viewInfo,coreElement,i,len;if(viewsList){for(i=0,len=viewsList.length;i<len;i++){viewInfo=viewsList[i];coreElement=viewInfo.parentView?views[viewInfo.parentView].coreElement:this.view.coreElement;views[viewInfo.name][methodName](coreElement,data);}}},runViewInheritance:function(){var moduleController=Object.getPrototypeOf(this);if(!moduleController.viewName){return;}
this.view=this.inheritView(moduleController.viewName);this.view.init(this.moduleElement);},inheritView:function(fullViewName,recursiveDeep){var view,parentView,viewName,extension;recursiveDeep=recursiveDeep||0;viewName=fullViewName.split('.');view=window[viewName[0]][viewName[1]];if(typeof view==='function'){return recursiveDeep?view:new view();}
if(view==null){window.Triforce.getMediator().trigger('triforce:message',{'type':'error','message':'Failed to load parent class for view: '+fullViewName});}
parentView=this.inheritView(view.parentView,recursiveDeep+1);if(view.extension){extension=view.extension;}else if(view.extention){extension=view.extention;}
view=function(){};$Crabapple.extend(parentView,view,extension);window[viewName[0]][viewName[1]]=view;return recursiveDeep?view:new view();},prepareModuleElement:function(){this.moduleElement.removeClass('triforce-module');this.moduleElement.removeAttr('data-tfpriority');this.addClasses();},drawModule:function(){this.prepareModuleElement();this.initializeView();if(this.forceHide==true){this.moduleElement.hide();return;}
this.addEvents();this.addAds();this.addLinkHandler();},enhanceModule:function(){this.postRender();this.addEvents();this.addLinkHandler();},initializeView:function(){var feed=this.feedResponse.result;if(!this.view.render(feed)){this.forceHide=true;return;}
this.postRender();},postRender:function(){},initializeHelpers:function(){this.helpers={};if(!this.helperNames)return;for(var i in this.helperNames){this.helpers[i]=this.createHelper(this.helperNames[i]);}},createHelper:function(helper){var helperName=helper.split('.'),tmpHelper=false;try{tmpHelper=new window[helperName[0]][helperName[1]]();}catch(e){window.Triforce.getMediator().trigger('triforce:message',{'type':'error','message':'Error creating helper','exception':e});}
return tmpHelper;},addEvents:function(){this.processEventsObject();},processEventsObject:function(){var method,matches,key;if(this.events||this.defaultEvents){this.events=$.extend({},this.defaultEvents,this.events);for(key in this.events){method=this[this.events[key]];if(typeof method==='function'){matches=key.match(this.eventsSplitter);if(matches){this.delegateEvent(matches[1],matches[2],method);}else{window.Triforce.getMediator().trigger('triforce:message',{type:'warning',message:'Event is not defined right way, as it doesn\'t matche the eventsSplitter RegExp '+key});}}else{window.Triforce.getMediator().trigger('triforce:message',{type:'warning',message:'Event handler isn\'t a function, or either is not defined for event '+key+': '+this.events[key]});}}}},delegateEvent:function(eventName,selector,handler){if(this.moduleElement){var self=this;this.moduleElement.on(eventName,selector,function eventHandler(){handler.apply(self,arguments);});}},addClasses:function(){var promo=null;if(this.feedResponse&&this.feedResponse.result){if(this.feedResponse.result.promo){promo=this.feedResponse.result.promo;}
if(this.feedResponse.result.promotion){promo=this.feedResponse.result.promotion;}
if(this.feedResponse.result.data&&this.feedResponse.result.data.promoType){promo={};promo.promoType=this.feedResponse.result.data.promoType;}}
var regexp=this.name.match(/(ent_m[0-9]{3})_[a-zA-Z]*_.*/);var moduleNumber=(regexp&&regexp.length>0)?regexp[1]:'';this.moduleElement.addClass('module').addClass(this.name).addClass(moduleNumber);if(promo&&promo.promoType){this.moduleElement.addClass(promo.promoType.toLowerCase());}},addAds:function(){if(this.moduleElement.find('[data-adsize]').length){this.moduleElement.find('[data-adsize]').each(function(){if(typeof($Crabapple.TriforceModule_reporting_v1)=='function'&&typeof('mtvn')!='undefined'){$Crabapple.TriforceModule_reporting_v1.prototype.placeAd($(this));}
if(typeof($Crabapple.TriforceModule_ENT_Reporting)=='function'&&typeof('mtvn')!='undefined'){$Crabapple.TriforceModule_ENT_Reporting.prototype.placeAd($(this));}});}},addLinkHandler:function(){var self=this;$(this.moduleElement).find('a').each(function(){if(!self.isTriforceLink(this)){return;}
$(this).on('click',self.linkHandler);});},isTriforceLink:function(link){var $link=$(link);if(!window.triforceManifestFeed||window.triforceManifestFeed===false){return false;}
if($link.hasClass('notriforce'))return false;if($link.attr('target')==='_blank')return false;if(window.TriforceExtraConfig&&window.TriforceExtraConfig.validTriforceLinkMask&&window.TriforceExtraConfig.validTriforceLinkMask instanceof RegExp){if(link.href.match(window.TriforceExtraConfig.validTriforceLinkMask)===null)return false;}
return true;},linkHandler:function(event){if(event.ctrlKey||event.metaKey)return;event.preventDefault();var href=$(this).attr('href');if(href===undefined)return;if(href.indexOf('#')===0){var anchor=$('a[name="'+href.substring(1)+'"]'),anchorPos=anchor.offset(),anchorName=anchor.attr('name');if(anchorPos&&anchorPos.top){anchor.attr('name','');document.location.hash=href;anchor.attr('name',anchorName);$('html,body').animate({scrollTop:anchorPos.top-50},300);}else{document.location.hash=href;}
return;}
if((href.indexOf('http')===0&&href.indexOf(window.location.host)===-1)||href.indexOf('mailto:')===0){document.location.href=href;return;}else{window.Triforce.getMediator().trigger('triforce:loadpage',href);}},renderSubModule:function(wrapper,info){window.Triforce.getMediator().trigger('triforce:module:process',wrapper,info);},isMobile:function(){return Triforce.getMediator().isMobile();},on:function(eventName,callback,checkFired){var mediator=Triforce.getMediator(),controller=this;mediator.on(eventName,function moduleEventListener(){if(!controller.moduleElement||controller.moduleElement[0].parentNode===null){mediator.off(eventName,moduleEventListener);return;}
callback(arguments);},checkFired);},off:function(eventName,callback){var mediator=Triforce.getMediator();mediator.off.apply(mediator,arguments);},trigger:function(eventName){var mediator=Triforce.getMediator();mediator.trigger.apply(mediator,arguments);},reportClickThrough:function(reportingObject){var destination='no destination',moduleAction='';if(reportingObject){if(reportingObject.destination){destination=reportingObject.destination;}
if(reportingObject.moduleAction){moduleAction=reportingObject.moduleAction;}}
try{$Crabapple.repo.trackModuleClickThrough(this.moduleName,destination,moduleAction);}catch(e){window.Triforce.getMediator().trigger('triforce:message',{'type':'error','message':'Module reporting for '+this.moduleName+' returns error','exception':e});}}});})(jQuery);(function($){$Crabapple.TriforceHelper=function(){};$Crabapple.extend($Crabapple.Class,$Crabapple.TriforceHelper,{moduleElement:null,init:function(moduleElement){this.moduleElement=$(moduleElement);}});})(jQuery);$Crabapple.TriforceMustacheView={'parentView':'$Crabapple.TriforceView','extention':{moduleElement:null,templates:null,templateName:null,init:function(moduleElement){this.moduleElement=moduleElement;this.determineTemplatesPool();},determineTemplatesPool:function(){var currentTemplatesPathCursor=window,templatesPoolPath,i,len;if(typeof this.templates==='string'){templatesPoolPath=this.templates.split('.');for(i=0,len=templatesPoolPath.length;i<len;i++){if(currentTemplatesPathCursor){currentTemplatesPathCursor=currentTemplatesPathCursor[templatesPoolPath[i]];}else{break;}}
if(!currentTemplatesPathCursor){window.Triforce.getMediator().trigger('triforce:message',{type:'error',message:'The path specified to the Mustache templates pool leads nowhere: '+this.templates});return;}
this.templates=currentTemplatesPathCursor;}else if(!this.templates){this.templates=$Crabapple.TriforceTemplates=$Crabapple.TriforceTemplates||{};}},renderTemplate:function(templateName,$el,data,mode){var template=this.templates&&this.templates[templateName],output,$tempEl,i,len;if(template){if($el&&$el instanceof jQuery){if(data instanceof Array){output='';for(i=0,len=data.length;i<len;i++){output+=template.render(data[i],this.templates);}}else{if(window.labels){if(window.labels.language){if(!data)data=[];data['i18nlabels']=window.labels;}}
output=template.render(data,this.templates);}
$tempEl=$(document.createElement('div'));$tempEl[0].innerHTML=output;this.checkForNotQueuedImages($tempEl);mode=mode||'to';if(mode==='to'){$el.append($tempEl[0].childNodes);}else if(mode==='after'){$el.after($tempEl[0].childNodes);}else if(mode==='before'){$el.before($tempEl[0].childNodes);}else if(mode==='insteadOf'){$el.replaceWith($tempEl[0].childNodes);}
return true;}else{window.Triforce.getMediator().trigger('triforce:message',{type:'error',message:'Unable to render template: '+templateName+', because the element it should render to isn\'t defined or isn\'t a jQuery object'});return false;}}else{window.Triforce.getMediator().trigger('triforce:message',{type:'error',message:'Unable to render template: '+templateName+', because it\'s not registered in the pool'});return false;}},renderTemplateBefore:function(templateName,$el,data){return this.renderTemplate(templateName,$el,data,'before');},renderTemplateAfter:function(templateName,$el,data){return this.renderTemplate(templateName,$el,data,'after');},renderTemplateTo:function(templateName,$el,data){return this.renderTemplate(templateName,$el,data,'to');},renderTemplateInsteadOf:function(templateName,$el,data){return this.renderTemplate(templateName,$el,data,'insteadOf');},render:function(data){if(!this.templateName||!this.moduleElement||!this.templates){window.Triforce.getMediator().trigger('triforce:message',{type:'error',message:'Unable to render view there are some missing properties:'+
(!this.templateName&&'\n templateName isn\'t defined;')+
(!this.moduleElement&&'\n moduleElement isn\'t set;')+
(!this.templates&&'\n templates pool isn\'t defined/ready')});return false;}
this.moduleElement.empty();return this.renderTemplateTo(this.templateName,this.moduleElement,data);}}};(function($){$Crabapple.TriforceView=function(){};$Crabapple.extend($Crabapple.Class,$Crabapple.TriforceView,{missingImage:(function(){if(config&&typeof config.getMediaMissingImage==='function'){return config.getMediaMissingImage();}else{return'http://comedycentral.mtvnimages.com/images/cc_missing_v6.jpg';}})(),defaultQuality:0.85,moduleElement:{},timezonesList:{'EST':-5},init:function(moduleElement){if($.isEmptyObject(this.moduleElement)){this.moduleElement=moduleElement;}},appendDom:function(parent,element,attributes){var $element=this.createDom(element,attributes);try{parent.append($element);}catch(e){if(console&&console.log){console.log(e);}}
return $element;},replaceModuleElement:function($oldChild,$newChild){$oldChild[0].parentNode&&$oldChild[0].parentNode.replaceChild($newChild[0],$oldChild[0]);return $newChild;},getModuleWrapper:function($moduleElement,additionalClasses){var moduleWrapper=document.createElement($moduleElement[0].nodeName);moduleWrapper.className=$moduleElement[0].className+(additionalClasses?' '+additionalClasses:'');return $(moduleWrapper);},createDom:function(elementType,attributes){var newElement=document.createElement(elementType);if(attributes){for(var key in attributes){newElement.setAttribute(key,attributes[key]);}}
return $(newElement);},prependDom:function(parent,element,attributes){var $element=this.createDom(element,attributes);try{parent.prepend($element);}catch(e){if(console&&console.log){console.log(e);}}
return $element;},appendImage:function(parent,image,autoload){var imageHolder,imageInformation;image=image||{};if(!autoload){imageInformation={original:{width:image.width,height:image.height,aspectRatio:image.height?Math.round(image.width / image.height*10)/ 10:null},src:image.url||this.missingImage,quality:this.defaultQuality};imageHolder=this.appendDom(parent,'div',{'data-info':JSON.stringify(imageInformation),'class':'image_holder deferred'});this.queueImage(imageHolder,imageInformation);return imageHolder;}
return this.appendDom(parent,'img',{src:image.url+'?quality='+this.defaultQuality});},checkForNotQueuedImages:function($el){var notQueuedImages=$el.find('.image_holder[data-toQueue="true"]'),imageHolder,i,len;for(i=0,len=notQueuedImages.length;i<len;i++){imageHolder=notQueuedImages.eq(i);this.queueImage(imageHolder,JSON.parse(imageHolder.attr('data-info')));imageHolder.removeAttr('data-toQueue');}},queueImage:function(imageHolder,imageInformation){window.Triforce.getMediator().trigger('triforce:queueimage',{'holder':imageHolder[0],'info':imageInformation});},getDuration:function(duration){var d=parseInt(duration),min=Math.floor(d / 60),sec=d-(60*min);return min+":"+((sec<10?'0':'')+sec);},dateToString:function(timeStamp,format,timezone){var time=parseInt(timeStamp,10);if(isNaN(time)){return timeStamp;}
if((new Date(time)).getFullYear()==1970){time=time*1000;}
if(timezone&&this.timezonesList[timezone]){time=this.getTimeInTimezone(time,timezone);}
format=format||"m/d/Y";$Crabapple.utils.DateTime.currentDate=new Date(time);var result=$Crabapple.utils.DateTime.format(format);$Crabapple.utils.DateTime.currentDate=false;return result;},formatDateString:function(dateString,format){if(dateString&&format){dateString=dateString.substr(0,dateString.length-5);$Crabapple.utils.DateTime.currentDate=new Date(dateString);var result=$Crabapple.utils.DateTime.format(format);$Crabapple.utils.DateTime.currentDate=false;return result;}
return dateString;},getTimeInTimezone:function(time,timezone){var offsetDiff=this.timezonesList[timezone]-this.getFixedTimezoneOffset();return new Date(time+offsetDiff*3600000);},getFixedTimezoneOffset:function(){var fullYear=new Date().getFullYear();return Math.max(new Date(fullYear,0,1).getTimezoneOffset(),new Date(fullYear,6,1).getTimezoneOffset())/-60;},forceHideByConditions:function(){var $module=$(this.moduleElement),rem_list='';if($('body').data('removedModules')){rem_list=$('body').data('removedModules')+'::';}
rem_list+=$module[0].className;$('body').data('removedModules',rem_list);},addLinkHandlers:function(wrap){},addCssOverride:function(moduleName,cssOverrideObj){var styleTag=document.getElementById(moduleName+'_colorsPallete')||document.createElement('style'),css='';styleTag.id=moduleName+'_colorsPallete';if(cssOverrideObj&&!jQuery.isEmptyObject(cssOverrideObj)){for(var cssClass in cssOverrideObj){css+=cssClass+'{';for(var cssRule in cssOverrideObj[cssClass]){css+=cssRule+':'+cssOverrideObj[cssClass][cssRule]+';'}
css+='}'}
styleTag.innerHTML=css;document.head.appendChild(styleTag);}}});})(jQuery);(function($,w){$Crabapple.Triforce=function(){};$Crabapple.extend($Crabapple.Class,$Crabapple.Triforce,{pageLoaderName:'$Crabapple.TriforcePageLoader',pageLoader:null,layoutManagerName:'$Crabapple.TriforceLayoutManager',layoutManager:null,scriptManagerName:'$Crabapple.TriforceScriptManager',scriptManager:null,feedManager:null,moduleRendererName:'$Crabapple.TriforceModuleRenderer',moduleRenderer:null,mediatorName:'$Crabapple.TriforceMediator',mediator:null,priorityManagerName:'$Crabapple.TriforcePriorityManager',priorityManager:null,storageManagerName:'$Crabapple.TriforceStorageManager',storageManager:null,imageBrokerName:'$Crabapple.TriforceImageBroker',imageBroker:null,queueName:'$Crabapple.TriforceQueue',queue:null,firstLoad:true,config:null,defaultLanguage:'eng',init:function(){this.initializeConfig();this.initializeMediator();this.initializeComponents();this.getMediator().trigger('triforce:pageloaded');},initializeConfig:function(){if(window.TriforceConfiguration){this.config=window.TriforceConfiguration;}else{this.config={'debug':false,'priorityTimeout':300,'stragglersTimeout':3000,'manifestFeed':'/feeds/triforce/manifest/v2','tierWrapper':false};if(typeof(config.getTriforceScriptLoader)=='function')this.config.scriptConcatenator=config.getTriforceScriptLoader();if(typeof(config.getTriforceDebugEnabled)=='function')this.config.debug=config.getTriforceDebugEnabled();if(typeof(config.getTriforceGlobalZones)=='function')this.config.globalZones=config.getTriforceGlobalZones().split(',');if(typeof(config.getTriforceManifestFeed)=='function')this.config.manifestFeed=config.getTriforceManifestFeed();if(typeof(config.getTriforcePriorityTimeout)=='function')this.config.priorityTimeout=parseInt(config.getTriforcePriorityTimeout());if(typeof(config.getTriforceStragglersTimeout)=='function')this.config.stragglersTimeout=parseInt(config.getTriforceStragglersTimeout());if(typeof(config.getTriforceHelpersCssPackage)=='function')this.config.CSSHelperPackage=config.getTriforceHelpersCssPackage();if(typeof(config.getTriforceHelpersCssDriverName)=='function')this.config.CSSHelperDriverName=config.getTriforceHelpersCssDriverName();if(typeof(config.getTriforceTierWrapper)=='function')this.config.tierWrapper=config.getTriforceTierWrapper();}
this.initializeLanguage();},initializeLanguage:function(){if(this.config.language)return;if(typeof($.cookie)=='function'){var lp=$.cookie('languagePreferences');if(lp){this.config.languagePreference=lp;if(lp.indexOf(',')>=0){lp=lp.split(',');this.config.language=lp[0];}else{this.config.language=lp;}}}
if(!this.config.language){this.config.language=this.defaultLanguage;}},initializeComponents:function(){this.initializePageLoader();this.initializeModuleRenderer();this.initializeScriptManager();this.initializeLayoutManager();this.initializePriorityManager();this.initializeStorageManager();this.initializeImageBroker();this.initializeQueue();},initializePageLoader:function(){var pls=this.pageLoaderName.split('.');var namespace=pls[0];var moduleName=pls[1];this.pageLoader=new w[namespace][moduleName]();this.pageLoader.init();},initializeLayoutManager:function(){var lms=this.layoutManagerName.split('.');var namespace=lms[0];var moduleName=lms[1];this.layoutManager=new w[namespace][moduleName]();this.layoutManager.init();},initializeScriptManager:function(){var sms=this.scriptManagerName.split('.');var namespace=sms[0];var moduleName=sms[1];this.scriptManager=new w[namespace][moduleName]();this.scriptManager.init();this.feedManager=this.scriptManager;},initializeModuleRenderer:function(){var mrs=this.moduleRendererName.split('.');var namespace=mrs[0];var moduleName=mrs[1];this.moduleRenderer=new w[namespace][moduleName]();this.moduleRenderer.init();},initializeMediator:function(){var mms=this.mediatorName.split('.');var namespace=mms[0];var moduleName=mms[1];this.mediator=new w[namespace][moduleName]();this.mediator.init();},initializePriorityManager:function(){var pmn=this.priorityManagerName.split('.'),namespace=pmn[0],moduleName=pmn[1];this.priorityManager=new w[namespace][moduleName]();this.priorityManager.init();},initializeStorageManager:function(){var smn=this.storageManagerName.split('.'),namespace=smn[0],moduleName=smn[1];this.storageManager=new w[namespace][moduleName]();this.storageManager.init();},initializeImageBroker:function(){var smn=this.imageBrokerName.split('.'),namespace=smn[0],moduleName=smn[1];this.imageBroker=new w[namespace][moduleName]();this.imageBroker.init();},initializeQueue:function(){var smn=this.queueName.split('.'),namespace=smn[0],moduleName=smn[1];this.queue=new w[namespace][moduleName]();this.queue.init();},getMediator:function(){return this.mediator;},getPageLoader:function(){return this.pageLoader;},getModuleRenderer:function(){return this.moduleRenderer;},getPriorityManager:function(){return this.priorityManager;},getStorageManager:function(){return this.storageManager;},loadPage:function(url,pageStatus){this.pageLoader.loadPage(url,pageStatus);},pageReady:function(){this.priorityManager.completeFired=false;if(this.firstLoad){this.firstLoad=false;}else{this.scrollToTop();}
if(w.Triforce.config&&w.Triforce.config.monitorEnabled){w.Triforce.getMediator().trigger('triforce:monitorPageChange');}
var priorities=this.layoutManager.startLayout();this.priorityManager.startRenderPriorities(priorities);},loadLegacyPage:function(){var priorities=this.layoutManager.fetchLegacyPriorities();if(priorities){this.priorityManager.startRenderPriorities(priorities);}},queueFeedLoad:function(feedURL,module){this.feedManager.queueFeedLoad(feedURL,module);},registerFeedLoaded:function(feedURL,feedData,module){this.feedManager.registerFeedLoaded(feedURL,feedData,module);},getFeedData:function(feedURL){return this.feedManager.getFeedData(feedURL);},queueJavascript:function(scripts,module,hashes){this.scriptManager.queueJavascript(scripts,module,hashes);},moduleTimeout:function(module){var message='Module '+module.data('tfdriver')+' failed rendering in zone '+module.data('zone');this.getMediator().trigger('triforce:message',{'type':'warning','message':message});},scrollToTop:function(){var doScroll=true,eventObject={preventDefault:function(){doScroll=false;}};this.getMediator().trigger('triforce:pageScrollToTop',eventObject);if(doScroll){$(window).scrollTop(0);}},abortAllRequests:function(){this.scriptManager.abortAllFeedRequests();this.scriptManager.unqueueAllScripts();}});})(jQuery,window);$(document).ready(function(){window.Triforce=new $Crabapple.Triforce();window.Triforce.init();});if(typeof $Crabapple=="undefined")$Crabapple={};var vmn_page_data={};$Crabapple.repo={_tag:"REPO: ",_codaUrl:false,_repoUrl:false,_repoData:false,_adsSelector:"[data-adsize][data-ad-sizes]",_extraKeyValues:[],_staticAds:true,_queryStringValues:{},_doubleClickEnabled:true,_hideAdBeforeLoaded:/970x66/,_disableAdsIfHidden:['200x31','140x70','728x90','300x50'],_trackingPixelClass:"repo_tracking_pixel",_log:function(msg){if(typeof console!="undefined"){if(typeof console.debug==="function"){console.debug($Crabapple.repo._tag+msg);}else{console.log($Crabapple.repo._tag+msg);}}},_error:function(msg){if(typeof console!="undefined"){console.error($Crabapple.repo._tag+msg);}},init:function(codaUrl,repoUrl,isStaticAds,repoData){$.ajaxSetup({cache:true});$Crabapple.repo._log("init called");$Crabapple.repo._codaUrl=codaUrl;$Crabapple.repo._repoUrl=repoUrl;$Crabapple.repo._staticAds=(typeof isStaticAds=="undefined"?true:isStaticAds);$Crabapple.repo._repoData=repoData;var queryString=location.search.substr(1).split("&");for(var i in queryString){var pair=queryString[i];if(pair==="")continue;var parts=pair.split("=");$Crabapple.repo._queryStringValues[parts[0]]=decodeURIComponent(parts[1].replace(/\+/g," "));}
if($Crabapple.repo._queryStringValues.testmode!=null){$Crabapple.repo.addKeyValue("testmode",$Crabapple.repo._queryStringValues.testmode);}
var _this=this;$('body').on('adLoaded',function(event,data){if(data&&data.element&&$(data.element).attr('data-adhidden')=='true'){setTimeout(function(){_this.checkAdVisibility(data);},500);}});},checkAdVisibility:function(data){if(data&&data.element){var adEl=$(data.element),_this=this;if(adEl.attr('data-adhidden')){if(adEl.find('div > div > iframe').length&&adEl.find('div > div > iframe').attr('height')){setTimeout(function(){_this.showAd(adEl);},750);}else{setTimeout(function(){_this.checkAdVisibility(data);},500);}}}},showAd:function(adEl){adEl.removeAttr('data-adhidden').removeAttr('style');},loadCoda:function(){$Crabapple.repo._log("loadCoda called");if(typeof btg!="undefined"&&btg.isCoreLoaded===true){$Crabapple.repo._fireTracking();$('body').trigger('codaLoaded');return;}
$('body').append('<script src="'+$Crabapple.repo._codaUrl+'" type="text/javascript"></script>');$Crabapple.repo._codaWait=1;$Crabapple.repo._codaCallback();},_codaCallback:function(){$Crabapple.repo._codaWait++;if(typeof btg=="undefined"||btg.isCoreLoaded!=true){if($Crabapple.repo._codaWait>60){$Crabapple.repo._error("gave up waiting for coda");return;}
setTimeout($Crabapple.repo._codaCallback,250);$Crabapple.repo._log("waiting on coda");return;}
$Crabapple.repo._log("coda loaded");$('body').trigger('codaLoaded');},_fireTracking:function(){if(btg.Object.isConfigDefined(btg.config.Omniture)&&btg.Omniture){new btg.Omniture(btg.config.Omniture);}
if(btg.Object.isConfigDefined(btg.config.Nielsen)&&btg.Nielsen){new btg.Nielsen(btg.config.Nielsen);}
if(btg.Object.isConfigDefined(btg.config.QuantCast)&&btg.QuantCast){btg.ReportingManager.isScriptIncluded.quantcast=false;(new btg.QuantCast(btg.config.QuantCast)).sendPageCall();}
if(btg.Object.isConfigDefined(btg.config.ComScore)&&btg.ComScore){btg.ReportingManager.isScriptIncluded.comscore=false;new btg.ComScore(btg.config.ComScore);}
if(btg.config.ChoiceStream&&btg.config.ChoiceStream.enabled&&btg.ChoiceStream){new btg.ChoiceStream(btg.config.ChoiceStream);}
if(btg.Object.isConfigDefined(btg.config.ChoiceStream)&&btg.ChoiceStream){new btg.ChoiceStream(btg.config.ChoiceStream);}
if(btg.Object.isConfigDefined(btg.config.Demdex)&&btg.Demdex){btg.Demdex.init();btg.Demdex.sendIdSyncCall();}},_loadRepo:function(){$Crabapple.repo._log("_loadRepo called");$Crabapple.repo._repoData
var parseResponse=function(data){$Crabapple.repo._log("_loadRepo response");$Crabapple.repo._repoData=data;$Crabapple.repo._parseRepoResponse();$('body').trigger('repoLoaded');$Crabapple.repo.loadCoda();};if($Crabapple.repo._repoData){parseResponse($Crabapple.repo._repoData);}else{$.ajax({dataType:"jsonp",url:$Crabapple.repo._repoUrl,jsonpCallback:'repoLoad',success:parseResponse});}},loadRepoResponseFromData:function(data){$Crabapple.repo._repoData=data;$Crabapple.repo._repoUrl='[manual repo data load]';$Crabapple.repo._parseRepoResponse();},_parseRepoResponse:function(){if(typeof $Crabapple.repo._repoData!="object"){$Crabapple.repo._error("Bad response from Repo url call: "+$Crabapple.repo._repoUrl);return;}
$Crabapple.repo._configDFPP();if(typeof MTVN=="undefined")MTVN={};if(typeof MTVN.config=="undefined")MTVN.config={};if(typeof MTVN.config.btg=="undefined")MTVN.config.btg={};if(typeof MTVN.config.btg.DoubleClick=="undefined")MTVN.config.btg.DoubleClick={};if(typeof MTVN.config.btg.AdSettings=="undefined")MTVN.config.btg.AdSettings={};if(typeof MTVN.config.btg.AdSettings.DoubleClick=="undefined")MTVN.config.btg.AdSettings.DoubleClick={};if(typeof MTVN.config.btg.ReportSettings=="undefined")MTVN.config.btg.ReportSettings={};if(typeof MTVN.config.btg.ReportSettings.Omniture=="undefined")MTVN.config.btg.ReportSettings.Omniture={};MTVN.config.btg.DoubleClick.auto=false;$Crabapple.repo._configReporting();$Crabapple.repo._configAds();$Crabapple.repo._configWebsite();$Crabapple.repo._configSourcePoint();$Crabapple.repo._configLegacy();$Crabapple.repo._extraKeyValues=[];$Crabapple.repo._log("_parseRepoResponse ended");},loadRepo:function(){if($Crabapple.repo._repoUrl==false){throw new Error("repo init() has not been called yet");}
$Crabapple.repo._log("loadRepo called");$.ajax({dataType:"jsonp",url:$Crabapple.repo._repoUrl,jsonpCallback:'repoLoad',success:function(data){$Crabapple.repo._log("loadRepo response");$Crabapple.repo._repoData=data;$Crabapple.repo._parseRepoResponse();$('body').trigger('repoLoaded');}});},_configDFPP:function(){$Crabapple.repo._log("_configDFPP called");if($Crabapple.repo._extraKeyValues){for(var i in $Crabapple.repo._extraKeyValues){$Crabapple.repo._repoData.doubleClick.keyValues[i]=$Crabapple.repo._extraKeyValues[i];}}
window.vmn_page_data={"metadata":$Crabapple.repo._repoData.doubleClick.metadata,"mappings":{"ad-unit":$Crabapple.repo._repoData.doubleClick.adUnits,"exclusion-categories":$Crabapple.repo._repoData.doubleClick.exclusionCategories},"settings":{"reload":$Crabapple.repo._repoData.doubleClick.adReloadable,"reload_interval":$Crabapple.repo._repoData.doubleClick.adReloadTime,"autoRefreshByVisibility":$Crabapple.repo._repoData.doubleClick.autoRefreshByVisibility}};if($Crabapple.repo._staticAds){window.vmn_page_data.mappings['key-values']=Object.assign({},$Crabapple.repo._repoData.doubleClick.keyValues);}},_configReporting:function(){$Crabapple.repo._log("_configReporting called");MTVN.config.btg.ReportSettings.Omniture.dynamicAccountList=$Crabapple.repo._repoData.omniture.dynamicAccountList;MTVN.config.btg.ReportSettings.Omniture.linkInternalFilters=$Crabapple.repo._repoData.omniture.linkInternalFilters;MTVN.config.btg.ReportSettings.Omniture.videoViewEventDisable=$Crabapple.repo._repoData.omniture.videoViewEventDisable;MTVN.config.btg.ReportSettings.Omniture.enableVisitorNamespace=$Crabapple.repo._repoData.omniture.enableVisitorNameSpace;MTVN.config.btg.ReportSettings.Omniture.defaultHier=$Crabapple.repo._repoData.omniture.defaultHier;MTVN.config.btg.ReportSettings.Omniture.dynamicAccountSelection=$Crabapple.repo._repoData.omniture.dynamicAccountSelection;},_configAds:function(){$Crabapple.repo._log("_configAds called");if($Crabapple.repo._staticAds){$Crabapple.repo._log("_configAds enabled ondemand ads");MTVN.config.btg.DoubleClick.onDemand=false;}else{$Crabapple.repo._log("_configAds setting doubleclick ads to be ondemand");MTVN.config.btg.DoubleClick.onDemand=true;}
MTVN.config.btg.AdSettings.DoubleClick.auto=false;MTVN.config.btg.AdSettings.DoubleClick.autoDcopt=$Crabapple.repo._repoData.doubleClick.autoDcopt;MTVN.config.btg.AdSettings.DoubleClick.positionThreshold=$Crabapple.repo._repoData.doubleClick.positionThreshold;MTVN.config.btg.AdSettings.reloadableAds=$Crabapple.repo._repoData.doubleClick.adReloadable;MTVN.config.btg.AdSettings.reloadInterval=$Crabapple.repo._repoData.doubleClick.adReloadTime;$Crabapple.repo._doubleClickEnabled=$Crabapple.repo._repoData.doubleClick.enabled;if(!$Crabapple.repo._doubleClickEnabled){$Crabapple.repo._log("_configAds doubleclick disabled");}
if(true===$Crabapple.repo._repoData.doubleClick.disablePOE){$Crabapple.repo._log("_configAds doubleclick disable POE call");MTVN.config.btg.enablePOE=false;}},_configWebsite:function(){$Crabapple.repo._log("_configWebsite called");window.siteSectionId=$Crabapple.repo._repoData.website.videoSiteSectionId;window.useSurveyString=$Crabapple.repo._repoData.website.adCall1x2;window.adCall6x6=false;$("[data-ad-sizes=1x2]").remove();if($Crabapple.repo._repoData.website.adCall1x2){$('body').append('<div id="survey_ad1x2" data-adsize="1x2" data-ad-sizes="1x2" data-ad-keyvalues="" data-ad-reload-interval="-1" />');}},_configSourcePoint:function(){$Crabapple.repo._log("_configSourcePoint called");var data=$Crabapple.repo.getSourcePointData();if(null==data){$Crabapple.repo._log("_configSourcePoint not configured");return;}
MTVN.config.btg.SourcePoint=data;},_configLegacy:function(){if($Crabapple.repo._repoData.omniture.contextData)return;$Crabapple.repo._log("_configLegacy called");window.repCallObject={pageName:$Crabapple.repo._repoData.omniture.pageName,channel:$Crabapple.repo._repoData.omniture.channel,prop8:$Crabapple.repo._repoData.omniture.values['prop8'],eVar6:$Crabapple.repo._repoData.omniture.values['eVar6'],events:"event16"};window.pageName=$Crabapple.repo._repoData.omniture.pageName;window.exclusionString='';window.allKeyString=MTVN.config.btg.AdSettings.DoubleClick.keyValues;},trackPage:function(){if($Crabapple.repo._repoData==false){$Crabapple.repo._error("repo data has not been loaded yet");return;}
$Crabapple.repo._log("trackPage called");btg.Controller.sendPageCall($Crabapple.repo.getReportingObject());},getReportingObject:function(){if($Crabapple.repo._repoData==false){$Crabapple.repo._error("repo data has not been loaded yet");return{};}
$Crabapple.repo._log("getReportingObject called");var repCallObject={pageName:$Crabapple.repo._repoData.omniture.pageName,channel:$Crabapple.repo._repoData.omniture.channel};if($Crabapple.repo._repoData.omniture.values){for(var i in $Crabapple.repo._repoData.omniture.values){repCallObject[i]=$Crabapple.repo._repoData.omniture.values[i];}
repCallObject.events='event16';}
if($Crabapple.repo._repoData.omniture.contextData){repCallObject.contextData={};for(var i in $Crabapple.repo._repoData.omniture.contextData){repCallObject.contextData[i]=$Crabapple.repo._repoData.omniture.contextData[i];}}
$Crabapple.repo._parseTempReportingValues(repCallObject);return repCallObject;},trackSharing:function(moduleName,shareService,linkValue,contentId,moduleAction,contentURL){$Crabapple.repo._log("trackSharing called");if($Crabapple.repo._repoData==false){$Crabapple.repo._error("repo data has not been loaded yet");return;}
var repoValues={linkName:linkValue,linkType:'o'};var parseContextData=function(contextData){repoValues.contextData=Object.assign({},contextData);delete repoValues.contextData["v.channel"];repoValues.contextData["v.activity"]="sharedItem";repoValues.contextData["v.socMethod"]='share_'+shareService;repoValues.contextData["v.actName"]=moduleAction;repoValues.contextData["v.actPageName"]=$Crabapple.repo._repoData.omniture.pageName;};if($Crabapple.repo._repoData.omniture.contextData){if(typeof contentURL!="undefined"&&window.location.href==contentURL){parseContextData($Crabapple.repo._repoData.omniture.contextData);}else{$Crabapple.repo._log("trackSharing fetching additional repo data");var parser=document.createElement('a');parser.href=$Crabapple.repo._repoUrl;var q=parser.search;var qp=q.split('&');var itemIdFound=false;for(var i in qp){if(qp.indexOf('itemId')===0){qp[i]='itemId='+contentId;itemIdFound=true;}
if(qp.indexOf('url')===0){qp[i]='url='+encodeURI(contentURL);}}
if(!itemIdFound){qp.push('itemId='+contentId);}
parser.search=qp.join('&');$.ajax({dataType:"jsonp",url:parser.href,jsonpCallback:'repoLoad',success:function(repoData){if(!repoData||!repoData.omniture||!repoData.omniture.contextData){$Crabapple.repo._log("trackSharing failed because repo data for contentId didn't return omniture.contextData");$Crabapple.repo._log(parser.href);return;}
parseContextData(repoData.omniture.contextData);if(null==repoValues.linkName){repoValues.linkName=moduleName;}
$Crabapple.repo._parseTempReportingValues(repoValues);if(typeof(mtvn)!='undefined'){mtvn.btg.Controller.sendLinkEvent(repoValues);}}});return;}}else{repoValues.events="event84";repoValues.eVar60=$Crabapple.repo._repoData.omniture.pageName;repoValues.eVar51='share_'+shareService;repoValues.eVar16=moduleAction||'share tracking';if(typeof(contentId)!="undefined"){repoValues.eVar65=contentId;}}
if(null==repoValues.linkName){repoValues.linkName=moduleName;}
$Crabapple.repo._parseTempReportingValues(repoValues);if(typeof(mtvn)!='undefined'){mtvn.btg.Controller.sendLinkEvent(repoValues);}},trackModuleAction:function(moduleName,moduleAction,additionalValues,additionalContextDataValues){$Crabapple.repo._log("trackModuleAction called");if($Crabapple.repo._repoData==false){$Crabapple.repo._error("repo data has not been loaded yet");return;}
var repoValues={};if(null==repoValues.linkName){repoValues.linkName=moduleName;}
repoValues.linkType='o';if($Crabapple.repo._repoData.omniture.contextData){repoValues.contextData=Object.assign({},$Crabapple.repo._repoData.omniture.contextData);if(typeof additionalContextDataValues!='undefined'){repoValues.contextData=Object.assign(repoValues.contextData,additionalContextDataValues)}
if(!repoValues.contextData["v.destURL"]){repoValues.contextData["v.destURL"]='no destination';}
repoValues.contextData["v.actPageName"]=$Crabapple.repo._repoData.omniture.pageName;repoValues.contextData["v.actName"]=moduleAction;if($Crabapple.repo._repoData.omniture.contextData["v.pageType"]){repoValues.contextData["v.pageType"]=$Crabapple.repo._repoData.omniture.contextData["v.pageType"];}
repoValues.contextData["v.modname"]=moduleName;}else{if(typeof additionalValues!='undefined'){repoValues=Object.assign(repoValues,additionalValues)}
repoValues.prop8=$Crabapple.repo._repoData.omniture.values.prop8;repoValues.prop25=moduleName;repoValues.prop26=moduleName+'|'+$Crabapple.repo._repoData.omniture.pageName;if(!repoValues.prop27){repoValues.prop27='no destination';}
if($Crabapple.repo._repoData.omniture.values.prop28){repoValues.prop28=$Crabapple.repo._repoData.omniture.values.prop28;}
if(!repoValues.eVar5){repoValues.eVar5='no destination';}
repoValues.eVar6=$Crabapple.repo._repoData.omniture.values.eVar6;repoValues.eVar7=moduleName;repoValues.eVar8=moduleName+'|'+$Crabapple.repo._repoData.omniture.pageName;if(typeof moduleAction!='undefined'&&moduleAction){repoValues.eVar16=moduleAction;}
repoValues.eVar9=$Crabapple.repo._repoData.omniture.pageName;}
$Crabapple.repo._parseTempReportingValues(repoValues);if(typeof(mtvn)!='undefined'){mtvn.btg.Controller.sendLinkEvent(repoValues);}},trackModuleClickThrough:function(moduleName,destinationURL,moduleAction,additionalValues,additionalContextDataValues){$Crabapple.repo._log("trackModuleClickThrough called");var repoValues={};var repoContextDataValues={};if(typeof additionalContextDataValues!='undefined'){repoContextDataValues=additionalContextDataValues;}
var destinationURL=(typeof destinationURL!='undefined'&&destinationURL)?destinationURL:'no destination';if(destinationURL){if(destinationURL.substr(0,1)=='/'){destinationURL=window.location.protocol+"//"+window.location.host+destinationURL;}
repoValues.eVar5=destinationURL;repoValues.prop27=destinationURL;repoContextDataValues["v.destURL"]=destinationURL;}
if(typeof additionalValues!='undefined'){repoValues=additionalValues;}
var clickModuleAction='click tracking';if(typeof moduleAction!='undefined'&&null!==moduleAction){clickModuleAction=moduleAction;}
$Crabapple.repo.trackModuleAction(moduleName,clickModuleAction,repoValues,repoContextDataValues);},_parseTempReportingValues:function(repoData){if(!repoData){return;}
var data=repoData;if(data&&data.omniture){data=data.omniture;}
if(data.contextData){var date=new Date();if(data.contextData["v.uuid"]){data.contextData["v.uuid"]=$.cookie('vmn_uuid')}
if(data.contextData["v.dayW"]){var dow=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];data.contextData["v.dayW"]=dow[date.getDay()];}
if(data.contextData["v.hourD"]){var hours=date.getHours();var minutes=date.getMinutes();var ampm='AM';if(hours>12){hours=hours%12;ampm='PM';}
if(hours==0){hours=12}
if(minutes<30){minutes=0;}
if(minutes>30){minutes=30;}
if(minutes<10){minutes='0'+minutes;}
data.contextData["v.hourD"]=hours+':'+minutes+ampm;}}},doFullPageLoad:function(doStaticAds){$Crabapple.repo._log("doPageLoad called");if($Crabapple.repo._repoUrl==false){throw new Error("repo init() has not been called yet");}
$('body').one('codaLoaded',function(){$Crabapple.repo.trackPage();$Crabapple.repo.loadAds(doStaticAds);$Crabapple.repo.fireTrackingPixels();});$Crabapple.repo._loadRepo();},doFullPageLoadWithCustomAdFunc:function(func){$Crabapple.repo._log("doFullPageLoadWithCustomAdFunc called");if($Crabapple.repo._repoUrl==false){throw new Error("repo init() has not been called yet");}
$('body').one('codaLoaded',function(){if(!$Crabapple.repo._staticAds){btg.DoubleClick.resetSlotCounter();}
$Crabapple.repo.trackPage();func();$Crabapple.repo.fireTrackingPixels();});$Crabapple.repo._loadRepo();},addKeyValue:function(key,value){$Crabapple.repo._extraKeyValues[key]=value;},loadAds:function(){$Crabapple.repo._log("loadAds called");$Crabapple.repo._checkAdsCanRun();if(!$Crabapple.repo._doubleClickEnabled)return;if($Crabapple.repo._staticAds){$Crabapple.repo._log("loading all ads");btg.DoubleClick.createAdsFromMarkup();}else{$($Crabapple.repo._adsSelector).each(function(index,element){$Crabapple.repo._log("loading ad: "+index);$Crabapple.repo.loadSingleAd(element);});}},fireTrackingPixels:function(){$Crabapple.repo._log("fireTrackingPixels called");$Crabapple.repo._removeTrackingPixels();if(!$Crabapple.repo._repoData.trackingPixels)return;var i=0;for(i in $Crabapple.repo._repoData.trackingPixels.floodlight){$Crabapple.repo._floodlightTrackingPixel($Crabapple.repo._repoData.trackingPixels.floodlight[i]);}
for(i in $Crabapple.repo._repoData.trackingPixels.tapAd){$Crabapple.repo._tapAdTrackingPixel($Crabapple.repo._repoData.trackingPixels.tapAd[i]);}
for(i in $Crabapple.repo._repoData.trackingPixels.googleAdWords){$Crabapple.repo._googleAdWordsTrackingPixel($Crabapple.repo._repoData.trackingPixels.googleAdWords[i]);}
for(i in $Crabapple.repo._repoData.trackingPixels.mediaMath){$Crabapple.repo._mediaMathTrackingPixel($Crabapple.repo._repoData.trackingPixels.mediaMath[i]);}
for(i in $Crabapple.repo._repoData.trackingPixels.facebook){$Crabapple.repo._facebookTrackingPixel($Crabapple.repo._repoData.trackingPixels.facebook[i]);}
for(i in $Crabapple.repo._repoData.trackingPixels.googleTagManager){$Crabapple.repo._googleTagManagerPixel($Crabapple.repo._repoData.trackingPixels.googleTagManager[i]);}},_removeTrackingPixels:function(){$Crabapple.repo._log("_removeTrackingPixels called");$('.'+$Crabapple.repo._trackingPixelClass).remove();},_fixTrackingPixelURL:function(url){if(!/^(http[s]?:)?(\/\/)/.exec(url)){return'//'+url;}
return url;},_floodlightTrackingPixel:function(val){val=this._fixTrackingPixelURL(val);$Crabapple.repo._log("_floodlightTrackingPixel called value: "+val);var floodlightTag=document.createElement('iframe');var pageName=encodeURIComponent($Crabapple.repo._repoData.omniture.pageName);var url=val.replace('[Page Name]',pageName)+';ord='+Math.floor((Math.random()*100000000000));floodlightTag.className=$Crabapple.repo._trackingPixelClass;floodlightTag.width=1;floodlightTag.height=1;floodlightTag.frameBorder=0;floodlightTag.style='display:none;';floodlightTag.src=url;document.body.appendChild(floodlightTag);},_googleAdWordsTrackingPixel:function(val){val=this._fixTrackingPixelURL(val);$Crabapple.repo._log("_googleAdWordsTrackingPixel called value: "+val);var i=document.createElement('img');i.src=val;i.width=1;i.height=1;i.setAttribute('style','display:none');i.className=$Crabapple.repo._trackingPixelClass;document.body.appendChild(i);},_tapAdTrackingPixel:function(val){val=this._fixTrackingPixelURL(val);$Crabapple.repo._log("_tapAdTrackingPixel called value: "+val);var i=document.createElement('img');i.src=val;i.width=1;i.height=1;i.setAttribute('style','display:none');i.className=$Crabapple.repo._trackingPixelClass;document.body.appendChild(i);},_mediaMathTrackingPixel:function(val){val=this._fixTrackingPixelURL(val);$Crabapple.repo._log("_mediaMathTrackingPixel called value: "+val);var script=document.createElement('script');script.src=val;script.async=true;script.className=$Crabapple.repo._trackingPixelClass;document.body.appendChild(script);},_facebookTrackingPixel:function(val){val=encodeURIComponent(val);$Crabapple.repo._log("_facebookTrackingPixel called value: "+val);var script=document.createElement('script');script.className=$Crabapple.repo._trackingPixelClass;script.innerHTML="!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,document,'script','https://connect.facebook.net/en_US/fbevents.js');"+"fbq('init', '"+val+"');fbq('track', 'PageView');";document.body.appendChild(script);},_googleTagManagerPixel:function(val){val=encodeURIComponent(val);$Crabapple.repo._log("_googleTagManagerPixel called value: "+val);var script=document.createElement('script');script.className=$Crabapple.repo._trackingPixelClass;script.innerHTML="(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','"+
val+"');";document.body.appendChild(script);},_checkAdsCanRun:function(){$Crabapple.repo._log("_checkAdsCanRun called");$($Crabapple.repo._adsSelector).each(function(){var size=$(this).attr("data-ad-sizes");if(($Crabapple.repo._repoData.website.adCall1x2==false&&size=="1x2")||null===size||size.indexOf('x')==-1){$(this).removeAttr("data-ad-sizes");}});},_createAdObject:function(element){var adData={"size":$(element).attr("data-ad-sizes"),"keyValues":""};var customKeyValues=[];if($(element).attr("data-ad-keyvalues")){var keys=$(element).attr("data-ad-keyvalues").split(';');var keyValues=[];for(var j in keys){var value=keys[j].split('=');customKeyValues[value[0]]=value[1];}}
if(customKeyValues){for(var k in customKeyValues){adData.keyValues+=k+'='+customKeyValues[k]+';';}}
for(var i in $Crabapple.repo._repoData.doubleClick.keyValues){if(customKeyValues[i]==null){adData.keyValues+=i+'='+$Crabapple.repo._repoData.doubleClick.keyValues[i]+';';}}
if(typeof n_pbt!=="undefined")
adData.keyValues+=n_pbt+';';if($(element).attr("data-ad-reload-interval")){var reloadInterval=($(element).attr("data-ad-reload-interval")*1);if(parseFloat(reloadInterval)!==+reloadInterval){if(reloadInterval==0){reloadInterval=-1;}
adData.reloadInterval=reloadInterval;}}
return adData;},loadSingleAd:function(element){$Crabapple.repo._log("loadSingleAd called");if(!$Crabapple.repo._doubleClickEnabled)return;if($Crabapple.repo._repoData==false){$Crabapple.repo._error("repo data has not been loaded yet");return;}
if(typeof element=="undefined"||!element){throw new Error("element does not exist that was passed to loadSingleAd");}
if(null==$(element).attr("id")){$(element).attr('id','ad_'+Math.floor(Math.random()*100000000));}
$(element).bind('onError',function(){return false;});var size=$(element).attr("data-ad-sizes");if($.inArray(size,$Crabapple.repo._disableAdsIfHidden)!==-1&&$(element).is(":hidden")){return;}
$Crabapple.repo._log("loading ad size: "+size);if($(element).find('div').length){$Crabapple.repo._log("Hitting race condition, tried to load an ad into something with a child ad");return;}
if(($Crabapple.repo._repoData.website.adCall1x2==false&&size=="1x2")||null===size||size.indexOf('x')==-1){$(element).removeAttr("data-ad-sizes");return;}
if(size.match(this._hideAdBeforeLoaded)){$(element).css({'height':'0','overflow':'hidden'}).attr('data-adhidden','true');}else{$(element).show();}
btg.DoubleClick.createAd($Crabapple.repo._createAdObject(element),element);$('body').trigger('adLoaded',{adSize:size,keyValues:$(element).attr("data-ad-keyvalues"),element:element});},clearAds:function(){$($Crabapple.repo._adsSelector).children().remove();},onLoad:function(func){$('body').one('codaLoaded',function(){func();});},getSourcePointData:function(){return null;}};(function(){var g=function(e,h,f,g){this.get=function(a){for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null};this.set=function(a,c){var b="",b=new Date;b.setTime(b.getTime()+6048E5);b="; expires="+b.toGMTString();document.cookie=a+"="+c+b+"; path=/; "};this.check=function(){var a=this.get(f);if(a)a=a.split(":");else if(100!=e)"v"==h&&(e=Math.random()>=e/100?0:100),a=[h,e,0],this.set(f,a.join(":"));else return!0;var c=a[1];if(100==c)return!0;switch(a[0]){case"v":return!1;case"r":return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c}return!0};this.go=function(){if(this.check()){var a=document.createElement("script");a.type="text/javascript";a.src=g+"&t="+(new Date()).getTime();document.body&&document.body.appendChild(a)}};this.start=function(){var a=this;window.addEventListener?window.addEventListener("load",function(){a.go()},!1):window.attachEvent&&window.attachEvent("onload",function(){a.go()})}};try{(new g(100,"r","QSI_S_ZN_a3gEEkgi4zQwwFn","//zna3geekgi4zqwwfn-viacom.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_a3gEEkgi4zQwwFn&Q_LOC="+encodeURIComponent(window.location.href))).start()}catch(i){}})();"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){function i(e,t){return e.push.apply(e,t),e}function r(e,t,i,r){for(var n=e.length,a=i+(r?1:-1);r?a--:++a<n;)if(t(e[a],a,e))return a;return-1}function n(e){return function(i){return null==i?t:i[e]}}function a(e){return function(i){return null==e?t:e[i]}}function o(e,t,i,r,n){return n(e,function(e,n,a){i=r?(r=!1,e):t(i,e,n,a)}),i}function s(e,t){return M(t,function(t){return e[t]})}function l(e,t){return function(i){return e(t(i))}}function c(e){return e instanceof u?e:new u(e)}function u(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t}function p(e,i,r){var n=e[i];Lt.call(e,i)&&Ie(n,r)&&(r!==t||i in e)||d(e,i,r)}function d(e,t,i){e[t]=i}function v(e,i,r){if("function"!=typeof e)throw new TypeError(tt);return setTimeout(function(){e.apply(t,r)},i)}function h(e,t){var i=!0;return jt(e,function(e,r,n){return i=!!t(e,r,n)}),i}function g(e,i,r){for(var n=-1,a=e.length;++n<a;){var o=e[n],s=i(o);if(null!=s&&(l===t?s===s&&!0:r(s,l)))var l=s,c=o}return c}function f(e,t){var i=[];return jt(e,function(e,r,n){t(e,r,n)&&i.push(e)}),i}function m(e,t,r,n,a){var o=-1,s=e.length;for(r||(r=J),a||(a=[]);++o<s;){var l=e[o];t>0&&r(l)?t>1?m(l,t-1,r,n,a):i(a,l):n||(a[a.length]=l)}return a}function E(e,t){return e&&Ht(e,t,oi)}function b(e,t){return f(t,function(t){return we(e[t])})}function _(e){return X(e)}function S(e,t){return e>t}function y(e){return Oe(e)&&_(e)==dt}function A(e,t,i,r,n){return e===t||(null==e||null==t||!Oe(e)&&!Oe(t)?e!==e&&t!==t:I(e,t,i,r,A,n))}function I(e,t,i,r,n,a){var o=Xt(e),s=Xt(t),l=o?ct:_(e),c=s?ct:_(t);l=l==lt?mt:l,c=c==lt?mt:c;var u=l==mt,p=c==mt,d=l==c;a||(a=[]);var v=Zt(a,function(t){return t[0]==e}),h=Zt(a,function(e){return e[0]==t});if(v&&h)return v[1]==t;if(a.push([e,t]),a.push([t,e]),d&&!u){var g=o?G(e,t,i,r,n,a):Z(e,t,l,i,r,n,a);return a.pop(),g}if(!(i&it)){var f=u&&Lt.call(e,"__wrapped__"),m=p&&Lt.call(t,"__wrapped__");if(f||m){var E=f?e.value():e,b=m?t.value():t,g=n(E,b,i,r,a);return a.pop(),g}}if(!d)return!1;var g=z(e,t,i,r,n,a);return a.pop(),g}function D(e){return Oe(e)&&_(e)==bt}function P(e){return"function"==typeof e?e:null==e?Ze:("object"==("undefined"==typeof e?"undefined":_typeof(e))?T:n)(e)}function k(e,t){return e<t}function M(e,t){var i=-1,r=De(e)?Array(e.length):[];return jt(e,function(e,n,a){r[++i]=t(e,n,a)}),r}function T(e){var t=Ft(e);return function(i){var r=t.length;if(null==i)return!r;for(i=Object(i);r--;){var n=t[r];if(!(n in i&&A(e[n],i[n],it|rt)))return!1}return!0}}function w(e,t){return e=Object(e),fe(t,function(t,i){return i in e&&(t[i]=e[i]),t},{})}function V(e,t){return Gt(K(e,t,Ze),e+"")}function L(e,t,i){var r=-1,n=e.length;t<0&&(t=-t>n?0:n+t),i=i>n?n:i,i<0&&(i+=n),n=t>i?0:i-t>>>0,t>>>=0;for(var a=Array(n);++r<n;)a[r]=e[r+t];return a}function O(e){return L(e,0,e.length)}function C(e,t){var i;return jt(e,function(e,r,n){return i=t(e,r,n),!i}),!!i}function N(e,t){var r=e;return fe(t,function(e,t){return t.func.apply(t.thisArg,i([e],t.args))},r)}function U(e,i){if(e!==i){var r=e!==t,n=null===e,a=e===e,o=!1,s=i!==t,l=null===i,c=i===i,u=!1;if(!l&&!u&&!o&&e>i||o&&s&&c&&!l&&!u||n&&s&&c||!r&&c||!a)return 1;if(!n&&!o&&!u&&e<i||u&&r&&a&&!n&&!o||l&&r&&a||!s&&a||!c)return-1}return 0}function R(e,i,r,n){var a=!r;r||(r={});for(var o=-1,s=i.length;++o<s;){var l=i[o],c=n?n(r[l],e[l],l,r,e):t;c===t&&(c=e[l]),a?d(r,l,c):p(r,l,c)}return r}function B(e){return V(function(i,r){var n=-1,a=r.length,o=a>1?r[a-1]:t;for(o=e.length>3&&"function"==typeof o?(a--,o):t,i=Object(i);++n<a;){var s=r[n];s&&e(i,s,n,o)}return i})}function F(e,t){return function(i,r){if(null==i)return i;if(!De(i))return e(i,r);for(var n=i.length,a=t?n:-1,o=Object(i);(t?a--:++a<n)&&r(o[a],a,o)!==!1;);return i}}function x(e){return function(t,i,r){for(var n=-1,a=Object(t),o=r(t),s=o.length;s--;){var l=o[e?s:++n];if(i(a[l],l,a)===!1)break}return t}}function W(e){return function(){var t=arguments,i=Wt(e.prototype),r=e.apply(i,t);return Le(r)?r:i}}function j(e){return function(i,r,n){var a=Object(i);if(!De(i)){var o=P(r,3);i=oi(i),r=function(e){return o(a[e],e,a)}}var s=e(i,r,n);return s>-1?a[o?i[s]:s]:t}}function H(e,t,i,r){function n(){for(var t=-1,s=arguments.length,l=-1,c=r.length,u=Array(c+s),p=this&&this!==Pt&&this instanceof n?o:e;++l<c;)u[l]=r[l];for(;s--;)u[l++]=arguments[++t];return p.apply(a?i:this,u)}if("function"!=typeof e)throw new TypeError(tt);var a=t&nt,o=W(e);return n}function q(e,i,r,n){return e===t||Ie(e,Vt[r])&&!Lt.call(n,r)?i:e}function G(e,i,r,n,a,o){var s=r&it,l=e.length,c=i.length;if(l!=c&&!(s&&c>l))return!1;for(var u=-1,p=!0,d=r&rt?[]:t;++u<l;){var v,h=e[u],g=i[u];if(v!==t){if(v)continue;p=!1;break}if(d){if(!C(i,function(e,t){if(!ae(d,t)&&(h===e||a(h,e,r,n,o)))return d.push(t)})){p=!1;break}}else if(h!==g&&!a(h,g,r,n,o)){p=!1;break}}return p}function Z(e,t,i,r,n,a,o){switch(i){case pt:case dt:case ft:return Ie(+e,+t);case vt:return e.name==t.name&&e.message==t.message;case bt:case _t:return e==t+""}return!1}function z(e,i,r,n,a,o){var s=r&it,l=oi(e),c=l.length,u=oi(i),p=u.length;if(c!=p&&!s)return!1;for(var d=c;d--;){var v=l[d];if(!(s?v in i:Lt.call(i,v)))return!1}for(var h=!0,g=s;++d<c;){v=l[d];var f,m=e[v],E=i[v];if(!(f===t?m===E||a(m,E,r,n,o):f)){h=!1;break}g||(g="constructor"==v)}if(h&&!g){var b=e.constructor,_=i.constructor;b!=_&&"constructor"in e&&"constructor"in i&&!("function"==typeof b&&b instanceof b&&"function"==typeof _&&_ instanceof _)&&(h=!1)}return h}function Y(e){return Gt(K(e,t,ie),e+"")}function J(e){return Xt(e)||Qt(e)}function Q(e){var t=[];if(null!=e)for(var i in Object(e))t.push(i);return t}function X(e){return Ct.call(e)}function K(e,i,r){return i=xt(i===t?e.length-1:i,0),function(){for(var t=arguments,n=-1,a=xt(t.length-i,0),o=Array(a);++n<a;)o[n]=t[i+n];n=-1;for(var s=Array(i+1);++n<i;)s[n]=t[n];return s[i]=r(o),e.apply(this,s)}}function $(e){return f(e,Boolean)}function ee(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),r=arguments[0],n=e;n--;)t[n-1]=arguments[n];return i(Xt(r)?O(r):[r],m(t,1))}function te(e,t,i){var n=null==e?0:e.length;if(!n)return-1;var a=null==i?0:ei(i);return a<0&&(a=xt(n+a,0)),r(e,P(t,3),a)}function ie(e){var t=null==e?0:e.length;return t?m(e,1):[]}function re(e){var t=null==e?0:e.length;return t?m(e,ot):[]}function ne(e){return e&&e.length?e[0]:t}function ae(e,t,i){var r=null==e?0:e.length;i="number"==typeof i?i<0?xt(r+i,0):i:0;for(var n=(i||0)-1,a=t===t;++n<r;){var o=e[n];if(a?o===t:o!==o)return n}return-1}function oe(e){var i=null==e?0:e.length;return i?e[i-1]:t}function se(e,i,r){var n=null==e?0:e.length;return i=null==i?0:+i,r=r===t?n:+r,n?L(e,i,r):[]}function le(e){var t=c(e);return t.__chain__=!0,t}function ce(e,t){return t(e),e}function ue(e,t){return t(e)}function pe(){return N(this.__wrapped__,this.__actions__)}function de(e,i,r){return i=r?t:i,h(e,P(i))}function ve(e,t){return f(e,P(t))}function he(e,t){return jt(e,P(t))}function ge(e,t){return M(e,P(t))}function fe(e,t,i){return o(e,P(t),i,arguments.length<3,jt)}function me(e){return null==e?0:(e=De(e)?e:Ft(e),e.length)}function Ee(e,i,r){return i=r?t:i,C(e,P(i))}function be(e,t){var i=0;return t=P(t),M(M(e,function(e,r,n){return{value:e,index:i++,criteria:t(e,r,n)}}).sort(function(e,t){return U(e.criteria,t.criteria)||e.index-t.index}),n("value"))}function _e(e,i){var r;if("function"!=typeof i)throw new TypeError(tt);return e=ei(e),function(){return--e>0&&(r=i.apply(this,arguments)),e<=1&&(i=t),r}}function Se(e){if("function"!=typeof e)throw new TypeError(tt);return function(){var t=arguments;return!e.apply(this,t)}}function ye(e){return _e(2,e)}function Ae(e){return Le(e)?Xt(e)?O(e):R(e,Ft(e)):e}function Ie(e,t){return e===t||e!==e&&t!==t}function De(e){return null!=e&&Ve(e.length)&&!we(e)}function Pe(e){return e===!0||e===!1||Oe(e)&&_(e)==pt}function ke(e){return De(e)&&(Xt(e)||Re(e)||we(e.splice)||Qt(e))?!e.length:!Ft(e).length}function Me(e,t){return A(e,t)}function Te(e){return"number"==typeof e&&Bt(e)}function we(e){if(!Le(e))return!1;var t=_(e);return t==ht||t==gt||t==ut||t==Et}function Ve(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=st}function Le(e){var t="undefined"==typeof e?"undefined":_typeof(e);return null!=e&&("object"==t||"function"==t)}function Oe(e){return null!=e&&"object"==("undefined"==typeof e?"undefined":_typeof(e))}function Ce(e){return Ue(e)&&e!=+e}function Ne(e){return null===e}function Ue(e){return"number"==typeof e||Oe(e)&&_(e)==ft}function Re(e){return"string"==typeof e||!Xt(e)&&Oe(e)&&_(e)==_t}function Be(e){return e===t}function Fe(e){return De(e)?e.length?O(e):[]:qe(e)}function xe(e){return"string"==typeof e?e:null==e?"":e+""}function We(e,t){var i=Wt(e);return null==t?i:ii(i,t)}function je(e,t){return null!=e&&Lt.call(e,t)}function He(e,i,r){var n=null==e?t:e[i];return n===t&&(n=r),we(n)?n.call(e):n}function qe(e){return null==e?[]:s(e,oi(e))}function Ge(e){return e=xe(e),e&&yt.test(e)?e.replace(St,Tt):e}function Ze(e){return e}function ze(e){return T(ii({},e))}function Ye(e,t,r){var n=oi(t),a=b(t,n);null!=r||Le(t)&&(a.length||!n.length)||(r=t,t=e,e=this,a=b(t,oi(t)));var o=!(Le(r)&&"chain"in r&&!r.chain),s=we(e);return jt(a,function(r){var n=t[r];e[r]=n,s&&(e.prototype[r]=function(){var t=this.__chain__;if(o||t){var r=e(this.__wrapped__),a=r.__actions__=O(this.__actions__);return a.push({func:n,args:arguments,thisArg:e}),r.__chain__=t,r}return n.apply(e,i([this.value()],arguments))})}),e}function Je(){return Pt._===this&&(Pt._=Nt),this}function Qe(){}function Xe(e){var t=++Ot;return xe(e)+t}function Ke(e){return e&&e.length?g(e,Ze,S):t}function $e(e){return e&&e.length?g(e,Ze,k):t}var t,et="4.17.4",tt="Expected a function",it=1,rt=2,nt=1,at=32,ot=1/0,st=9007199254740991,lt="[object Arguments]",ct="[object Array]",ut="[object AsyncFunction]",pt="[object Boolean]",dt="[object Date]",vt="[object Error]",ht="[object Function]",gt="[object GeneratorFunction]",ft="[object Number]",mt="[object Object]",Et="[object Proxy]",bt="[object RegExp]",_t="[object String]",St=/[&<>"']/g,yt=RegExp(St.source),At={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},It="object"==("undefined"==typeof global?"undefined":_typeof(global))&&global&&global.Object===Object&&global,Dt="object"==("undefined"==typeof self?"undefined":_typeof(self))&&self&&self.Object===Object&&self,Pt=It||Dt||Function("return this")(),kt="object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&exports&&!exports.nodeType&&exports,Mt=kt&&"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module&&!module.nodeType&&module,Tt=a(At),wt=Array.prototype,Vt=Object.prototype,Lt=Vt.hasOwnProperty,Ot=0,Ct=Vt.toString,Nt=Pt._,Ut=Object.create,Rt=Vt.propertyIsEnumerable,Bt=Pt.isFinite,Ft=l(Object.keys,Object),xt=Math.max,Wt=function(){function e(){}return function(i){if(!Le(i))return{};if(Ut)return Ut(i);e.prototype=i;var r=new e;return e.prototype=t,r}}();u.prototype=Wt(c.prototype),u.prototype.constructor=u;var jt=F(E),Ht=x(),qt=Qe,Gt=Ze,Zt=j(te),zt=V(function(e,t,i){return H(e,nt|at,t,i)}),Yt=V(function(e,t){return v(e,1,t)}),Jt=V(function(e,t,i){return v(e,ti(t)||0,i)}),Qt=qt(function(){return arguments}())?qt:function(e){return Oe(e)&&Lt.call(e,"callee")&&!Rt.call(e,"callee")},Xt=Array.isArray,Kt=y,$t=D,ei=Number,ti=Number,ii=B(function(e,t){R(t,Ft(t),e)}),ri=B(function(e,t){R(t,Q(t),e)}),ni=B(function(e,t,i,r){R(t,si(t),e,r)}),ai=V(function(e){return e.push(t,q),ni.apply(t,e)}),oi=Ft,si=Q,li=Y(function(e,t){return null==e?{}:w(e,t)}),ci=P;c.assignIn=ri,c.before=_e,c.bind=zt,c.chain=le,c.compact=$,c.concat=ee,c.create=We,c.defaults=ai,c.defer=Yt,c.delay=Jt,c.filter=ve,c.flatten=ie,c.flattenDeep=re,c.iteratee=ci,c.keys=oi,c.map=ge,c.matches=ze,c.mixin=Ye,c.negate=Se,c.once=ye,c.pick=li,c.slice=se,c.sortBy=be,c.tap=ce,c.thru=ue,c.toArray=Fe,c.values=qe,c.extend=ri,Ye(c,c),c.clone=Ae,c.escape=Ge,c.every=de,c.find=Zt,c.forEach=he,c.has=je,c.head=ne,c.identity=Ze,c.indexOf=ae,c.isArguments=Qt,c.isArray=Xt,c.isBoolean=Pe,c.isDate=Kt,c.isEmpty=ke,c.isEqual=Me,c.isFinite=Te,c.isFunction=we,c.isNaN=Ce,c.isNull=Ne,c.isNumber=Ue,c.isObject=Le,c.isRegExp=$t,c.isString=Re,c.isUndefined=Be,c.last=oe,c.max=Ke,c.min=$e,c.noConflict=Je,c.noop=Qe,c.reduce=fe,c.result=He,c.size=me,c.some=Ee,c.uniqueId=Xe,c.each=he,c.first=ne,Ye(c,function(){var e={};return E(c,function(t,i){Lt.call(c.prototype,i)||(e[i]=t)}),e}(),{chain:!1}),c.VERSION=et,jt(["pop","join","replace","reverse","split","push","shift","sort","splice","unshift"],function(e){var t=(/^(?:replace|split)$/.test(e)?String.prototype:wt)[e],i=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|join|replace|shift)$/.test(e);c.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var n=this.value();return t.apply(Xt(n)?n:[],e)}return this[i](function(i){return t.apply(Xt(i)?i:[],e)})}}),c.prototype.toJSON=c.prototype.valueOf=c.prototype.value=pe,"function"==typeof define&&"object"==_typeof(define.amd)&&define.amd?(Pt._=c,define(function(){return c})):Mt?((Mt.exports=c)._=c,kt._=c):Pt._=c}(void 0);var TVEAuthOptions={},TVEAuthElvisObject={},TVELodash=_.noConflict(),TVEAuth=function(e,t){var i,r,n=TVELodash,a={selectProvider:"selectProvider",selectProviderNew:"selectProviderNew",learnMore:"learnMore",dontSeeUrMvpd:"dontSeeUrMvpd",signOut:"signOut",successMessage:"successMessage",elvisEnded:"elvisEnded",elvisTerminated:"elvisTerminated",fpSuccess:"fpSuccess",fpSignOut:"fpSignOut",error:"error",vipLogin:"vipLogin",elvisLogin:"elvisLogin",pleaseWait:"pleaseWait",elvisSuccess:"elvisSuccess",iframeWrap:"iframeWrap",waitScreen:"waitScreen"},o={plain:a.selectProvider,embedded:a.selectProviderNew},s={"short":10,mediumShort:50,medium:100,mediumLong:400,second:1e3,twoSeconds:2e3,fiveSeconds:5e3,fifteenSeconds:15e3,thirtySeconds:3e4},l={minuteInMillis:6e4,daysInWeek:7,dayInSeconds:86400,millisInSec:1e3,hourInMillis:36e5,twelveHoursinMillis:432e5,hourInMinutes:60,minuteInSeconds:60},c={downArrow:40,upArrow:38,enter:13},u={embeddedOverlayElementClass:"tve-embedded-element",freePreviewId:"FPS",specialFreePreviewId:"SFPS",freePreviewVipFlow:"24h"},p=function(){function e(){var e="TVEAuth_ls";try{return localStorage.setItem(e,"localStorage is available"),localStorage.removeItem(e),!0}catch(t){return!1}}function i(e){var t=5,i=new Date,r=e||t,n=864e5,a=r*n+i.getTime();return i.setTime(a),i.toUTCString()}function a(e,r,n){var a=encodeURIComponent(r),o=i(n);t.cookie="TVEAuth_"+e+"="+a+";expires="+o}function o(e,t,i){if(n.isString(e))n.isObject(t)&&(t=JSON.stringify(t)),a(e,t,i);else if(n.isObject(e))for(var r in e)e.hasOwnProperty(r)&&(n.isObject(e[r])&&(e[r]=JSON.stringify(e[r])),a(r,e[r],i))}function s(e){var i=t.cookie.split(";"),n="TVEAuth_"+e+"=";for(var a in i)if(a=r.trim(a),a.includes(n))return decodeURIComponent(a.substring(n.length));return null}function l(){var e=["demo_init_params","customCssUrl","anotherLocale","ResourceID","RequestorID"];c(e)}function c(e){if(n.isString(e))a(e,"",-1);else if(n.isObject(e)){var t=!0,i=!1,r=void 0;try{for(var s,l=e[Symbol.iterator]();!(t=(s=l.next()).done);t=!0){var c=s.value;o(c,"",-1)}}catch(u){i=!0,r=u}finally{try{!t&&l["return"]&&l["return"]()}finally{if(i)throw r}}}}function u(e,t){if(n.isString(e))n.isObject(t)&&(t=JSON.stringify(t)),localStorage.setItem("TVEAuth_"+e,t);else if(n.isObject(e))for(var i in e)e.hasOwnProperty(i)&&(n.isObject(e[i])&&(e[i]=JSON.stringify(e[i])),localStorage.setItem("TVEAuth_"+i,e[i]))}function p(e,t){var i=localStorage.getItem("TVEAuth_"+e);if(!t)return i;try{return JSON.parse(i)}catch(r){return null}}function d(){localStorage.clear()}function v(e){if(n.isString(e))localStorage.removeItem("TVEAuth_"+e);else if(n.isObject(e))for(var t in e)localStorage.removeItem("TVEAuth_"+e[t])}var h=e(),g={set:o,get:s,clear:l,erase:c,isLocalStorageSupported:h},f={set:u,get:p,clear:d,erase:v,isLocalStorageSupported:h};return h?f:g}(),d={ver:"4.9.0",build:201809250947,status:!1,get:p.get,set:p.set,erase:p.erase,isLocalStorageSupported:p.isLocalStorageSupported,urls:{ae:{dev:"https://entitlement.auth-staging.adobe.com/entitlement/js/AccessEnabler.js",live:"https://entitlement.auth.adobe.com/entitlement/js/AccessEnabler.js",debugQuery:"?debug=true"},tve:{dev:"https://tve.mtvnservices-q.mtvi.com/tveauth/html5/",live:"https://tve.mtvnservices.com/tveauth/html5/"},options:{dev:"https://tve.mtvnservices-q.mtvi.com/tveauth/v2/html5/",live:"https://tve.mtvnservices.com/tveauth/v2/html5/"},xbox:{dev:"https://xbox.mtvnservices-q.mtvi.com/fpservice/special/html5/",live:"https://xbox.mtvnservices.com/fpservice/special/html5/"},freePreview:{dev:"https://xbox.mtvnservices-q.mtvi.com/fpservice/",live:"https://xbox.mtvnservices.com/fpservice/"},whiteList:{tve:"/extendedProvidersList",intl_dev:"https://xbox.mtvnservices-q.mtvi.com/tveauth/v1/html5/%reqID%/getProvidersList",intl_live:"https://xbox.mtvnservices.com/tveauth/v1/html5/%reqID%/getProvidersList"},iui:{js_dev:e.jQuery?"/identity/identity-ui.min-qa-no-jquery.js":"/identity/identity-ui.min-qa.js",js_live:e.jQuery?"/identity/identity-ui.min-live-no-jquery.js":"/identity/identity-ui.min.js",css:"/identity/identity-ui.css"}},reqID:null,resID:null,wrapObj:null,hiddenObj:null,isAEAvailable:function(){return!n.isUndefined(e.ae)},isAEReady:!1,isAEAppended:!1,isAEWaitingFor:!1,MVPD:null,MVPD_ID:null,Helper:null,Subscriber:{isLoggedIn:!1,provider:null,token:""},settings:{freePreview:{html:'\n                <div class="tveapp_getfp">\n                    <p>For now, get a one time pass to access more full episodes for 24 hours</p>\n                    <button class="tveapp_24h">Start 24-hour viewing pass</button>\n                </div>',expiredMessage:"<span>Your preview has ended. Sign in with your TV provider for full access</span>",logoUrl:"http://mtv.mtvnimages.com/uri/mgid:file:gsp:kids-assets:/tve/fps_black.png",trySignInMessage:'\n                <button class="tveapp_24h">Start now</button>\n                <span>No sign in? Get a one time 24-hour viewing pass</span>',remainTimeMessage:'<span>Your preview will end in</span><span class="fp-timer">23:59</span>',loginMessage:"To start your one time 24-hour viewing pass, please sign in with one of the following:"}},selectProviderOverlayName:o.plain,initialize:function(t){if(d.reqID||d.resID)return!1;if(!t)return d.Error.showMess("Wrong Init Params"),!1;var i=void 0,r=void 0;return d.selectProviderOverlayName=o.plain,d.settings.wrapContainer="body",n.isString(t)?(d.settings.customCSS=arguments[2]||!1,i=arguments[3],r=arguments[0],d.reqID=arguments[0],d.resID=arguments[1]||arguments[0]):(d.settings.customCSS=t.customCSS||!1,i=t.dev,r=t.brand||t.requestor,t.wrapContainer&&(d.settings.wrapContainer=t.wrapContainer),d.settings.locale=t.locale&&"en_US"!==t.locale?t.locale:null,d.reqID=t.requestor,d.resID=t.resource||t.requestor),i=i||/mtvnservices-[dq]\.mtvi\.com/.test(e.location.hostname),d.settings.isDev=i,d.settings.brand=r,d.reqID&&d.resID?(d.set("RequestorID",d.reqID),d.set("ResourceID",d.resID),d.Debug.init(),d.Debug.info("initialization started",t),d.MegaBeacon.init(!n.isObject(t)||t.megaBeaconReporting!==!1),d.MegaBeacon.startCount("init"),this.buildRequestUrls(),this.reportMegaBeaconIfLocalStorageError(),this.jsonp({src:d.brandOptionsUrl,callback:this.initBrand},this),d.MVPD_ID=d.get("MVPD_ID")||d.get("CURRENT_PROVIDER_ID"),d.Elvis.isLoggedIn()?(d.isAEWaitingFor=!1,d.Auth.ready=!0):(d.isAEWaitingFor=!0,(d.settings.locale||d.isLocalStorageSupported)&&this.appendAE()),void(e.preauthorizedResources=function(e){var t=e&&e[0]===TVEAuthOptions.requestorID;d.triggerCallback("checkPFAcompleted",{isAuthorized:t})})):(d.Error.showMess("Wrong RequestorID/ResourceID"),!1)},buildRequestUrls:function(){var e=d.urls,i=d.settings.locale,r=d.settings.brand,n=d.settings.isDev,a=d.Debug.isActive,o=d.reqID.toLowerCase(),s=e.whiteList,l=void 0;n?(d.baseUrl=e.tve.dev,d.baseXboxUrl=e.xbox.dev,d.aeUrl=e.ae.dev,d.fpsUrl=e.freePreview.dev,d.awsUrl=location.protocol+"//tvejs.mtvnservices-q.mtvi.com/"+d.ver,d.iuiJSUrl=""+d.awsUrl+e.iui.js_dev,d.optionsUrl=e.options.dev,d.environment="staging",l=s.intl_dev):(d.baseUrl=e.tve.live,d.baseXboxUrl=e.xbox.live,d.aeUrl=e.ae.live,d.fpsUrl=e.freePreview.live,d.awsUrl=location.protocol+"//tvejs.mtvnservices.com/"+d.ver,d.iuiJSUrl=""+d.awsUrl+e.iui.js_live,d.optionsUrl=e.options.live,d.environment="production",l=s.intl_live),a&&(d.aeUrl=""+d.aeUrl+e.ae.debugQuery),d.hbaUrl=d.fpsUrl+"special/html5/checkelvis?hba=true",i?(t.body.className=t.body.className+" tveint_"+i,l=l.replace("%reqID%",o),d.whiteListUrl=l+"?locale="+i+"&deviceType=tablet",d.brandOptionsUrl=""+d.optionsUrl+d.ver+"/"+r+"/options?locale="+i,d.aeUrl=d.awsUrl+"/intl/intlPassEnabler.min.js"):(d.whiteListUrl=""+d.baseUrl+o+s.tve,d.brandOptionsUrl=""+d.optionsUrl+d.ver+"/"+r+"/options")},appendFiles:function(e,t,i){var r=void 0;if(n.isArray(e))for(r=0;r<e.length;r++)this.getScript(e[r],i);else this.getScript(e,i);if(t)if(t instanceof Array)for(r=0;r<t.length;r++)this.getCss(t[r]);else this.getCss(t)},getScript:function(e,i){var a=t.getElementsByTagName("head")[0],o=t.createElement("script"),s=n.noop;if(o.onerror=function(){d.Error.showMess("Internal TVE Services Error")},o.type="text/javascript",n.isObject(e)){if(!e.src)return;e.onload&&(s=e.onload),i&&(e.src=e.src+"&tvev="+d.ver),r.extend(o,e)}else i?o.src=e+"&tvev="+d.ver:o.src=e;o.onload=function(){s(),i&&a.removeChild(o)},a.appendChild(o)},getCss:function(e){var i=t.getElementsByTagName("head")[0],r=t.createElement("link");r.rel="stylesheet",r.href=e,i.appendChild(r)},jsonp:function(e,t){var i,r;if(n.isObject(e)){var a=e.src.indexOf("?")===-1?"?":"&";if(i=e.data,e.src=""+e.src+a,i){for(var o in i)e.src=""+e.src+o+"="+i[o]+"&";delete e.data}if(n.isString(e.callback))e.src=e.src+"callback="+e.callback,delete e.callback;else if(n.isFunction(e.callback)){var s=8;r="TVEjsonpCallback"+String(Math.random()).slice(-s),e.src=e.src+"callback=TVEAuth."+r,TVEAuth[r]=function(i){e.callback.call(t,i),delete TVEAuth[r]}}}d.appendFiles(e,null,!0)},initBrand:function(i){var n,a=!d.settings.locale;d.Debug.info("config received",i),TVEAuthOptions=!i||i.error?{layout:{},freePreview:{}}:i,d.Vip.identityBrand=i.identityBrand,d.Vip.identityApp=i.identityApp,d.Vip.identityFBAppID=i.identityFBAppID,d.Vip.identityTheme=i.identityTheme||null,d.settings.customCSS||(d.brandCSS=n=d.awsUrl+"/css/style.css",d.iuiCSSUrl=d.awsUrl+d.urls.iui.css,this.appendFiles([],n)),a&&d.HBA.init(i.isHbaEnabled,TVEAuthOptions.requestorID),i.emailTriggerImage?d.Vip.emailTriggerImage=d.awsUrl+i.emailTriggerImage:d.Vip.emailTriggerImage=d.awsUrl+"/img/email_button.png",r.extend(!0,d.settings.layout,TVEAuthOptions.layout),r.extend(!0,d.settings.freePreview,TVEAuthOptions.freePreview),d.settings.FPisActive=TVEAuthOptions.FPisActive;var o=setInterval(function(){if(d.Providers.ready){clearInterval(o),d.status=!0,d.triggerCallback("componentLoaded");var t,i=e.location.search,r={};if(~i.search("resetToken")){i=i.replace("?",""),i=i.split("&");for(var n=0,a=i.length;n<a;n++)t=i[n].split("="),t[0]&&(r[t[0]]=t[1]);d.Vip.identityResetToken=r.resetToken,d.Vip.resetToken()}}},s["short"]);r(t).ready(function(){d.Overlay.init(),d.Providers.init(),d.Elvis.init(),d.Error.init(d.settings.isDev),d.MegaBeacon.saveStepDuration("configuration"),/Android/i.test(navigator.userAgent)&&e.addEventListener("resize",function(){var e=.9,t=r("#tveapp_wrap .tveapp_container").css("opacity",e);setTimeout(function(){t.css("opacity",1)},s["short"])})})},isReady:function(){return d.status===!1&&d.Error.showMess("The Component Is Not Loaded"),d.status},triggerCallback:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=void 0,a=[];n.isFunction(e.Event)?r=new e.Event("TVE:"+t):(r=e.document.createEvent("Event"),r.initEvent("TVE:"+t,!0,!1));for(var o in i)r[o]=i[o],a.push(i[o]);if(d.Debug.callback(t,a),d.MegaBeacon.reportApiBeacon(t),TVEAuth.Callback&&TVEAuth.Callback[t]){var s;(s=TVEAuth.Callback)[t].apply(s,a)}e.document.dispatchEvent(r)},appendAE:function(i){function r(){var i=t.createElement("iframe");i.setAttribute("src","https://tvejs.mtvnservices.com/thirdpartycookiecheck/start.html"),i.style.width="1px",i.style.height="1px",i.style.display="none",i.id="tveapp_3pcifrm";var r=function n(r){"MM:3PCunsupported"===r.data&&d.Error.showMess("Third Party Cookies Are Not Supported"),t.getElementById(i.id).remove(),e.removeEventListener("message",n)};e.addEventListener("message",r,!1),t.body.appendChild(i)}if(!d.isAEReady&&(d.wrapObj&&d.Overlay.show(a.pleaseWait),i&&(d.AEcallback=i),!d.isAEAppended)){d.Debug.info("accessEnabler download started");var n=setTimeout(function(){d.isAEReady||d.Error.showMess("AccessEnabler Initialization Error")},s.thirtySeconds);d.checkUserAgent(/iphone|ipad/i)||(d.wait_3rdpartycookies=setTimeout(r,s.fifteenSeconds)),d.isAEAppended=!0,d.appendFiles({src:d.aeUrl,onload:function(){clearTimeout(n),d.Debug.info("accessEnabler download completed")},onerror:function(){d.Error.showMess("AccessEnabler Initialization Error")}})}},reportMegaBeaconIfLocalStorageError:function(){if(!d.isLocalStorageSupported){var e="LocalStorage Is Unavailable",t={errorMessage:"LocalStorage Is Unavailable",developerMessage:"AccessEnableris using the WebStorage(HTML5 localStorage) alternate storage due to problems with LSO. Authentication / authorization are persisted per site only, no SSO across sites or browsers is available. See http://tve.helpdocsonline.com/error-reporting",userMessage:"It seems like you browser doesn't support local storage. Please use browser not in private/incognito mode."};d.Error.showMess(e,t)}},checkUserAgent:function(e){return e.test(navigator.userAgent)},wait:function(e,t,i){if(e[t])i();else var r=setInterval(function(){e[t]&&(clearInterval(r),i())},s["short"])},postponeGetMvpdPicker:function(e,t){d.AEcallback=function(){d.Debug.info("postponed ae callback started"),d.API.getMvpdPicker(e,t)},d.Overlay.hide(),d.isAEWaitingFor||(d.isAEWaitingFor=!0,d.appendAE())}};!function(){e.setTimeout(function(){d.triggerCallback("apiReady")},s["short"])}(),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){function i(e,t){return e===t||n.isNumber(e)&&n.isNumber(t)&&isNaN(e)&&isNaN(t)}if(n.isNull(this)||n.isUndefined(this))throw new TypeError('"this" is null or not defined');var r=Object(this),a=r.length>>>0;if(0===a)return!1;for(var o=0|t,s=Math.max(o>=0?o:a-Math.abs(o),0);s<a;){if(i(r[s],e))return!0;s++}return!1}}),d.Auth={reset:function(){d.MVPD=null,d.MVPD_ID=null,d.Subscriber={isLoggedIn:!1,provider:null,token:null}},set:function(){var e=d.Elvis.isLoggedIn();if(e)d.Auth.ready=!0;else if(d.isAEAvailable()){d.isAEWaitingFor=!1;var t={callSetConfig:!0,backgroundLogin:!0,backgroundLogout:!0,locale:d.settings.locale||"",deviceType:"tablet"};if(d.checkUserAgent(/FBAN|FBAV/i)&&d.checkUserAgent(/iphone|ipad/i)&&(t.backgroundLogin=!1),n.isUndefined(ae.bind)||ae.bind("errorEvent","adobeErrorLogger"),TVEAuthOptions.requestorID)ae.setRequestor(TVEAuthOptions.requestorID,null,t);else var i=setInterval(function(){TVEAuthOptions.requestorID&&(clearTimeout(i),ae.setRequestor(TVEAuthOptions.requestorID,null,t))},s["short"])}else d.Error.showMess("Auth.set")},get:function(){var e=d.Elvis.isLoggedIn();e?this.checkElvisStatus("checkAZ"):(d.set({checkAZ:"true",getAZ:"true"}),ae.getAuthorization(TVEAuthOptions.resourceID))},check:function(e){var t="24h"===d.get("signedInWith"),i=d.Elvis.isLoggedIn(),r=d.get("AUTH_DATA",!0),a=n.isObject(r),o=this.isProviderOnWhitelist(),s=!t&&!i,l=!!a&&o,c=s&&!r&&d.HBA.checkIfHbaIsActive(),u=!1;if(d.set("checkAZ","true"),c)return void d.HBA.check(!0);if(t&&d.fp.check(),i&&this.checkElvisStatus("checkStatus"),!i&&!t){var p={authenticate:!0,isPlayerPage:e};l?u=this.isTokenExpired(p.isPlayerPage):d.Auth.setANStatus(0),u&&this.waitForAccessEnabler(p),this.logoutIfProviderNotOnWhitelist()}},isProviderOnWhitelist:function(){var e=d.get("CURRENT_PROVIDER_ID");return d.Providers.isProviderOnWhitelist(e)},checkElvisStatus:function(e){d.Elvis.Helper=e,d.Elvis.check()},isTokenTimeValid:function h(){var e=d.get("AUTH_DATA",!0),h=!!e&&e.expirationTime>Date.now();return h},isTokenExpired:function(e){var t=d.get("AUTH_DATA",!0),i=this.isTokenTimeValid();return i?(d.MVPD=t.mvpd,e?setToken(TVEAuthOptions.requestorID,t.token):this.setANStatus(1),!1):(d.erase("AUTH_DATA"),!0)},userNotAuthenticated:function(){this.tokenRequestFailed(TVEAuthOptions.requestorID,"User Not Authenticated Error")},waitForAccessEnabler:function(e){d.wait(d.Auth,"ready",function(){e.authenticate&&(e.isPlayerPage&&ae.checkPreauthorizedResources([TVEAuthOptions.requestorID]),ae.checkAuthentication()),e.authorize&&ae.checkAuthorization(TVEAuthOptions.resourceID)})},getMediaToken:function(){var e="24h"===d.get("signedInWith"),t=d.Elvis.isLoggedIn(),i=d.get("AUTH_DATA",!0),r=n.isObject(i),a=this.isProviderOnWhitelist(),o=!e&&!t,s=o&&!i&&d.HBA.checkIfHbaIsActive(),l=!!r&&a,c=!1;if(s)return void d.HBA.check();if(e&&d.fp.check(),t&&this.checkElvisStatus("checkStatus"),o){var u={authorize:!0,isPlayerPage:1};l?c=this.isTokenExpired(u.isPlayerPage):this.userNotAuthenticated(),c&&this.waitForAccessEnabler(u),this.logoutIfProviderNotOnWhitelist()}},logoutIfProviderNotOnWhitelist:function(){var e=d.get("AUTH_DATA",!0),t=n.isObject(e),i=this.isProviderOnWhitelist();!i&&t&&d.API.logout()},setMediaToken:function(e){d.getMediaTokenCallback?d.getMediaTokenCallback(e):d.triggerCallback("setMediaToken",{tokenObject:e})},setANStatus:function(e){if(1===e){if(!d.MVPD)return ae.getSelectedProvider(),void(d._waitMVPD=!0);d.Subscriber=this.createSubscriber(!0,d.MVPD,d.token),d.get("AUTH_DATA")||d.set("AUTH_DATA",{mvpd:d.MVPD})}else d.erase(["MVPD_ID","checkAZ","AUTH_DATA"]),this.reset();d.triggerCallback("checkStatusCompleted",{TVESubscriber:d.Subscriber}),TVEAuthOptions.waitScreen&&d.Overlay.hide("waitScreen")},verifyAuthorizationAndReport:function(){d.get("getAZ")&&d.MegaBeacon.report({beaconType:"action",name:"user_funnel"})},setToken:function(e,t){var i=d.get,r=d.Overlay;if(i("AUTH_DATA")||d.set("AUTH_DATA",{token:t,mvpd:d.MVPD,expirationTime:this.getTokenExpirationTime(t)}),this.verifyAuthorizationAndReport(),"getMediaToken"===d.Helper){var n={status:"authorized",token:t};return void d.Auth.setMediaToken(n)}return d.token=t,d.MVPD?(d.Subscriber=this.createSubscriber(!0,d.MVPD,d.token),void((i("checkAZ")||i("getAZ"))&&(d.triggerCallback("checkStatusCompleted",{TVESubscriber:d.Subscriber}),"true"===i("MVPD_Selected")&&(d.erase("MVPD_Selected"),d.triggerCallback("loginCompleted",{status:!0,mvpdId:d.MVPD.id}),TVEAuthOptions.successScreen?r.show(a.successMessage):TVEAuthOptions.waitScreen?r.hide(a.waitScreen):r.hide(),d.MegaBeacon.report({beaconType:"funnel",name:d.MegaBeacon.reportNames.authperf.authFinish,data:{provider:d.MVPD&&d.MVPD.id,hba:d.MegaBeacon.featureInUse.hba}}),d.MegaBeacon.featureInUse.hba=!1),d.erase(["checkAZ","getAZ","onLoad"])))):(ae.getSelectedProvider(),void(d._waitMVPD=!0))},createSubscriber:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=t.id,n=void 0===r?"":r,a=t.displayName,o=void 0===a?"":a,s=t.pickerLogoUrl,l=void 0===s?"":s,c=t.cobrandingLogoUrl,u=void 0===c?"":c,p=t.logoutLogoUrl,d=void 0===p?"":p,v=t.defaultLogoUrl,h=void 0===v?"":v;return{isLoggedIn:e,provider:{id:n,displayName:o,pickerLogoUrl:l,cobrandingLogoUrl:u,logoutLogoUrl:d,defaultLogoUrl:h},token:i}},getTokenExpirationTime:function(e){var t=0,i=!!e&&e.match(/\<ttl\>(.*?)\<\/ttl>/);return i&&i.length>1&&(t=i[1]),Date.now()+parseInt(t)},tokenRequestFailed:function(e,t){if(d.erase("AUTH_DATA"),"getMediaToken"===d.Helper){var i={status:"not-authorized",token:""};return void d.Auth.setMediaToken(i)}var r=d.get,n=d.erase;return!d.Elvis.isLoggedIn()&&"setupElvis"!==r("onLoad")&&("vipElvis"===r("signedInWith")?(n(["signedInWith"]),!1):(d.token="","true"===r("getAZ")?(n(["checkAZ","getAZ","onLoad","MVPD_Selected"]),d.Error.showMessageIfInternationalFlow(t),ae.logout(),!1):(r("checkAZ")&&(n(["checkAZ","getAZ","onLoad"]),d.Error.showMessageIfInternationalFlow(t)),void d.Overlay.hide("waitScreen"))))},dataTracker:function(e,t){function i(e){d.MegaBeacon.report({beaconType:"funnel",name:d.MegaBeacon.reportNames.authperf.authSelect,data:{provider:e,mvpdRecall:d.MegaBeacon.featureInUse.mvpdRecall}}),d.triggerCallback("providerSelected",{mvpdId:e}),d.MVPD_ID=e,d.set({MVPD_ID:e,MVPD_Selected:"true"}),d.Providers.getProviderInfo(),d.erase(["LAST_PROVIDER_ID","LAST_PROVIDER_NAME"])}var r="authenticationDetection"===e,n=r&&t[0],a="authorizationDetection"===e,o=a&&t[0],s=a&&t[0]===!1,l=s&&t[1];if("mvpdSelection"===e){var c=t[0]||null;i(c)}else o?("24h"===d.get("signedInWith")&&d.fp.forceExpire(),d.set({HBA_DISABLED:!0,CURRENT_PROVIDER_ID:t[1],CURRENT_PROVIDER_NAME:t[1],MVPD_ID:t[1],LAST_PROVIDER_ID:t[1],LAST_PROVIDER_NAME:d.MVPD&&d.MVPD.displayName})):n&&d.set({HBA_DISABLED:!0,CURRENT_PROVIDER_ID:t[1],CURRENT_PROVIDER_NAME:t[1],MVPD_ID:t[1],LAST_PROVIDER_ID:t[1]});l&&d.set("HBA_DISABLED",!0),d.Helper=null},signOut:function(e){var t,i=d.get,r="24h"===i("signedInWith"),n=d.Elvis.isLoggedIn(),a=!!i("HBA_DATA")&&d.get("HBA_UUID");if(d.erase(["CURRENT_PROVIDER_ID","CURRENT_PROVIDER_NAME","MVPD_ID","AUTH_DATA"]),d.set("HBA_DISABLED",!0),r||d.MegaBeacon.startCount("logout"),d.MegaBeacon.report({beaconType:"action",name:"logout",data:d.MegaBeacon.getInfo()}),r)e&&(d.Auth.signOutClearFlags(),d.Vip.uninit(),this.reset(),d.triggerCallback("logoutCompleted"));else if(n)d.Vip.uninit(),d.Elvis.signOut();else if(a)d.HBA.signOut();else{t=d.Subscriber&&d.Subscriber.isLoggedIn;var o=!this.isProviderOnWhitelist();d.MegaBeacon.report({beaconType:"kpi",name:"logout",data:d.MegaBeacon.getInfo()}),this.reset(),d.isSetANStatusSkip=!0,d.isAEAvailable()?ae.logout():d.Error.showMess("Auth.signOut"),t||o?d.triggerCallback("logoutCompleted"):d.Error.showMess("User Not Authenticated Error")}},signOutClearFlags:function(){d.erase(["getAZ","MVPD_ID","ELVIS_INFO","ELVIS_STATUS","signedInWith","ELVIS_METHOD","ELVIS_SUCCESS","ELVIS_NONSOCIAL","ELVIS_ISLOGGEDIN","CURRENT_PROVIDER_ID","CURRENT_PROVIDER_NAME","ELVIS_CURRENT_MVPD_ID","ELVIS_CURRENT_MVPD_NAME"])},onLoad:function(){var e=d.get("onLoad")||"none",t=d.erase;switch(e){case"User not Authorized Error":t("onLoad"),d.Error.showMess(e);break;case"setupElvis":t("onLoad"),d.Elvis.getRoadBlocker();break;default:t("onLoad")}d.get("ELVIS_SUCCESS")&&d.Overlay.show(a.elvisSuccess)},clearTveHelperValue:function(e){d.Helper===e&&(d.Helper=null)}},d.Providers={list:null,whiteList:[],_set:function(t){var i=d.MegaBeacon.reportNames.authperf;if(d.checkUserAgent(/FBAN|FBAV/i)&&d.checkUserAgent(/iphone|ipad/i))return void ae.setSelectedProvider(t);if(this.openNewMvpdWindow(),d.MegaBeacon.startCount(i.authSelect),this.browserBlocksPopup())return void d.Overlay.showProviderOverlay();ae.setSelectedProvider(t),d.MegaBeacon.saveUserPath("provider_login");var r=e.setInterval(function(){e.TVEAuthMVPDWindow.closed&&(e.clearInterval(r),d.MegaBeacon.report({beaconType:"action",name:"user_funnel"}),d.settings.locale&&d.MegaBeacon.startCount(i.authFinish),e.removeEventListener("message",n))},s["short"]),n=function a(t){"LOGIN_COMPLETE"===t.data&&(d.MegaBeacon.startCount(i.authFinish),e.clearInterval(r),e.removeEventListener("message",a))};e.addEventListener("message",n),d.Overlay.hide()},openNewMvpdWindow:function(){e.TVEAuthMVPDWindow&&TVEAuthMVPDWindow.close();var i=t.createElement("a"),r=void 0;r=d.checkUserAgent(/msie|trident/i)?i.protocol+"//"+i.hostname:"about:blank",i.href=e.location.href,e.TVEAuthMVPDWindow=e.open(r,"mvpdwindow")},browserBlocksPopup:function(){var t=e.TVEAuthMVPDWindow;return n.isUndefined(t)||n.isNull(t)},saveList:function(e){var t=36e5;return n.isUndefined(e)?void d.Error.showMess("Providers.saveList"):(this.list=e||[],d.set("MVPD_LIST",e),d.erase("providers_update"),void(e.length&&d.set("providers_update",(new Date).getTime()+t)))},loadList:function(){var e=d.get("MVPD_LIST",!0);return e?e:d.Error.showMess("Providers.loadList")},getMvpdCompleted:function(e){e&&e.mvpdList?(delete e.mvpdList.duration,d.MVPD=e.mvpdList,d.set({CURRENT_PROVIDER_ID:e.mvpdList.id,CURRENT_PROVIDER_NAME:e.mvpdList.displayName}),d._waitMVPD&&(d._waitMVPD=!1,d.get("getAZ")||d.get("checkAZ")?setToken(d.reqID,d.token):d.Auth.setANStatus(1,""))):(d.MVPD=null,d.erase(["CURRENT_PROVIDER_ID","CURRENT_PROVIDER_NAME"]))},loadWhiteList:function(e){var t=this;d.jsonp({src:d.whiteListUrl,callback:this.updateProvidersList,error:function(){d._ITSEflag?(d.Error.showMess("Internal TVE Services Error"),delete d._ITSEflag):d._ITSEflag=!0}},this),setTimeout(function(){if(!d.isWLLoaded)if(e){var i=t.loadList();i?t.updateProvidersList(i):d.Error.showMess("Can Not Load The White List")}else t.loadWhiteList(!0)},s.fiveSeconds)},updateProvidersList:function(e){if(!d.isWLLoaded){d.MegaBeacon.saveStepDuration("whitelist");var t=d.settings.locale?e.providersList:e.mvpdList;this.whiteList=t||[],this.ready=!0,d.Auth.onLoad(),d.Debug.info("whitelist received"),d.isWLLoaded=!0,d.settings.locale&&this.saveList(e.providersList||[])}},verifyWhiteList:function(e){if(this.listIsActual())return this.list;var t=this.whiteList,i={},r={};if(t&&t.length){for(var n=[],a=[],o="",s=0,l=e.length;s<l;s++)e[s].ID||(e[s].ID=e[s].id||""),i[e[s].ID.toLowerCase()]=e[s];for(s=0,l=t.length;s<l;s++)o=t[s].id.toLowerCase(),i[o]&&(t[s].pickerLogoUrl=t[s].pickerLogoUrl||i[o].logoURL||"",r={id:i[o].ID,displayName:t[s].displayName||i[o].displayName||"",pickerLogoUrl:t[s].pickerLogoUrl||null,isPrimary:t[s].isPrimary||!1,altName:t[s].altName||""},t[s].isExtended&&(r.isExtended=t[s].priority),n.push(r)),t[s].isSpecialProvider===!0&&(t[s].pickerLogoUrl=t[s].pickerLogoUrl||"",a.push({id:t[s].id,displayName:t[s].displayName||"",pickerLogoUrl:t[s].pickerLogoUrl||null,isPrimary:t[s].isPrimary||!1,altName:t[s].altName||"",isSpecialProvider:!0}));n=n.concat(a)}else d.Error.showMess("Providers.verifyWhiteList"),d.erase("MVPD_LIST");return this.saveList(n),this.list},getProviderInfo:function(){if(!d.MVPD_ID)return void this.getMvpdCompleted(null);if(d.settings.locale&&d.Providers.list){for(var e=0,t=d.Providers.list.length;e<t;e++)if(d.Providers.list[e].id===d.MVPD_ID){var i={mvpdList:d.Providers.list[e]};return void this.getMvpdCompleted(i)}this.getMvpdCompleted(null)}else{if("24h"===d.get("signedInWith")&&"true"!==d.get("MVPD_Selected"))return void d.Providers.getMvpdCompleted({mvpdList:{id:"FPS",displayName:"FPS"}});d.jsonp({src:""+d.baseUrl+d.reqID.toLowerCase()+"/providerInfo/"+d.MVPD_ID,callback:this.getMvpdCompleted},this)}},listIsActual:function(){return n.every([n.size(this.list),d.get("providers_update"),d.get("providers_update")>(new Date).getTime()])},init:function(){var e=d.get("MVPD_LIST"),t=this.whiteList;if(e)try{e=JSON.parse(e)}catch(i){e=[]}else e=[];this.list=e,this.getProviderInfo(),this.listIsActual()&&e.length&&t&&t.length?(d.MegaBeacon.saveStepDuration("whitelist"),this.ready=!0,d.Debug.info("whitelist taken from cache")):this.loadWhiteList()},isProviderOnWhitelist:function(e){var t=n.find(this.whiteList,{id:e});return!!t}},d.settings.layout={base_html:'<div id="{id}" class="tveapp_container {addClass}"><div class="tveapp_header">{header}</div><div class="tveapp_content">{content}</div>{footer}{append}</div>',base_part:{btn_close:'<a class="tveapp_button tveapp_close">Cancel</a>',btn_back:'<a class="tveapp_button tveapp_goBack">Back</a>',btn_faq:'<a class="tveapp_button tveapp_learnMore">How this works</a>',elvis_btns:'<p>Please let %displayName% know you would like access to more %reqID% full episodes</p><ul class="tveapp_elvis_buttons_list"><li><a class="tveapp_elvis_button tveapp_button_facebook" href="https://www.facebook.com/" target="_blank">Facebook</a></li><li><a class="tveapp_elvis_button tveapp_button_twitter" href="https://twitter.com/" target="_blank">Twitter</a></li><li><a class="tveapp_elvis_button tveapp_button_mail" href="mailto:sample.example.com">Contact</a></li></ul>',text_dontSeeProvider:"Don&#8217;t see Your Provider?"},selectProvider:{id:"tveapp_selectProvider",header:"%btn_back%%btn_close%",content:'<ol class="tveapp_actions"><li class="tveapp_active">1. Select provider</li> <li>2. Sign In</li> <li>3. Watch</li></ol><p class="tveapp_description">Get access to more full episodes by signing in with your TV provider <a class="tveapp_button tveapp_learnMore"></a></p><div id="tveapp_searchBox" class="tveapp_searchBox"><span class="tveapp_wrapSearch"><label class="placeholder" for="tveapp_search">Type in provider name</label><input name="search" type="text" id="tveapp_search" class="tveapp_search" autocomplete="off" value="" /></span><a class="tveapp_searchButton">GO</a></div>',footer:'<div id="providersWrapper"></div><div id="extraMvpdWrapper"></div><div class="tveapp_footbutton"><div class="viewAllProviders">View all providers</div></div><div class="tveapp_footmessage"></div>'},dontSeeUrMvpd:{id:"tveapp_dontSeeUrMvpd",header:"%btn_back%%btn_close%",content:"<div class=\"tveapp_dontSeeUrMvpdMessage\"><h5>If your provider is not listed, don't panic.</h5><p>We're working hard to get all tv providers to participate.</p></div>"},successMessage:{id:"tveapp_success",header:"%btn_close%",content:'<div class="tveapp_successMessage"><h5>CONGRATULATIONS!</h5><p><strong>You are now signed in with</strong></p><div id="tveapp_mvpdLogo"></div><p>You now have access to watch all your favorite shows.</p><p><a class="tveapp_button tveapp_close tveapp_watchNow" tvecallback="startWatching">Watch Now</a><a class="tveapp_button tveapp_signOut" onclick="TVEAuth.API.logout();">Sign Out</a></p></div>'},signOut:{id:"tveapp_signOut",header:"%btn_close%",content:'<div class="tveapp_successMessage"><h5>CONGRATULATIONS!</h5><p><strong>You are now signed in with</strong></p><div id="tveapp_signOutMvpdLogo"></div><p>You now have access to watch all your favorite shows.</p><p><a class="tveapp_button tveapp_signOut" onclick="TVEAuth.API.logout();">Sign Out</a></p></div>'},error:{id:"tveapp_error",header:"<h4>Sorry</h4>%btn_close%",content:'<p id="tveapp_error_mess"></p>'},learnMore:{id:"tveapp_learnMore",header:"<h4>Login with your provider to unlock more full episodes!</h4>%btn_close%",content:'<h5>To get these full episodes, follow the steps below.</h5><div class="tveapp_faq"></div>',footer:'<a class="tveapp_button tveapp_close">Get started</a>',append:""},pleaseWait:{id:"tveapp_pleaseWait",header:"%btn_close%",content:"Please wait..."},iframeWrapper:{id:"tveapp_iframeWrap",addClass:"mvpdWrapBox",header:"%btn_back%<h4>log in</h4>%btn_close%"},elvisLogin:{id:"tveapp_elvisLogin",header:"%btn_back%%btn_close%",content:'<h5>Please sign in with one of the following:</h5><ul class="tveapp_elvis_buttons_list"><li><a class="tveapp_elvis_button" elvisby="facebook">Facebook</a></li><li><a class="tveapp_elvis_button" elvisby="twitter">Twitter</a></li><li><a class="tveapp_elvis_button" elvisby="mail">Sign In / Register</a></li></ul>',footer:"Viacom reserves the right to discontinue access at any time"},elvisSuccess:{id:"tveapp_elvisSuccess",header:"%btn_close%",content:'<h5>Congratulations!</h5><p>You have successfully signed in</p><ul class="tveapp_elvis_buttons_list"><li><a class="tveapp_button tveapp_close tveapp_watchNow" tvecallback="startWatching">Watch Now</a></li><li><a class="tveapp_button tveapp_signOut" onclick="TVEAuth.API.logout();">Sign Out</a></li></ul>',footer:"Viacom reserves the right to discontinue access at any time"},elvisSignOut:{id:"tveapp_elvisSignOut",header:"%btn_close%",content:'<h5>Congratulations!</h5><p>You have successfully signed in</p><ul class="tveapp_elvis_buttons_list"><li><a class="tveapp_button tveapp_close tveapp_watchNow">Watch Now</a></li><li><a class="tveapp_button tveapp_signOut" onclick="TVEAuth.API.logout();">Sign Out</a></li></ul>',footer:"Viacom reserves the right to discontinue access at any time"},elvisEnded:{id:"tveapp_elvisEnded",header:"%btn_close%",content:'<h5>Your full access has ended.</h5><p>Don\'t panic. We are working hard to get %displayName% to participate.</p><div class="tveapp_buttons_row"><a class="tveapp_button tveapp_close">OK</a></div>',footer:"%elvis_btns%"},elvisTerminated:{id:"tveapp_elvisTerminated",header:"%btn_close%",content:'<p><strong>At the request of %displayName%, %reqID% is no longer able to provide %displayName% customers with full access to the %reqID% website.</strong></p><p>We are working hard to restore your full access.</p><div class="tveapp_buttons_row"><a class="tveapp_button tveapp_close">OK</a></div>',footer:"%elvis_btns%"},vipLogin:{id:"tveapp_vipLogin",header:"%btn_back%%btn_close%",content:'<div id="iui-component"></div>',footer:"Viacom reserves the right to discontinue access at any time"},fpSuccess:{id:"tveapp_fpSuccess",header:"%btn_close%",content:'<div style="text-align:center;"><p>Your 24-hour viewing pass has now started</p><p class="tveapp_fpexpires">When your viewing pass expires, sign in with your tv provider username and password for unlimited access to all full episodes</p><p class="tveapp_footmessage"><span class="">Your preview will end in</span><span class="fp-timer">23:59</span></p><p><a class="tveapp_close tveapp_watchNow" tvecallback="startWatching">Watch now</a></p></div>',footer:""},fpSignOut:{id:"tveapp_fpSignOut",header:"%btn_close%",content:'<div style="text-align:center;"><p>You have active Free Preview access!</p><p>Free Preview will end in <span class="fp-timer">23:59</span></p><p><a class="tveapp_close" tvecallback="startWatching">Watch videos</a> or <a class="tveapp_close" onclick="TVEAuth.API.logout();">Sign Out</a></p></div>',footer:""}},d.Overlay={clickEvent:"click.tveevent",isClosedByUser:!0,list:{},embeddedOverlayElementClass:u.embeddedOverlayElementClass,get:function(e,t){if(this.list[e])return this.list[e];var o,s="<!-- TVEAuth.Overlay: "+e+" -->",l=TVEAuthOptions,c=d.settings.layout,u=d.MVPD;s=c[e]?this.render(c[e]):s;var p=a.selectProvider,v=a.selectProviderNew,h=a.learnMore,g=a.dontSeeUrMvpd,f=a.signOut,m=a.successMessage,E=a.elvisEnded,b=a.elvisTerminated,_=a.fpSuccess,S=a.fpSignOut,y=a.error;switch(e){case v:if(s==="<!-- TVEAuth.Overlay: "+e+" -->"){var A=JSON.parse(d.get("MVPD_LIST")),I='<div class="getFullMvpdListButtonWrapper"><a id="getFullMvpdListButton" class="getFullMvpdListButton">see all providers</a></div>',D='<div class="tveapp_getFreePreviewButtonWrapper"></div>';o=this.getList(A,"inlineView")||[],s=i('<div id="primaryListWrapper" class="primaryListWrapper"></div>').append(o[1]).add(i(I+D)),i('<div id="tveapp_pickerWrapper" class="mvpdPickerWrapper"></div>').append(s),this.attachEvents(s,e),d.Providers.list.length&&(this.list[e]=s)}return s.addClass(d.Overlay.embeddedOverlayElementClass),s;case p:s=r(s),o=this.getList(d.Providers.list,"defaultView")||[],s.find("#providersWrapper").append(o[0]),l.primaryList&&s.find("#extraMvpdWrapper").append(o[1]).find(".tveapp_ePL-link").append("<i></i>"),d.Providers.list.length&&(this.list[e]=s);break;case h:if(s=r(s),!n.isObject(TVEAuthFAQ))return this.hide(),!1;var P=TVEAuthFAQ.items.map(function(e){return"<dt>"+e[0]+"</dt><dd>"+e[1]+"</dd>"}).join(""),k="<dl>"+P+"</dl>";s.find(".tveapp_faq").html(k),TVEAuthFAQ.toggleable&&s.find(".tveapp_faq").addClass("toggleable"),this.list[e]=s;break;case g:if(d.settings.freePreview){var M=c[e].content;"24h"===d.get("signedInWith")||"true"===d.get("isFPexpired")?c[e].content=c[e].content+'<div class="tveapp_footmessage"></div>':d.Elvis.isNonSocial()||(c[e].content=""+c[e].content+d.settings.freePreview.html),s=r(this.render(c[e])),c[e].content=M}else s=r(this.render(c[e]));break;case f:case m:var T=t&&t.logoutLogoUrl?t.logoutLogoUrl:u&&u.logoutLogoUrl?u.logoutLogoUrl:"",w=t&&t.displayName?t.displayName:u&&u.displayName?u.displayName:"",V=t&&t.id?t.id:u&&u.id?u.id:"",L=T?'<img src="'+T+'" alt="'+V+'" title="'+w+'" />':"";s=r(s),"successMessage"===e?(s.find("#tveapp_mvpdLogo").html(L),s.find("#tveapp_mvpdName").text(w)):s.find("#tveapp_signOutMvpdLogo").html(L);break;case E:case b:w=t&&t.displayName?t.displayName:u?u.displayName:"Your provider",s=s.replace(/%displayName%/g,w),s=s.replace(/%reqID%/g,d.reqID),s=r(s),this.list[e]=s;break;case _:case S:s=r(s),d.Overlay.timer(s.find(".fp-timer")),this.list[e]=s;break;case y:var O=t||"";s=r(s),s.find("#tveapp_error_mess").html(O),this.list[e]=s;break;default:s=r(s),this.list[e]=s}return"#comment"!==s[0].nodeName&&d.Overlay.attachEvents(s,e),s.appendTo(r("#tveapp_wrap"))},render:function(e){function t(e,t){for(var i in t)e=e.replace(new RegExp("{"+i+"}","g"),t[i]);return e}function i(e,t){for(var i in t)e=e.replace(new RegExp("%"+i+"%","g"),t[i]);return e}var r=d.settings.layout,n={id:e.id,addClass:e.addClass||"",header:e.header||"",content:e.content||"",footer:e.footer?'<div class="tveapp_footer">'+e.footer+"</div>":"",append:e.append||""};return i(t(r.base_html,n),r.base_part)},init:function(){var e=d.Overlay;d.Overlay.dragging=!1,d.settings.layout.base_part.base_url_ver=d.awsUrl,d.Overlay.createWrapObject(),TVEAuthOptions.fullScreenActivated&&r("html").addClass("tveapp_fullScreenActivated"),r("#tveapp_wrap").on("mouseup.tveevent touchend.tveevent",function(e){r(e.target).closest("#tveapp_search, #providersWrapper").length||(d.isGetFullListButtonPressed||(r("#tveapp_selectProvider").removeClass("tveapp_searchActivated"),(!d.get("isFPexpired")||d.get("isFPexpired")&&d.get("FP_EXPIRATION_DATE"))&&r("#tveapp_selectProvider .tveapp_footmessage").show()),r("#tveapp_search").blur()),r(e.target).closest("#providersWrapper").length&&!r(e.target).closest(".tveapp_pL-link").length&&(e.preventDefault(),e.stopPropagation())}).on("touchmove",function(){d.Overlay.dragging=!0}).on("touchstart",function(){d.Overlay.dragging=!1}).on(this.clickEvent,function(t){var i=t.target.classList,n=d.erase,a=r(t.target).closest(".tveapp_container")[0];if(a)if(a=a.id,i.contains("tveapp_close")){switch(d.isGetFullListButtonPressed=null,a){case"tveapp_selectProvider":e.clearSearchField(),n(["MVPD_Selected","onLoad","getAZ","CURRENT_PROVIDER_ID","CURRENT_PROVIDER_NAME"]);break;case"tveapp_elvisLogin":e.clearSearchField(),n(["MVPD_Selected","onLoad","getAZ","ELVIS_CURRENT_MVPD_ID","ELVIS_CURRENT_MVPD_NAME"]),d.set("isSetANStatusSkip","true");break;case"tveapp_pleaseWait":n("onLoad");break;case"tveapp_elvisSuccess":n(["onLoad","ELVIS_SUCCESS"]);break;case"tveapp_elvisEnded":n("ELVIS_ENDEDMESSAGE");break;case"tveapp_elvisTerminated":n("ELVIS_TERMINATEDMESSAGE");break;case"tveapp_iframeWrap":e.clearSearchField(),e.closeIFrame(),n(["MVPD_Selected","onLoad","getAZ"]),d.set("isSetANStatusSkip","true");break;case"tveapp_dontSeeUrMvpd":n(["MVPD_Selected","onLoad","getAZ"]);break;case"tveapp_fpSuccess":e.clearSearchField(),d.Vip.uninit();break;case"tveapp_vipLogin":var o=d.Vip.flow;"24h"===o?(e.clearSearchField(),d.Vip.uninit()):"vipElvis"===o?d.Overlay.onVipElvisOverlayClose():"resetToken"===o?d.Vip.updateUrl():d.Error.showMess("Error happened when was closed #tveapp_vipLogin")}switch(a){case"tveapp_selectProvider":case"tveapp_elvisLogin":case"tveapp_elvisEnded":case"tveapp_elvisTerminated":case"tveapp_dontSeeUrMvpd":case"tveapp_vipLogin":d.MegaBeacon.report({beaconType:"action",name:"user_funnel"})}e.hide()}else if(i.contains("tveapp_goBack"))switch(d.isGetFullListButtonPressed=null,a){case"tveapp_selectProvider":e.clearSearchField();break;case"tveapp_iframeWrap":e.clearSearchField(),d.erase(["ELVIS_CURRENT_MVPD_ID","ELVIS_CURRENT_MVPD_NAME"]),e.goBackToTheProvidersOverlay(),e.forceHideKeyboard();break;case"tveapp_elvisLogin":e.clearSearchField(),e.goBackToTheProvidersOverlay();break;case"tveapp_dontSeeUrMvpd":e.goBackToTheProvidersOverlay();break;case"tveapp_learnMore":TVEAuthFAQ.backOverlay&&d.settings.layout[TVEAuthFAQ.backOverlay]?(e.show(TVEAuthFAQ.backOverlay),TVEAuthFAQ.backOverlay=null):e.hide();break;case"tveapp_vipLogin":o=d.Vip.flow,e.clearSearchField(),d.Vip.uninit(),e.goBackToTheProvidersOverlay(),d.erase(["MVPD_ID","MVPD_Selected","ELVIS_CURRENT_MVPD_ID","ELVIS_CURRENT_MVPD_NAME"]),"resetToken"===d.Vip.flow&&d.Vip.updateUrl()}else i.contains("tveapp_signOut")?e.mark(r(t.target)):i.contains("tveapp_24h")&&(t.preventDefault(),d.fp.init())}),d.Overlay.noblur=!1},clearSearchField:function(){var e=d.Overlay.list[a.selectProvider];e&&(d.isGetFullListButtonPressed||e.removeClass("tveapp_quickSearch tveapp_searchActivated"),e.find("#tveapp_search").val("").blur(),e.find(".tveapp_pL-item").removeAttr("style"),r("#tveapp_selectProvider .tveapp_footmessage").show())},clearLastProvider:function(){var e=d.get("LAST_PROVIDER_ID");e&&d.erase(["LAST_PROVIDER_ID","LAST_PROVIDER_NAME"])},attachEvents:function(o,s){var p=d.Overlay,v=a.selectProvider,h=a.selectProviderNew,g=a.vipLogin,f=a.elvisLogin;return s===h?(o.on(this.clickEvent,function(e){var t;if(e.preventDefault(),!d.Overlay.dragging){if(e.target.classList.contains("tveapp_24h"))return e.preventDefault(),void d.fp.init();if(e.target.hasAttribute("mvpdid"))t=e.target;else{if(!e.target.parentNode.hasAttribute("mvpdid"))return;t=e.target.parentNode}d.Auth.get(),d.Providers._set(t.getAttribute("mvpdid"))}}),o.find("a[elvismvpd]").on(this.clickEvent,function(e){if(e.preventDefault(),!d.Overlay.dragging){p.clearSearchField();var t=i(this),r=t.attr("elvismvpd"),n=t.find("img").attr("alt")||t.find("span").text();d.MVPD={id:r,displayName:n},d.Helper="getAZ",d.Vip.flow="vipElvis",d.Elvis.mvpdSelected()}}),o.find("#getFullMvpdListButton").on(this.clickEvent,function(e){e.preventDefault(),e.stopPropagation(),d.Overlay.dragging||(p.clearSearchField(),p.clearLastProvider(),d.API.login(),d.isGetFullListButtonPressed=!0)}),!1):(s===v?(o.find("#tveapp_search").on("touchstart",function(e){this!==t.activeElement&&(e.preventDefault(),this.focus())}).on("focus",function(){d.Overlay.noblur=!0,setTimeout(function(){d.Overlay.noblur=!1},l.mediumLong),r(this).closest(".tveapp_container").find(".placeholder").hide(),r("#tveapp_selectProvider").addClass("tveapp_searchActivated")}).on("blur",function(){return d.Overlay.noblur?void r(this).focus():void(""===this.value&&r(this).closest(".tveapp_container").find(".placeholder").show())}).on("change.tveevent input.tveevent keydown.tveevent",function(t){var i=[c.upArrow,c.downArrow].includes(t.keyCode),n=" "+r.trim(this.value.toLowerCase()),a="",o=r("#providersWrapper"),s=o.find(".tveapp_pL-item");1===n.length?s.show():s.each(function(){a=" "+r(this).find(".tveapp_pL-link").attr("tveapp_alt").toLowerCase().replace(/,/g," "),r(this).toggle(a.indexOf(n)!==-1)}),s=s.add(o.find(".tveapp_pL-item-extra"));var l=0;r(e).height()===r("#tveapp_selectProvider").height()&&(l=0,parseInt(r(".tveapp_footer").css("margin-top"),10)&&(l=""+l+parseInt(r(".tveapp_footer").css("margin-top"),10)),parseInt(r(".tveapp_footer").css("border-top-width"),10)&&(l=""+l+parseInt(r(".tveapp_footer").css("border-top-width"),10)));var u=s.filter(".highlight");if(i){t.preventDefault();var p,d=o.offset().top+l,v=o.height(),h=.5,g=v*h;t.keyCode===c.downArrow?u.length?u.nextAll(":visible:first").length&&u.removeClass("highlight").nextAll(":visible:first").addClass("highlight"):s.filter(":visible:first").addClass("highlight"):t.keyCode===c.upArrow&&u.prevAll(":visible:first").length&&u.removeClass("highlight").prevAll(":visible:first").addClass("highlight"),p=s.filter(".highlight").offset().top,p>d+g?o.scrollTop(o.scrollTop()+p-d-g):p<d&&o.scrollTop(o.scrollTop()+p-d)}else t.keyCode===c.enter?u.find("a").trigger(this.clickEvent):t.keyCode&&(u.removeClass("highlight"),o.scrollTop(0))}),o.find("#tveapp_searchBox .placeholder").on("touchstart",function(e){e.preventDefault(),e.stopPropagation(),r(this).hide(),r("#tveapp_search").focus()}),o.find(".tveapp_searchButton").on(this.clickEvent,function(){p.clearSearchField()}),o.on("mouseover.tveevent",function(e){(e.target.classList.contains("tveapp_pL-link")||e.target.parentNode.classList.contains("tveapp_pL-link"))&&(r(e.target).closest("ul").find(".highlight").removeClass("highlight"),r(e.target).closest("li").addClass("highlight"))}),o.find(".tveapp_close, #tveapp_providerNotListed").on(this.clickEvent,function(){d.triggerCallback("selectProviderPickerClosed")}),o.find("#tveapp_providerNotListed").on(this.clickEvent,function(){p.clearSearchField(),p.show(a.dontSeeUrMvpd),d.triggerCallback("providerNotListedButtonSelected")}),o.on(this.clickEvent,function(e){var t;if(e.preventDefault(),!d.Overlay.dragging){if(e.target.hasAttribute("mvpdid"))t=e.target;else{if(!e.target.parentNode.hasAttribute("mvpdid"))return;t=e.target.parentNode}p.mark(r(t)),"checkAZ"!==d.Helper&&"checkAN"!==d.Helper||d.set("onLoad",d.Helper),p.clearSearchField(),d.Providers._set(t.getAttribute("mvpdid"))}}),o.find("a[elvismvpd]").on(this.clickEvent,function(e){if(e.preventDefault(),!d.Overlay.dragging){p.clearSearchField();var t=r(this),i=t.attr("elvismvpd"),n=t.find("img").attr("alt")||t.find("span").text();d.MVPD={id:i,displayName:n},d.Helper="getAZ",d.Vip.flow="vipElvis",d.Elvis.mvpdSelected()}}),o.find(".viewAllProviders").on(this.clickEvent,function(){r(this).closest(".tveapp_container").addClass("tveapp_searchActivated"),r("#tveapp_search").focus(),r("#tveapp_selectProvider .tveapp_footmessage").hide(),d.MegaBeacon.saveUserPath("all_providers"),d.isGetFullListButtonPressed=null}),o.find(".tveapp_button.tveapp_learnMore").on(this.clickEvent,function(){if(d.MegaBeacon.report({beaconType:"action",name:"more_info"}),d.triggerCallback("learnMoreButtonClicked"),n.isObject(TVEAuthFAQ)){var e=r(this).closest(".tveapp_container").attr("id");for(var t in d.settings.layout)d.settings.layout[t].id===e&&(TVEAuthFAQ.backOverlay=t);p.show(a.learnMore)}})):s===g?o.on("click",function(e){function t(){return"24h"===d.Vip.flow?"freePreviewPickedMethod":"specialPreviewPickedMethod"}var i=e.target.getAttribute("data-iui-authentication"),r=u.freePreviewId,n=u.specialFreePreviewId,a=d.Vip.is24hFlow()?r:n;i&&(d.set("ELVIS_METHOD",i),d.MVPD={displayName:a,id:a},d.MegaBeacon.report({beaconType:"action",name:"start_fps",data:d.MegaBeacon.getInfo({social_media:i})}),d.triggerCallback(t(),{method:i,mvpdObj:d.MVPD}))}):s===f&&o.find("a[elvisby]").on(this.clickEvent,function(){var e=r(this).attr("elvisby");p.mark(r(this)),d.Elvis.signIn(e)}),o.find("[tvecallback=startWatching]").on(this.clickEvent,function(){d.triggerCallback("startWatchingNowButtonClicked")}),o.find("[tvecallback=mvpdPickerClosed]").on(this.clickEvent,function(){d.triggerCallback("mvpdPickerClosed")}),void o.find(".tveapp_faq.toggleable").on(this.clickEvent,function(e){"dt"===e.target.nodeName.toLowerCase()&&r(e.target).next("dd").slideToggle()}))},mark:function(e){d.wrapObj.find(".tveapp_inaction-holder").removeClass("tveapp_inaction-holder").find(".tveapp_inaction").remove(),e&&e.addClass("tveapp_inaction-holder").append('<span class="tveapp_inaction"></span>')},show:function(e,t){var n=a.selectProvider,o=a.selectProviderNew,s=a.dontSeeUrMvpd,l=a.fpSuccess,c=[n,s,o,l];if(e!==o){d.wrapObj.show(),r("html, body").addClass("tveapp_modalOpened");var u=r(".tveapp_container:visible");if("current"===e){if(u.length)return;e=d.selectProviderOverlayName}this.mark(),u.hide()}else this.mark();if(d.isGetFullListButtonPressed)this.get(e,t).show(),i("#tveapp_selectProvider").closest(".tveapp_container").addClass("tveapp_searchActivated"),i("#tveapp_search").focus(),i("#tveapp_selectProvider .tveapp_footmessage").hide();else if(e===o){var p=this.get(e,t);d.fp.expirationDate=d.fp.expirationDate||d.get("FP_EXPIRATION_DATE"),i("#"+d.getMvpdPickerId+" > ."+d.Overlay.embeddedOverlayElementClass).remove(),i("#"+d.getMvpdPickerId).append(p).show(),d.getMvpdPickerCallback(d.Subscriber)}else this.get(e,t).show();c.includes(e)&&this.updFPMessage(e,t),this.reportRecallSelectProviderToMegaBeacon(e),this.setMegaBeaconUserPath(e)},reportRecallSelectProviderToMegaBeacon:function(e){var t=["selectProviderNew","selectProvider"],i=t.includes(e);i&&(d.MegaBeacon.report({beaconType:"funnel",name:d.MegaBeacon.reportNames.authperf.authStart,data:{mvpdRecall:d.MegaBeacon.featureInUse.mvpdRecall}}),d.MegaBeacon.featureInUse.mvpdRecall=!1)},setMegaBeaconUserPath:function(e){var t={selectProvider:"top_providers",successMessage:"provider_success",dontSeeUrMvpd:"provider_not_listed",elvisSuccess:"sfps_success",elvisEnded:"sfps_ended",elvisTerminated:"sfps_terminated",fpSuccess:"fps_success",vipLogin:"24h"===d.Vip.flow?"fps_login":"sfps_login"},i=t[e];i&&d.MegaBeacon.saveUserPath(i)},updFPMessage:function(e,t){var n="fp24Ready";if(t=t||d.getMvpdPickerId,!d.settings.FPisActive||d.Elvis.isNonSocial())r(".tveapp_footmessage, .tveapp_getfp, .tveapp_24h, .tveapp_getFreePreviewButtonWrapper").remove(),n="fp24Disabled";else if("24h"===d.get("signedInWith"))r(".tveapp_footmessage, .tveapp_getFreePreviewButtonWrapper").html(d.settings.freePreview.remainTimeMessage),d.Overlay.timer(i(".fp-timer")),n="fp24Started";else if("true"===d.get("isFPexpired")){var o=d.fp.expirationDate||+d.get("FP_EXPIRATION_DATE"),s=l.daysInWeek*l.dayInSeconds*l.millisInSec;o&&new Date<o+s?(r(".tveapp_footmessage, .tveapp_getFreePreviewButtonWrapper").html(d.settings.freePreview.expiredMessage),n="fp24Expired"):(d.erase("FP_EXPIRATION_DATE"),r(".tveapp_footmessage, .tveapp_getFreePreviewButtonWrapper").hide(),n="fp24Disabled")}else r(".tveapp_footmessage, .tveapp_getFreePreviewButtonWrapper").html(d.settings.freePreview.trySignInMessage),n="fp24Ready";i("#"+t).attr("data-tvefp24",n);var c=[a.selectProvider,a.selectProviderNew],u=c.includes(e);u&&d.triggerCallback("signInPageCompleted")},hide:function(t){function i(){r("html, body").removeClass("tveapp_modalOpened"),d.Overlay.forceHideKeyboard(),d.wrapObj.hide()}function o(t){t=t[0];var i=e.getComputedStyle(t);return"none"!==i.display&&!/display:\s?none/.test(t.getAttribute("style"))}var s,l;if(t){if(n.isString(t))l=this.list[t],l&&o(l)&&(l.hide(),s=!0);else for(var c=0,u=t.length;c<u;c++)l=this.list[t[c]],l&&o(l)&&(l.hide(),s=!0);s&&i()}else{for(var p in this.list)p!==a.selectProviderNew&&this.list[p].hide();i()}},forceHideKeyboard:function(){/iphone|ipad/i.test(navigator.userAgent)&&(r("body").append('<input id="tveHiddenInput" type="text" style="position:absolute;top:-9999px;font-size:20px;" />'),r("#tveHiddenInput").focus().blur().remove())},getList:function(e){var t=e?e.length:0,i=[],r=[],a="",o=12,s=function(e){var t=e.isSpecialProvider===!0?"elvismvpd":"mvpdid";return'\n                <li class="tveapp_ePL">\n                    <a '+t+'="'+e.id+'"\n                        class="tveapp_ePL-link"><img src="'+e.pickerLogoUrl+'"\n                            alt="'+e.displayName+'" /></a>\n                </li>'};if(!t)return void d.Error.showMess("Providers.getList");for(var l=0;l<t;l++)a=e[l].isSpecialProvider===!0?"elvismvpd":"mvpdid",e[l].altName.replace(", ","; "),i[l]='\n                <li class="tveapp_pL-item">\n                    <a '+a+'="'+e[l].id+'" class="tveapp_pL-link" tveapp_alt="'+e[l].displayName+", "+e[l].altName+'">\n                        <span>'+e[l].displayName+"</span>\n                    </a>\n                </li>",e[l].isPrimary===!0&&r.push(s(e[l]));if(r.length<o){var c=e.filter(function(e){return n.isNumber(e.isExtended)}).sort(function(e,t){return e.isExtended-t.isExtended}).slice(0,o-r.length);for(l=0;l<c.length;l++)c[l]=s(c[l]);r=r.concat(c)}var u=i.join("");return['<ul class="tveapp_providersList">\n                '+u+'\n                <li class="tveapp_pL-item-extra">\n                    <a id="tveapp_providerNotListed" class="tveapp_pL-link">'+d.settings.layout.base_part.text_dontSeeProvider+"</a>\n                </li>\n            </ul>",'<ul class="tveapp_extraMvpdList" tveapp-index=" '+r.length+'"> '+r.join("")+"</ul>"]},timer:function(e){function t(){if(d.fp.duration<1&&"24h"===d.get("signedInWith"))return d.fp.onSessionExpire(),void d.Overlay.updFPMessage();var r=l.hourInMinutes,a=l.minuteInSeconds,o=d.fp.duration,c=Math.floor(o/r/a),u=o-c*r*a,p=Math.floor(u/a),v=i(c)+":"+i(p);e?n.isFunction(e.html)?e.html(v):e.innerHTML=v:console.log(v),setTimeout(t,s.second)}function i(e){var t=10,i=e<t;return i?"0"+e:e}t()},createIFrame:function(t,i){var o=r(e).width(),s=.5;o<t&&(t=o),this.get("iframeWrapper").css({"margin-left":-t*s,width:320});var l=r('<iframe id="mvpdframe" name="mvpdframe"></iframe>').css({width:t,height:i,background:"#fff",frameborder:0,border:0,display:"block"});r("#mvpddivWrap").length?r("#mvpddivWrap").html(l):r("#tveapp_iframeWrap .tveapp_content").html(l),this.show(a.iframeWrapper),this.isClosedByUser=!1,n.isUndefined(e.TVEAuthMVPDWindow)||TVEAuthMVPDWindow.close()},closeIFrame:function(){this.isClosedByUser=!0,r("#mvpdframe").remove(),this.hide("iframeWrapper")},onVipElvisOverlayClose:function(){d.Auth.clearTveHelperValue("getAZ"),d.Overlay.clearSearchField(),d.Vip.uninit(),d.Overlay.showProviderOverlay(),d.erase(["MVPD_Selected","onLoad","getAZ","ELVIS_CURRENT_MVPD_ID","ELVIS_CURRENT_MVPD_NAME"])},createWrapObject:function(){var e='\n            <div class="tveapp_back" style="display:none;"></div>\n            <div id="tveapp_wrap" class="tveapp_wrap" style="display:none;">\n                <div id="AccessEnablerDiv"></div>\n                <input id="selectedProvider" type="hidden"/>\n            </div>';d.wrapObj=r(e).appendTo(d.settings.wrapContainer)},initPickerElement:function(e){var t="tveapp_undefined_element";e?d.getMvpdPickerId=e:(r(d.settings.wrapContainer).append('<div id="'+t+'"></div>'),d.getMvpdPickerId=t)},showProviderOverlay:function(){d.Overlay.show(d.selectProviderOverlayName)},goBackToTheProvidersOverlay:function(){var e=d.selectProviderOverlayName===o.embedded,t=d.Overlay;e?t.hide():t.show(o.plain)}},d.Elvis={isLoggining:!1,isLogUidEnabled:!0,Helper:"",mvpdId:null,ucid:null,MVPD:{id:"sfps",displayName:"SFPS"},setupFlag:!1,save:function(){d.set("ELVIS_INFO",TVEAuthElvisObject)},init:function(){TVEAuthElvisObject=d.get("ELVIS_INFO",!0)||{},TVEAuthElvisObject["function"]="runFromCache",this.mvpdId=d.get("ELVIS_CURRENT_MVPD_ID")},isNonSocial:function(){return/nick/i.test(d.reqID)},mvpdSelected:function(){d.jsonp({src:""+d.baseUrl+d.reqID.toLowerCase()+"/providerInfo/"+d.MVPD.id,callback:this.getMvpdCompleted,data:d.Elvis.getData()},this),d.set({MVPD_ID:d.MVPD.id,ELVIS_CURRENT_MVPD_ID:d.MVPD.id,ELVIS_CURRENT_MVPD_NAME:d.MVPD.displayName}),d.MegaBeacon.startCount(d.MegaBeacon.reportNames.authperf.authSelect),d.triggerCallback("providerSelected",{mvpdId:d.MVPD.id+":sfps"}),d.Overlay.show("pleaseWait"),this.isNonSocial()?this.signIn("nonSocial"):d.Vip.init()},getMvpdCompleted:function(e){e.mvpdList&&(delete e.mvpdList.duration,delete e.mvpdList.endDate,r.extend(TVEAuthElvisObject,e.mvpdList),this.save())},check:function(){TVEAuthElvisObject.expiredDate>(new Date).getTime()?(TVEAuthElvisObject["function"]="runFromCache",d.Debug.info("SFPS check started from cache"),this.requestCompleted(TVEAuthElvisObject)):this.isNonSocial()?this.checkStatusWithoutSocial():this.checkStatus()},checkStatus:function(){var e=d.Elvis.getData({uuid:TVEAuthElvisObject.ucid});d.Debug.info("SFPS check started"),d.jsonp({src:d.fpsUrl+"special/html5/checkelvis",data:e,callback:this.requestCompleted},this),d.set("ELVIS_STATUS","isActive")},checkStatusWithoutSocial:function(){var e=TVEAuthElvisObject,t=d.get("ELVIS_NONSOCIAL",!0)||{},i=(new Date).getTime();d.set("ELVIS_STATUS","isActive"),t.accessDuration>i?(e["function"]="runFromCache",e.expiredDate=(new Date).getTime()+l.twelveHoursinMillis,this.requestCompleted(e)):t.refreshDuration>i?(d.Debug.info("SFPS check started"),d.jsonp({src:d.fpsUrl+"special/html5/checkelvis",data:d.Elvis.getData({providerId:t.mvpdid}),callback:this.requestCompleted},this)):(d.erase(["MVPD_ID","ELVIS_INFO","ELVIS_METHOD","ELVIS_SUCCESS","ELVIS_NONSOCIAL","ELVIS_ISLOGGEDIN","ELVIS_CURRENT_MVPD_ID","ELVIS_CURRENT_MVPD_NAME"]),TVEAuthElvisObject={},d.Elvis.save(),d.Auth.check(!0))},requestCompleted:function(e){var t=e||{},i=TVEAuthElvisObject,n=d.Elvis,a=d.get("ELVIS_METHOD")||d.Vip.method;switch(d.set("HBA_DISABLED",!0),t["function"]){case"setupDevice":if(d.Debug.info("SFPS setup completed"),"success"===t.status)if(i.token=t.token||"",i.duration=parseInt(t.duration)||0,i.isActive=t.isActive||!1,i.expiredDate=(new Date).getTime()+t.tokenTTL,d.MVPD={id:i.id,displayName:i.displayName},n.MVPD={id:i.id+":sfps",displayName:i.displayName+":SFPS"},t.duration<1)d.set("ELVIS_ENDEDMESSAGE","true"),d.triggerCallback("specialPreviewExpiredWithProvider",{mvpdObj:n.MVPD}),d.Elvis.signOut(),i.isWarnMessShowed=!0;else if(t.isActive){"24h"===d.get("signedInWith")&&d.fp.forceExpire(),d.set({CURRENT_PROVIDER_ID:i.id,CURRENT_PROVIDER_NAME:i.displayName,ELVIS_ISLOGGEDIN:"true",ELVIS_SETUP:"true",MVPD_ID:i.id,signedInWith:"vipElvis"}),d.Subscriber={isLoggedIn:!0,provider:{id:"sfps",displayName:"SFPS"},token:t.token},"checkStatus"!==d.Helper&&"getAZ"!==d.Helper||d.triggerCallback("checkStatusCompleted",{TVESubscriber:d.Subscriber}),d.erase("ELVIS_HELPER"),d.triggerCallback("specialPreviewSucceedLoginForMethod",{method:a,mvpdObj:n.MVPD}),TVEAuthOptions.elvisSuccessScreen?(d.Overlay.show("elvisSuccess"),d.set("ELVIS_SUCCESS","on")):d.Overlay.hide(["elvisLogin","pleaseWait","elvisSuccess"]);var o={isLoggedIn:!0,isLoggedOut:!1};if(r.extend(i,o),this.isNonSocial()){var s={token:t.token,mvpdid:i.id,reqID:d.reqID,accessDuration:t.accessDuration,refreshDuration:t.refreshDuration};d.set("ELVIS_NONSOCIAL",s)}d.MegaBeacon.report({beaconType:"funnel",name:d.MegaBeacon.reportNames.authperf.authFinish,data:{provider:d.MVPD&&d.MVPD.id,hba:d.MegaBeacon.featureInUse.hba}}),d.MegaBeacon.featureInUse.hba=!1,d.MegaBeacon.report({beaconType:"action",name:"user_funnel"})}else i.terminatedServiceMessageAvailable&&(d.Overlay.show("elvisEnded"),d.set("ELVIS_ENDEDMESSAGE","true"),d.triggerCallback("specialPreviewLockedWithProvider",{mvpdObj:n.MVPD}),d.Elvis.signOut());else d.Error.showMess(t.error),d.erase("ELVIS_SETUP");d.erase("onLoad");break;case"checkDevice":if(d.Debug.info("SFPS check completed"),"success"===t.status){var l=t.providers;if(l&&l.length){var c=d.Elvis.getLastLoggedInOrFirstProvider(l);if(i.token=c.token||"",i.duration=c.duration||0,i.isActive=c.isActive||!1,i.expiredDate=(new Date).getTime()+c.tokenTTL,i.id=d.get("ELVIS_CURRENT_MVPD_ID"),i.displayName=d.get("ELVIS_CURRENT_MVPD_NAME"),d.MVPD={id:i.id,displayName:i.displayName},n.MVPD={id:i.id+":sfps",displayName:i.displayName+":SFPS"},c.isLoggedIn){if(d.Debug.info("Elvis provider is logger in"),d.set({ELVIS_ISLOGGEDIN:"true",CURRENT_PROVIDER_ID:i.id,CURRENT_PROVIDER_NAME:i.displayName,signedInWith:"vipElvis"}),"checkStatus"===d.Helper||"getAZ"===d.Helper)d.Subscriber={isLoggedIn:!0,provider:{id:"SFPS",displayName:"SFPS"},token:i.token},d.triggerCallback("checkStatusCompleted",{TVESubscriber:d.Subscriber});else if("getMediaToken"===d.Helper){var u={status:"authorized",token:i.token};d.Auth.setMediaToken(u)}o={isLoggedIn:!0,isLoggedOut:!1},d.get("ELVIS_SUCCESS")&&d.Overlay.show("elvisSuccess"),r.extend(i,o),this.isNonSocial()&&(s={token:c.token,mvpdid:i.id,reqID:d.reqID,accessDuration:c.accessDuration,refreshDuration:c.refreshDuration},d.set("ELVIS_NONSOCIAL",s))}else d.Debug.info("Elvis provider is not logger in"),c.duration<1?d.Elvis.onElvisEnded():i.isActive?d.API.logout():(i.terminatedServiceMessageAvailable=!1,d.Elvis.onElvisTerminated())}else if(d.Debug.info("No Elvis providers specified"),"getMediaToken"===d.Helper)u={status:"not-authorized",token:""},d.Auth.setMediaToken(u);else{var p={isLoggedIn:!1,token:null,provider:null};d.triggerCallback("checkStatusCompleted",{TVESubscriber:p}),d.API.logout()}}else d.Error.showMess(t.error),d.erase("ELVIS_ISLOGGEDIN");break;case"logoutDevice":d.Debug.info("SFPS logout completed"),d.Overlay.hide(["elvisSuccess","elvisSignOut"]),this.setupFlag=!1,d.MegaBeacon.report({beaconType:"kpi",name:"logout",data:d.MegaBeacon.getInfo()}),d.Auth.signOutClearFlags(),d.triggerCallback("logoutCompleted"),"success"!==t.status?d.Error.showMess(t.error):d.get("ELVIS_ENDEDMESSAGE")?(d.Overlay.show("elvisEnded"),d.erase("ELVIS_ENDEDMESSAGE")):d.get("ELVIS_TERMINATEDMESSAGE")&&(d.Overlay.show("elvisTerminated"),d.erase("ELVIS_TERMINATEDMESSAGE")),d.Auth.reset(),TVEAuthElvisObject={};break;case"runFromCache":d.MVPD={id:i.id||d.get("CURRENT_PROVIDER_ID"),displayName:i.displayName||d.get("CURRENT_PROVIDER_NAME")},n.MVPD={id:d.MVPD.id+":sfps",displayName:d.MVPD.displayName+":SFPS"},i.isActive?i.duration<1?(d.set("ELVIS_ENDEDMESSAGE","true"),d.Overlay.show("elvisEnded"),d.triggerCallback("specialPreviewExpiredWithProvider",{mvpdObj:n.MVPD}),d.API.logout()):"checkStatus"===d.Helper||"getAZ"===d.Helper?(d.Subscriber={isLoggedIn:!0,provider:{id:"sfps",displayName:"SFPS"},token:i.token},d.triggerCallback("checkStatusCompleted",{TVESubscriber:d.Subscriber})):"getMediaToken"===d.Helper?(u={status:"authorized",token:i.token},d.Auth.setMediaToken(u)):console.log("Elvis Error: Helper is missed"):(d.set("ELVIS_TERMINATEDMESSAGE","true"),d.Overlay.show("elvisTerminated"),i.terminatedServiceMessageAvailable=!1,d.triggerCallback("specialPreviewLockedWithProvider",{mvpdObj:n.MVPD}),d.API.logout())}d.Helper=null,this.setupFlag=!1,this.save(),d.set("ELVIS_STATUS","isNotActive"),d.erase("onLoad")},setup:function(e){var t=d.Elvis,i=t.mvpdId=d.get("ELVIS_CURRENT_MVPD_ID");t.setupFlag=!0;var r=d.Elvis.getData({providerId:i,uuid:e});d.Debug.info("SFPS setup started"),d.jsonp({src:d.fpsUrl+"special/html5/setupdevice",data:r,callback:this.requestCompleted,onerror:function(){d.Error.showMess("Internal TVE Services Error")}},this),t.isLoggining=!1,d.MVPD={displayName:"SFPS",id:"SFPS"}},setupWithoutSocial:function(){var e=d.get("ELVIS_CURRENT_MVPD_ID");d.set({onLoad:"setupElvis",ELVIS_METHOD:"nonSocial"}),d.Debug.info("SFPS setup started"),d.MegaBeacon.report({beaconType:"funnel",name:d.MegaBeacon.reportNames.authperf.authSelect,data:{provider:d.MVPD&&d.MVPD.id,mvpdRecall:d.MegaBeacon.featureInUse.mvpdRecall}}),d.MegaBeacon.featureInUse.mvpdRecall=!1,d.jsonp({src:d.fpsUrl+"special/html5/setupdevice",data:d.Elvis.getData({providerId:e}),callback:this.requestCompleted},this),this.isLoggining=!1,d.MVPD={displayName:"SFPS",id:"SFPS"}},signIn:function(e){return"nonSocial"===e?(this.setupWithoutSocial(),!1):(e=e||"auto",this.isLoggining=!0,void d.set({ELVIS_METHOD:e,onLoad:"setupElvis"}))},signOut:function(){if(this.isNonSocial()){var e={status:"success"};e["function"]="logoutDevice",this.requestCompleted(e)}else d.jsonp({src:d.fpsUrl+"special/html5/logoutdevice",data:d.Elvis.getData({uuid:TVEAuthElvisObject.ucid}),callback:this.requestCompleted,onerror:function(){var e={status:"success","function":"logoutDevice"};d.Elvis.requestCompleted(e)}},this),t.cookie="iui-token=;expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/";d.erase("ELVIS_ISLOGGEDIN")},getData:function(e){return e=e||{},e.deviceType="web",e.requestorId=d.reqID,e},isLoggedIn:function(){var e=TVEAuthElvisObject&&TVEAuthElvisObject.ucid,t="true"===d.get("ELVIS_ISLOGGEDIN");return!(!e||!t)},getLastLoggedInOrFirstProvider:function(e){for(var t=e[0],i=0,r=e.length;i<r;i++)e[i].isLoggedIn===!0&&(t=e[i]);return t},onElvisEnded:function(){d.set("ELVIS_ENDEDMESSAGE","true"),d.Overlay.show("elvisEnded"),d.triggerCallback("specialPreviewExpiredWithProvider",{mvpdObj:d.Elvis.MVPD}),d.API.logout()},onElvisTerminated:function(){d.set("ELVIS_TERMINATEDMESSAGE","true"),d.Overlay.show("elvisTerminated"),d.triggerCallback("specialPreviewLockedWithProvider",{mvpdObj:d.Elvis.MVPD}),d.API.logout()}},d.Vip={flow:null,tmCheck:null,init:function(e){d.Overlay.show("vipLogin"),d.Vip.flow?d.Overlay.show("pleaseWait"):d.Overlay.hide(),d.Debug.info("VIP download started"),d.appendFiles({src:d.iuiJSUrl,onload:function(){d.Vip.onInitComplete(e)}},d.iuiCSSUrl)},onInitComplete:function(e){d.MegaBeacon.report({beaconType:"funnel",name:d.MegaBeacon.reportNames.authperf.authSelect,data:{provider:d.MVPD&&d.MVPD.id}}),d.Vip.flow&&d.Vip.onReady(function(){d.Debug.info("VIP is ready"),d.Vip.flow&&(d.Overlay.show("vipLogin"),"24h"===d.Vip.flow&&r("#tveapp_vipLogin .iui-title").html(d.settings.freePreview.loginMessage).addClass("iui-fp"))});var t=d.get("signedInWith");"24h"!==t&&"vipElvis"!==t||(d.Vip.tmCheck&&clearTimeout(d.Vip.tmCheck),d.Vip.tmCheck=setTimeout(function(){d.Auth.signOut(),"checkStatus"===d.Helper&&d.Auth.setANStatus(0)},s.twoSeconds)),d.Debug.info("VIP initialization started"),IUI.init({fb:{appId:d.Vip.identityFBAppID,loadAndInitSDK:!0},brandId:d.Vip.identityBrand,appId:d.Vip.identityApp,theme:{name:d.Vip.identityTheme},login:{emailTriggerImg:d.Vip.emailTriggerImage},signUp:{emailTriggerImg:d.Vip.emailTriggerImage},staticImages:{fb:{button:d.awsUrl+"/img/fb_button.png"},tw:{button:d.awsUrl+"/img/tw_button.png"},loader:d.awsUrl+"/img/loader.gif"},callbacks:{loginSuccess:function(i){d.Vip.loginSuccessDebugInfo(i),d.MegaBeacon.startCount(d.MegaBeacon.reportNames.authperf.authFinish),d.Vip.uninit(),clearTimeout(d.Vip.tmCheck);var r=d.get("fakeId")||i.brandProfileId;return d.Vip.method=i.auth&&i.auth.authProvider,"ape"===d.Vip.method&&(d.Vip.method="mail"),e?void e(i):void("checkStatus"===d.Helper||"getMediaToken"===d.Helper?"vipElvis"===t&&(TVEAuthElvisObject.ucid=d.Elvis.ucid=r,d.Elvis.save(),d.Elvis.checkStatus(r),d.jsonp({src:d.fpsUrl+"/special/html5/checkelvis",data:{requestorId:d.reqID,uuid:r},callback:d.Elvis.requestCompleted},d.Elvis)):"getAZ"===d.Helper&&(d.Overlay.show("pleaseWait"),"vipElvis"===d.Vip.flow&&(TVEAuthElvisObject.ucid=d.Elvis.ucid=r,d.Elvis.save(),d.Elvis.setup(r)),d.Vip.flow=null))},loginFailure:function(){d.Debug.info("VIP login failed"),d.Error.showMess("Internal VIP Services Error")},loginCancel:function(){console.log("Cancelled")},resetPasswordSent:function(e){console.log("Reset password sent",e),d.Debug.info("VIP reset password sent")},resetPasswordCompleted:function(){d.triggerCallback("resetPasswordCompleted")},fbInitFailure:function(e){console.log("FB init error",e)}},showContainerShadow:!1,showLargeSpace:!1})},loginSuccessDebugInfo:function(e){d.Debug.info("VIP login success"),void 0===e.brandProfileId&&d.Debug.info("brandProfileId is not present in success responce")},updateUrl:function(){if(history.pushState){var t=e.location.protocol+"//"+e.location.host+e.location.pathname;e.history.pushState({path:t},"",t)}},resetToken:function(){d.Vip.flow="resetToken",d.Vip.init(function(){var e=d.Overlay;e.clearSearchField(),e.showProviderOverlay(),d.erase(["MVPD_ID","MVPD_Selected","ELVIS_CURRENT_MVPD_ID","ELVIS_CURRENT_MVPD_NAME"]),d.Vip.updateUrl()})},uninit:function(){delete e.IUI,r(".iui-component-overlay").remove(),r("#iui-component").html("")},onReady:function(t){function i(){r("#iui-component").children().length&&(r("#iui-component > .container").not(":first").hide(),e.clearInterval(a),t())}function n(){r("#iui-component").children().length&&(r("#iui-component").children().not(":first").hide(),e.clearInterval(a),t())}var a;a=navigator.userAgent.match(/msie\s9/i)?e.setInterval(n,s.mediumShort):e.setInterval(i,s.mediumShort)},is24hFlow:function(){return d.Vip.flow===u.freePreviewVipFlow}},d.fp={megaBeaconData:{service:"fps",provider:"fps"},init:function(){var e=this;d.Vip.flow="24h",d.triggerCallback("freePreviewWasStarted"),d.Vip.init(function(t){e.uuid=t.brandProfileId,e.setup(e.uuid),d.set("UUID",e.uuid)})},check:function(){this.uuid=this.uuid||d.get("UUID"),d.Debug.info("FPS check started"),d.jsonp({src:d.fpsUrl+"html5/checkdevice",data:{requestorId:d.reqID,uuid:this.uuid},callback:this.onCheckComplete},this)},onCheckComplete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d.Debug.info("FPS check completed"),"success"===e.status?e.isExpired?(this.onSessionExpire(e),this.onFail()):this.onSuccess(e):this.onFail()},setup:function(e){d.Debug.info("FPS setup started"),d.jsonp({src:d.fpsUrl+"html5/setupdevice",data:{requestorId:d.reqID,uuid:e},callback:this.onSetupComplete,onerror:function(){d.Debug.info("FPS setup error. Check request params"),d.Overlay.hide(),d.Error.showMess("Internal TVE Services Error")}},this)},onSetupComplete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d.Debug.info("FPS setup completed"),"success"===e.status?this.onSuccess(e,!0):this.check()},onSuccess:function(e,t){var i=d.settings.freePreview.logoUrl,r="FPS",n=d.token=e.token;if(this.setExpirationDate(e),this.timer(),d.set("signedInWith","24h"),d.MVPD={displayName:r,id:r,defaultLogoUrl:i,cobrandingLogoUrl:i,pickerLogoUrl:i,logoutLogoUrl:i},"getMediaToken"===d.Helper){var a={status:"authorized",token:n};d.triggerCallback("setMediaToken",{tokenObject:a})}else{var o={isLoggedIn:!0,provider:d.MVPD,token:n};d.triggerCallback("checkStatusCompleted",{TVESubscriber:o}),t?(d.Overlay.show("fpSuccess"),d.triggerCallback("freePreviewLoginCompleted"),d.MegaBeacon.report({beaconType:"funnel",name:d.MegaBeacon.reportNames.authperf.authFinish,data:{provider:d.MVPD&&d.MVPD.id,hba:d.MegaBeacon.featureInUse.hba}}),d.MegaBeacon.featureInUse.hba=!1):d.Overlay.hide()}d.erase(["checkAZ","getAZ","onLoad","MVPD_Selected"])},onFail:function(){if("getMediaToken"===d.Helper){var e={status:"not-authorized",token:""};d.triggerCallback("setMediaToken",{tokenObject:e})}else{var t={isLoggedIn:!1,token:null,provider:null};d.triggerCallback("checkStatusCompleted",{TVESubscriber:t})}d.Overlay.hide(),d.erase(["MVPD_ID","checkAZ","AUTH_DATA"]),d.MVPD=null,d.MVPD_ID=null,d.Helper=null},timer:function(){var t=this;this.timerId&&e.clearInterval(this.timerId),this.timerId=e.setInterval(function(){t.duration--},s.second)},forceExpire:function(){d.Overlay.updFPMessage(a.selectProviderNew),d.jsonp({src:d.fpsUrl+"html5/stopdevice",data:{requestorId:d.reqID,uuid:this.uuid},callback:this.onSessionExpire},this)},onSessionExpire:function(e){d.MegaBeacon.report({beaconType:"event",name:e?"fps_ended":"fps_expired",data:this.megaBeaconData}),this.setExpirationDate(e),d.erase("signedInWith"),d.set("isFPexpired","true"),d.Vip.uninit(),d.triggerCallback("freePreviewExpired")},setExpirationDate:function(e){this.duration=e.duration||l.dayInSeconds,this.expirationDate=e.startDate+this.duration*l.millisInSec,d.set("FP_EXPIRATION_DATE",this.expirationDate)}},function(){var t="TVEErrorCannotInitialize",i="TVEErrorGeneric",a="TVEErrorUserNotAuthorized",o={CFG100:{type:"Adobe",subType:"CFG100",developerMessage:"The client machine Date / Time / Timezone is not set correctly. This will likely lead to authentication / authorization errors. See http://tve.helpdocsonline.com/error-reporting",userMessage:"Your system time and/or date appears to be incorrect, which may be causing an login issue. Please check/update your settings, then try to login in again."},SEC412:{type:"Adobe",subType:"SEC412",developerMessage:"Device ID does not match. This can happen whenever the underlying platform changes its Device ID. In this case the existing tokens will be cleared and the user will not be authenticated anymore. Client IP is part of the Device ID. See http://tve.helpdocsonline.com/error-reporting",userMessage:"It seems like you may have changed networks, please try logging in again."},CFG400:{type:"Adobe",subType:"CFG400",developerMessage:"An invalid Requestor ID was supplied. The developer MUST specify a valid Requestor ID.",userMessage:"Please, call into support."},N500:{type:"Adobe",subType:"N500",developerMessage:"Internal error.",userMessage:"Adobe Internal error."}};d.Error={isDebugOn:!1,init:function(t){this.isDebugOn=t,e.console||(console={log:function(){}})},showMess:function(e,t){var i="Error: ",r=this.list[e],a={errorCode:r,errorMessage:e,errorData:t},o={provider:d.MVPD&&d.MVPD.id||null,error:{type:"Component",subType:e,code:d.Error.list[e]}};this.isDebugOn&&(n.isUndefined(e)?console.log(i+"N/A"):(console.log(""+i+r),console.log(""+i+e))),d.triggerCallback("errorHappened",a),d.Debug.error(e,r),d.MegaBeacon.reportError(o)},isAuthError:function(e){var t=e.errorId;return/^[NZ]/.test(t)},getAuthErrorMessage:function(e){var t="User not Authorized Error",i="User Not Authenticated Error";return/^[Z]/.test(e)?t:i},triggerAdobeAuthError:function(e){var t="Component",i=a,r=e.errorId,n=this.getAuthErrorMessage(r),o=n+" ("+r+")",s={errorCode:i,errorMessage:n,errorData:e};d.triggerCallback("errorHappened",s),d.Debug.error(n,i),d.MegaBeacon.reportError({type:t,subType:i,code:o})},triggerAdobeNoAuthError:function(e){var t="Adobe",i=e.errorId,r=e.subErrorId,n=e.message,a=e.developerMessage,o=e.userMessage,s=n||a||o||"Adobe error",l={errorCode:i,errorMessage:s,errorData:e};d.triggerCallback("errorHappened",l),d.Debug.error(s,i),d.MegaBeacon.reportError({type:t,subType:r,code:i})},triggerAdobeError:function(e){d.Error.isAuthError(e)?d.Error.triggerAdobeAuthError(e):d.Error.triggerAdobeNoAuthError(e)},triggerAdobeWarning:function(e){var t=e.errorId;d.triggerCallback("warning",{data:e}),d.Debug.warning(t)},processAdobeError:function(e,t){var i={error:d.Error.triggerAdobeError,warning:d.Error.triggerAdobeWarning,info:d.Error.triggerAdobeWarning};n.isFunction(i[e])&&i[e](t)},adobeErrorLogger:function(e){var t=d.MVPD&&!d.MVPD.isCustomAuthZErrorMessageEnabled,i=e&&e.message,n=t&&i;n&&delete e.message;var a=e.errorId,s=e.level,l=void 0;l=a in o?r.extend(o[a],e):e,d.Error.processAdobeError(s,l)},showMessageIfInternationalFlow:function(e){d.settings.locale&&d.Error.showMess(e)},list:{Ready:"DebugMode is running","The Component Is Not Loaded":t,"Wrong Init Params":t,"Wrong RequestorID/ResourceID":t,"Auth.set":i,"Auth.signOut":i,"Providers.saveList":i,"Providers.loadList":i,"Providers.getList":i,"Providers.verifyWhiteList":i,"AE Is Not Loaded":i,"Can Not Load The White List":i,"Adobe.displayProviders":i,"Internal TVE Services Error":i,"Internal VIP Services Error":i,"LocalStorage was changed":i,"HBA.signOut":i,"User Not Authenticated Error":a,"User not Authorized Error":a,"AccessEnabler Initialization Error":"TVEErrorAdobeLibraryFailedToInit","Multiple Authentication Requests Error":i,"Internal Error":i,"Provider not Selected Error":i,"Provider not Available Error":i,adobeErrorLogger:i,"LocalStorage Is Unavailable":"TVEErrorLocalStorage","Third Party Cookies Are Not Supported":"TVEError3rdPartyCookies"}}}(),d.Debug={text:"TVELOG::",init:function(){this.isActive=/tvedebug/.test(location.href)},error:function(e,t){var i={message:e+"::"+t,type:"error"};this.log(i)},info:function(e,t){var i={message:e,type:"info",data:t};this.log(i)},callback:function(e,t){var i={message:e,type:"callback"};t&&t.length&&(i.data=t),this.log(i)},warning:function(e){var t={message:e,type:"warning"};this.log(t)},color:{error:"#880A0A",info:"#06650A",callback:"#0F206B",warning:"#C88200"},log:function(e){var t,i;this.isActive&&(t="%c"+this.text+e.type,i="--> "+e.message,e.data&&(i=i+"::"+JSON.stringify(e.data)),console.log(t,"font-weight: bold; color:"+this.color[e.type],i))}},function(){function t(){return d.isReady()}d.API={init:function(e,t,i,r){d.Helper="initialize",d.initialize(e,t,i,r)},checkStatus:function(e){return d.Debug.info("checkStatus started"),!!t()&&(d.MegaBeacon.startCount(d.MegaBeacon.reportNames.authperf.checkStatus),d.Overlay.hide("pleaseWait"),d.Helper="checkStatus",void d.Auth.check(e))},login:function(){if(!t())return!1;d.Debug.info("login start");var e=!d.Elvis.isLoggedIn();if(e&&!d.isAEReady)d.appendAE(d.API.login);else if("setupElvis"!==d.get("onLoad")){d.MegaBeacon.featureInUse.mvpdRecall=!1,d.Helper="getAZ",d.Auth.get(),d.MegaBeacon.startCount(d.MegaBeacon.reportNames.authperf.authStart);var i=d.get("LAST_PROVIDER_ID"),r=d.get("CURRENT_PROVIDER_ID")||null;i&&!r&&(d.MegaBeacon.featureInUse.mvpdRecall=!0,d.Providers._set(i),d.MegaBeacon.report({beaconType:"event",name:"mvpd_recall",data:d.MegaBeacon.getInfo({provider:d.get("LAST_PROVIDER_NAME")||null})}))}},logout:function(e){return!!t()&&(d.Helper="logout",void d.Auth.signOut(e))},getLogoutScreen:function(){if(!t())return!1;d.Helper="getScreen:SignOut";var e=d.Elvis.isLoggedIn(),i=void 0;e?i="elvisSignOut":"24h"===d.get("signedInWith")?(i=d.selectProviderOverlayName,d.Auth.get(),d.set("getAZ",!0)):i="signOut",d.Overlay.show(i)},getMediaToken:function(e){return!!t()&&(d.MegaBeacon.startCount(d.MegaBeacon.reportNames.authperf.getMediaToken),d.Helper="getMediaToken",d.Debug.info("getMediaToken started"),d.getMediaTokenCallback=e,void d.Auth.getMediaToken())},getMvpdPicker:function(i,r){if(d.Debug.info("embedded picker started"),!t())return d.Debug.info("TVE is not ready yet"),!1;if(!d.isAEAvailable())return d.Debug.info("embedded picker postponed"),void d.postponeGetMvpdPicker(i,r);d.Overlay.initPickerElement(i),d.getMvpdPickerCallback=r||function(){},d.selectProviderOverlayName=o.embedded;var n=!1;d.isGetFullListButtonPressed=null;var a=20,l=0,c=setInterval(function(){l++;var t=JSON.parse(d.get("MVPD_LIST"));t&&d.Providers.listIsActual()?(e.clearInterval(c),d.Overlay.showProviderOverlay()):n?l===a&&(e.clearInterval(c),ae.setSelectedProvider(null)):(n=!0,ae.getAuthorization(TVEAuthOptions.resourceID))},s.medium)},setMegaBeaconActivity:function(e){var t=d.MegaBeacon.isInitialized;t?d.MegaBeacon.setMegaBeaconActivity(e):(d.MegaBeacon.init(e),d.MegaBeacon.startCount("init"))}}}(),function(){var e="tempPassLogin",i="ELVIS_ENDEDMESSAGE";d.Service={loaded:function(){d.MegaBeacon.saveStepDuration("accessEnabler"),clearTimeout(d.wait_3rdpartycookies),d.Auth.set()},ready:function(){d.Auth.ready=!0,d.isAEReady=!0,d.AEcallback&&(d.AEcallback(),delete d.AEcallback)},setToken:function(i,r){d.Auth.setToken(i,r),d.erase(e),d.MVPD&&d.MVPD.id&&(t.createElement("img").src="https://media.mtvnservices.com/pmt/e1/mvpd/setCookie.esi?MVPDID="+d.MVPD.id)},failedToken:function(e,t){d.Auth.tokenRequestFailed(e,t)},setStatus:function(t,r){var n="true"===d.get("checkAZ");d.isSetANStatusSkip?d.isSetANStatusSkip=!1:n&&t?ae.checkAuthorization(TVEAuthOptions.resourceID):d.Auth.setANStatus(t,r),t||d.erase(["CURRENT_PROVIDER_ID","CURRENT_PROVIDER_NAME"]),d.get(i)||n?d.erase(i):d.get(e)&&!t?(d.Overlay.show(a.error,"Your 24 hour free preview session has already expired."),d.set("tempPassExpired","true"),d.erase(e)):d.Overlay.hide()},iframe:function(e,t){d.Overlay.createIFrame(e,t)},dataTracker:function(e,t){d.Auth.dataTracker(e,t)},providersDialog:function(e){if(e){var t=d.Providers,i=void 0;if(t.listIsActual()||d.settings.locale||t.verifyWhiteList(e),("getAN"===d.Helper||"getAZ"===d.Helper)&&(i=d.get("LAST_PROVIDER_ID"),!i)){var r=d.selectProviderOverlayName===o.embedded,n=d.isGetFullListButtonPressed&&r;n?d.Overlay.show(a.selectProvider):d.Overlay.showProviderOverlay()}}else d.Error.showMess("Adobe.displayProviders")},providerSelected:function(e){var t=d.Elvis.isLoggedIn();t&&(e.MVPD=d.get("ELVIS_CURRENT_MVPD_ID"),e.AE_State="User Authenticated"),d.MVPD_ID=e.MVPD,d.Providers.getProviderInfo()},adobeErrorLogger:function(e){d.Error.adobeErrorLogger(e)}}}(),d.MegaBeacon={timeStart:{},isInitialized:!1,featureInUse:{mvpdRecall:!1,hba:!1},reportNames:{authperf:{getMediaToken:"getMediaToken",checkStatus:"checkStatus",init:"init",authStart:"auth_start",authSelect:"auth_select",authFinish:"auth_finish",error:"error"}},dataBrowser:[{string:navigator.userAgent,subString:"FBA",identity:"facebook app browser",versionSearch:"FBAV"},{string:navigator.vendor,subString:"FBA",identity:"facebook app browser",versionSearch:"FBAV"},{string:navigator.userAgent,subString:"Edge",identity:"Edge"},{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:e.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.userAgent,subString:"MSIE",identity:"Internet Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Trident",identity:"Internet Explorer",versionSearch:"rv"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"}],startCount:function(e){this.isActive&&(this.timeStart[e]=+new Date)},getDuration:function(e){var t=+new Date-this.timeStart[e];return delete this.timeStart[e],t},saveStepDuration:function(e){this.stepDuration=this.stepDuration||{},this.stepDuration[e]=+new Date-this.timeStart.init},saveUserPath:function(e){this.isActive&&this.userPath.push(e)},getInfo:function(e){var t=void 0,i=void 0,a=void 0,o="vipElvis"===d.get("signedInWith"),s="vipElvis"===d.Vip.flow,l=d.Elvis.isLoggedIn(),c=o||s||l;return"24h"===d.get("signedInWith")||"24h"===d.Vip.flow?(t="fps",i="fps"):c?(t="sfps",i=(d.MVPD&&d.MVPD.displayName||"")+":sfps"):(t=d.MegaBeacon.service,i=d.MVPD&&d.MVPD.id||null),a={provider:i,service:t},"service"===e?{service:t}:"provider"===e?{provider:i}:(n.isObject(e)&&null!==e&&r.extend(a,e),a)},init:function(t){var i=this.getBrowserInfo(),n=d.settings.locale||"en_US",a=d.environment,o=this.service=d.settings.locale?"international":"domestic",s=3,c=2;if(this.setMegaBeaconActivity(t),this.isActive){var u=d.get("MEGABEACON_SESSION_EXPIRE")||0,p=d.get("MEGABEACON_SESSION");p&&(u-new Date>0?this.session=p:d.erase("MEGABEACON_SESSION")),d.erase("MEGABEACON_SESSION_EXPIRE"),r(e).on("beforeunload",function(){d.set("MEGABEACON_SESSION_EXPIRE",+new Date+l.minuteInMillis)}),/mtvnservices-d\.mtvi\.com/.test(e.location.hostname)&&(a="development"),this.reportData={client:"web",beaconVersion:"2.0.0",session:this.getSession(),data:{},browser:i,component:{service:o,brand:d.reqID,country:n.slice(s),language:n.slice(0,c),environment:a,version:d.ver}},this.stepDuration={},this.userPath=[],this.isInitialized=!0}},getSession:function(){var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=24,r=5,n=4;if(this.session)return this.session;for(var a=0;a<i;a++)a%r===n?e+="-":e=""+e+t.charAt(Math.floor(Math.random()*t.length));return d.set("MEGABEACON_SESSION",e),e},searchString:function(e){for(var t=0;t<e.length;t++){var i=e[t],r=i.string,n=i.prop;if(this.versionSearchString=i.versionSearch||i.identity,r){if(r.indexOf(i.subString)!==-1)return i.identity}else if(n)return i.identity}},searchVersion:function(e){var t=e.indexOf(this.versionSearchString);if(t!==-1)return parseFloat(e.substring(t+this.versionSearchString.length+1))},getBrowserInfo:function(){var e=navigator.userAgent,t=this.searchString(this.dataBrowser)||"unknown",i=this.searchVersion(e)||this.searchVersion(navigator.appVersion)||"unknown",r=this.getPlatformInfo(),n={name:t,version:i,os:r};return"unknown"===t&&(n.userAgent=e),n},getPlatformInfo:function(){var e,t=function(e){return e.test(navigator.userAgent)};return e=t(/(iphone|ipad|ipod)/i)?"iOS":t(/Windows/i)?"Windows":t(/macintosh/i)?"Mac":t(/android/i)?"Android":t(/linux/i)?"Linux":"unknown"},addZero:function(e){var t=2;return this.padWithZero(e,t)},add2Zero:function(e){var t=3;return this.padWithZero(e,t)},padWithZero:function(e,t){return e=e.toString(),e.length<t?this.padWithZero("0"+e,t):e},generateTimestamp:function(){return(new Date).toISOString()},getBeaconTopic:function(e){return this.isAuthperfBeaconName(e)?"authperf":"vmn_tve"},isAuthperfBeaconName:function(e){return n.values(this.reportNames.authperf).includes(e)},reportApiBeacon:function(e){var t="api",i=this.reportNames.authperf,r={checkStatusCompleted:i.checkStatus,componentLoaded:i.init,setMediaToken:i.getMediaToken},n=r[e],a=this.timeStart[n];if(a){var o=this.prepareReportDataObject(n);d.MegaBeacon.report({name:n,beaconType:t,data:o})}},prepareReportDataObject:function(e){var t={provider:d.MVPD&&d.MVPD.id||null,duration:this.getDuration(e)};return e===this.reportNames.authperf.init&&(r.extend(t,this.stepDuration),delete this.stepDuration),t},report:function(e){var t=r.extend(!0,{},this.reportData,e);if(this.isActive){if(t.timestamp=this.generateTimestamp(),"funnel"===t.beaconType){if(!this.timeStart[t.name])return;t.data.duration=this.getDuration(t.name)}"user_funnel"===t.name&&(t.data.user_path=this.userPath);var i=this.getBeaconTopic(t.name);t={events:[t]};var n=JSON.stringify(t),a=new XMLHttpRequest;a.open("POST","https://mb.mtvnservices.com/data/collect/v1/?__t="+i+"&__mb_addHeader=true",!0),a.setRequestHeader("Content-type","application/json; charset=utf-8"),a.send(n)}},reportError:function(e){var t={beaconType:"error",name:"error",data:e};d.MegaBeacon.report(t)},setMegaBeaconActivity:function(e){this.isActive=e}},function(){function n(r){var n,a,s;"object"===("undefined"==typeof r?"undefined":_typeof(r))&&r.nodeType||r===e?a=[r]:"string"==typeof r?(r=i.trim(r),"<"===r[0]&&">"===r[r.length-1]?"!"===r[1]?a=[t.createComment(r.slice(4,-3))]:(n=t.createElement("div"),n.innerHTML=r,a=n.children):(r.indexOf(":visible")!==-1&&(r=r.replace(":visible",""),s=!0),a=t.querySelectorAll(r),s&&(a=[].filter.apply(a,[function(e){return o(e)}])))):a=r;for(var l=0;l<a.length;l++)this[l]=a[l];this.length=a.length}function a(e,t){var i=["width","height","margin","padding"],r=i.filter(function(t){return e.indexOf(t)!==-1});return r.length&&("number"==typeof t||"string"==typeof t&&!/px$/.test(t))&&(t+="px"),t}function o(t){var i=e.getComputedStyle(t);return 0!==i.width&&0!==i.height&&0!==i.opacity&&"none"!==i.display&&"hidden"!==i.visibility}function s(e,t){var r=i(t),n=!1;return r.each(function(t,i){if(i===e)return n=!0,!1}),n}function l(e,t,r){var n,a,o,s,l,c;return h(e)?e.document.documentElement["client"+t]:9===e.nodeType?(n=e.documentElement,Math.max(e.body["scroll"+t],n["scroll"+t],e.body["offset"+t],n["offset"+t],n["client"+t])):(a=e["client"+t],o=getComputedStyle(e),t=t.toLowerCase(),"width"===t?(s=parseInt(o.paddingLeft)+parseInt(o.paddingRight),l=parseInt(o.borderLeftWidth)+parseInt(o.borderRightWidth)):(l=parseInt(o.borderTopWidth)+parseInt(o.borderBottomWidth),s=parseInt(o.paddingTop)+parseInt(o.paddingBottom)),c="border-box"===o.boxSizing,void 0===r?a-s:(c&&(r+=s+l),void i(e).css(t,r)))}function c(e){var t,i=["span","a","strong","label"];return p(i,function(i,r){if(e===r)return t=!0,!1}),t}function u(e){var t,i=["img","button","input"];return p(i,function(i,r){if(e===r)return t=!0,!1}),t}function p(e,t){if(d(e))for(var i=0;i<e.length&&t(i,e[i])!==!1;i++);else for(i in e)if(t(i,e[i])===!1)break}function d(e){return e instanceof Array}function v(e){return"object"===("undefined"==typeof e?"undefined":_typeof(e))&&null!==e}function h(e){return null!=e&&e===e.window}r=i=function(e){return new n(e)},i.trim=function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},n.prototype.empty=function(){var e=this;return e.each(function(e,t){for(var i=t.firstChild;i;)t.removeChild(i),i=t.firstChild}),this},n.prototype.remove=function(){for(var e=this[0];e;){var t=e.parentNode;t.removeChild(e),e=this[0]}return this},n.prototype.html=function(e){return void 0!==e?(this.each(function(t,i){if("string"==typeof e)i.innerHTML=e;else{i.innerHTML="";for(var r=0;r<e.length;r++)i.appendChild(e[r])}}),this):this[0]&&this[0].innerHTML},n.prototype.text=function(e){var t="";return void 0===e?(this.each(function(e,i){t+=i.innerHTML}),t):(this.each(function(t,i){i.innerHTML=e}),this)},n.prototype.trigger=function(e){e.indexOf(".")!==-1&&(e=e.split(".")[0]),this.each(function(i,r){var n=void 0;if(r.dispatchEvent){var a="";switch(e){case"click":case"mousedown":case"mouseup":a="MouseEvents";break;case"focus":case"change":case"blur":case"select":a="HTMLEvents";break;default:throw"fireEvent: Couldn't find an event class for event \""+e+'".'}n=t.createEvent(a),n.initEvent(e,!0,!0),r.dispatchEvent(n,!0)}else r.fireEvent&&(n=t.createEventObject(),r.fireEvent("on"+e,n))})},n.prototype.click=function(){return this.each(function(e,t){t.click()}),this},n.prototype.blur=function(){return this.each(function(e,t){t.blur()}),this},n.prototype.focus=function(){return this.each(function(e,t){t.focus()}),this},n.prototype.css=function(e,t){if("string"==typeof e){if(void 0===t){var i=getComputedStyle(this[0]),r=i[e];return/\d+\.\d+px$/.test(r)&&(r=Math.round(parseFloat(r))+"px"),r}this.each(function(i,r){r.style[e]=a(e,t)})}else this.each(function(t,i){for(var r in e)i.style[r]=a(r,e[r])});return this},n.prototype.hide=function(){return this.each(function(e,t){t.style&&(t.style.display="none")}),this},n.prototype.show=function(){return this.each(function(e,t){var i=t.nodeName.toLowerCase();"div"===i?t.style.display="block":c(i)?t.style.display="inline":u(i)?t.style.display="inline-block":"#comment"!==i&&(t.style.display="block")}),this},n.prototype.addClass=function(e){return this.each(function(t,i){i.classList.add(e)}),this},n.prototype.removeClass=function(e){return e=e.split(" "),this.each(function(t,i){for(var r=0;r<e.length;r++)i.classList.remove(e[r])}),this},n.prototype.each=function(e){for(var t,i=0;i<this.length&&(t=this[i],e.call(t,i,t)!==!1);i++);return this},n.prototype.children=function(){var e=[];return this.each(function(t,i){for(var r=i.children,n=0;n<r.length;n++)e.push(r[n])}),i(e)},n.prototype.filter=function(e){var t=[];return this.each(function(i,r){s(r,e)&&t.push(r)}),i(t)},n.prototype.on=function(){var e,r,n,a=arguments[0];a.indexOf(".")!==-1&&(a=a.replace(/\.tveevent/g,"")),n=a.split(" ");for(var o=0;o<n.length;o++)3===arguments.length?(e=arguments[1],r=arguments[2],this.each(function(){t.addEventListener(n[o],function(t){var n=i(t.target).closest(e);n.length&&(t.currentTarget=n[0],r.call(n[0],t))})})):2===arguments.length&&(r=arguments[1],this.each(function(e,t){t.addEventListener(n[o],r)}));return this},n.prototype.closest=function(e){var r=[];return this.each(function(i,n){for(var a=n;a&&a!==t.body;a=a.parentNode)if(s(a,e)){r.push(a);break}}),i(r)},n.prototype.nextAll=function(e){var t=[],r=e&&e.indexOf(":first")!==-1;return this.each(function(i,n){for(var a=n.nextSibling;null!=a;a=a.nextSibling)if(a instanceof HTMLElement)if(void 0===e)t.push(a);else if(e.indexOf(":visible")!==-1){if(o(a)&&(t.push(a),r))break}else if(e&&":first"===e){t.push(a);break}}),i(t)},n.prototype.prevAll=function(e){var t=[],r=e&&e.indexOf(":first")!==-1;return this.each(function(i,n){for(var a=n.previousSibling;null!=a;a=a.previousSibling)if(a instanceof HTMLElement)if(void 0===e)t.push(a);else if(e.indexOf(":visible")!==-1){if(o(a)&&(t.push(a),r))break}else if(e&&":first"===e){t.push(a);break}}),i(t)},n.prototype.prev=function(){var e=[];return this.each(function(t,i){for(var r=i.previousSibling;null!=r;r=r.previousSibling)r instanceof HTMLElement&&e.push(r)}),i(e)},n.prototype.add=function(e){"string"==typeof e&&(e=i(e));for(var t=0;t<e.length;t++)this[this.length++]=e[t];return this},n.prototype.is=function(e){if(":focus"===e)return this[0]===t.activeElement},n.prototype.ready=function(e){"complete"===t.readyState||"interactive"===t.readyState?e():t.addEventListener("DOMContentLoaded",function(){e()})},n.prototype.find=function(e){var t=[];return this.each(function(i,r){for(var n=r.querySelectorAll(e),a=0;a<n.length;a++)t.push(n[a])}),i(t)},n.prototype.val=function(e){return void 0===e?this[0]?this[0].value:"":(this.each(function(t,i){i.value=e}),this)},n.prototype.attr=function(e,t){return void 0!=t?(this.each(function(i,r){r.setAttribute(e,t)}),this):this[0]&&this[0].getAttribute(e)},n.prototype.removeAttr=function(e){return this.each(function(t,i){i.removeAttribute(e)}),this},n.prototype.remove=function(){var e=[];return this.each(function(t,i){var r=i.parentNode;r&&e.push(r.removeChild(i))}),i(e)},n.prototype.not=function(e){var t=[];if(":first"===e)for(var r=1;r<this.length;r++)t.push(this[r]);return i(t)},n.prototype.appendTo=function(e){"string"==typeof e&&(e=i(e));var t=this;return e&&t.each(function(t,i){var r=0;e.each(function(e,t){r++&&(i=i.cloneNode(!0)),t.appendChild(i)})}),this},n.prototype.append=function(e){"string"==typeof e&&(e=i(e));var t=this;return t&&e.each(function(e,i){var r=0;t.each(function(e,t){r++&&(i=i.cloneNode(!0)),t.appendChild(i)})}),this},n.prototype.toggle=function(e){return e===!0?this.show():e===!1&&this.hide(),this},n.prototype.slideToggle=function(){var t,i,r=this.css("overflow","hidden"),n=r.height(),a=.05;if(n>0){var o=parseInt(this.css("margin-bottom"));n+=o,i=a*n,this.css({"margin-bottom":"0px",height:n}),t=e.setInterval(function(){n-=i,n<=0?(r.hide(),r.height(0),e.clearInterval(t)):r.height(n)},20)}else{r.show(),r[0].style.height="",r[0].style.marginBottom="",o=parseInt(r.css("margin-bottom")),r[0].style.marginBottom="0px",n=r.height()+o,r.height(0),i=a*n;var s=0;t=e.setInterval(function(){s+=i,s<=n?r.height(s):(r[0].style.height="",r[0].style.marginBottom=o+"px",e.clearInterval(t))},20)}return this},n.prototype.scrollTop=function(t){if(h(this[0])){if(void 0===t)return e.pageYOffset;e.scrollTo(0,t)}else{if(void 0===t)return this[0].scrollTop;this[0].scrollTop=t}return this},n.prototype.next=function(e){var t=[];return this.each(function(i,r){for(var n=r.nextSibling;null!=n;n=n.nextSibling)if(n instanceof HTMLElement&&s(n,e)){t.push(n);break}}),i(t)},n.prototype.width=function(e){return void 0===e?l(this[0],"Width"):void this.each(function(t,i){l(i,"Width",e)})},n.prototype.height=function(e){return void 0===e?l(this[0],"Height"):void this.each(function(t,i){l(i,"Height",e)})},i.extend=function(){function e(t,r){return p(r,function(r,n){i&&v(n)?t[r]=e(d(n)?[]:t[r]||{},n):t[r]=n}),t}var t=arguments[0]===!0?1:0,i=!!t,r=arguments[t];for(t++;t<arguments.length;t++)e(r,arguments[t]);return r},i.imitated=!0}(),d.HBA={isCheckStatus:null,callbackName:null,generateUuid:function(e){for(var t=16,i=2,r=12,n="";n.length<e;)n=""+n+Math.random().toString(t).substr(i,r);return n.substr(0,e)},init:function(e){if(this.hbaIsEnabledAndNetworkIsElvis=e,this.uuid=d.get("HBA_UUID"),this.hbaIsEnabledAndNetworkIsElvis&&!this.uuid){var t=20;this.uuid=this.generateUuid(t),d.set("HBA_UUID",this.uuid)}},requestCallback:function(e){var t;try{var i=e.providers[0],r=i.tokenTTL,n=i.token,a=i.providerId}catch(o){}n?(t={expirationTime:Date.now()+r,token:n,providerId:a},d.set("HBA_DATA",t),d.HBA.onSuccess(n,a)):(d.erase("HBA_DATA"),d.triggerCallback(this.callbackName,this.generateCallbackData()))},checkIfHbaIsActive:function(){return!d.get("HBA_DISABLED")&&(this.hbaIsEnabledAndNetworkIsElvis||!!d.get("HBA_DATA"))},onSuccess:function(e,t){var i=this.generateCallbackData(e,t);d.triggerCallback(this.callbackName,i)},check:function(e){var t=d.get("HBA_DATA",!0);this.isCheckStatus=e,this.callbackName=e?"checkStatusCompleted":"setMediaToken",t&&t.expirationTime>Date.now()?this.onSuccess(t.token,t.providerId):d.jsonp({src:d.hbaUrl,data:{deviceType:"web",requestorId:TVEAuthOptions.requestorID,uuid:this.uuid},callback:this.requestCallback},this)},generateCallbackData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments[1],i=null,r=void 0,n=void 0;if(this.isCheckStatus){if(t){var a=":sfps";r=t+a,i={id:r,displayName:r.toUpperCase()}}n={TVESubscriber:{isLoggedIn:!!e,provider:i,token:e}}}else n={tokenObject:{status:e?"authorized":"not-authorized",token:e}};return n},eraseHbaData:function(){d.erase(["HBA_DATA","HBA_UUID","checkAZ"])},signOut:function(){var e=d.get("HBA_UUID"),t="web",i=d.get("RequestorID"),r=d.fpsUrl+"special/html5/logoutdevice";d.jsonp({src:r,data:{uuid:e,deviceType:t,requestorId:i},callback:this.onSignOutSuccess,onerror:this.onSignOutError},this)},onSignOutSuccess:function(){this.eraseHbaData(),d.triggerCallback("logoutCompleted")},onSignOutError:function(){this.eraseHbaData(),d.Error.showMess("HBA.signOut")}},e.entitlementLoaded=d.Service.loaded,e.setConfig=d.Service.ready,e.setToken=d.Service.setToken,e.tokenRequestFailed=d.Service.failedToken,e.setAuthenticationStatus=d.Service.setStatus,e.createIFrame=d.Service.iframe,e.sendTrackingData=d.Service.dataTracker,e.displayProviderDialog=d.Service.providersDialog,e.selectedProvider=d.Service.providerSelected,e.adobeErrorLogger=d.Service.adobeErrorLogger;var v=Object.create({settings:d.settings,API:d.API,show:function(e,t){d.Overlay.show(e,t)},hide:function(e){d.Overlay.hide(e)},_get:function(e){if(e.indexOf(".")!==-1){var t=e.split(".");if(!n.isFunction(d[t[0]][t[1]]))return d[t[0]][t[1]]}else if(!n.isFunction(d[e]))return d[e]}});return v.version=d.ver,r.extend(v,d.API),v}(window,document);(function(namespace){var TVE=function(parameters){this.version='V2.0.1';this.tveStorageKey='tveStorage';this.tveStorageExpires=3600;this.moduleName="ENT_TVE_Wrapper: ";if(!window.TVEAuth){throw new Error(this.moduleName+' no TVEAuth library loaded on the page');}
this.TVEAuth=window.TVEAuth;this.bodyTveAuthClass='tve_auth';this._events=null;this.provider=null;this.isTVEAuthReady=false;this.token=null;this.status=null;if(typeof parameters=='undefined'){throw new Error(this.moduleName+' no parameters passed');}
if(!parameters.requestorID){throw new Error(this.moduleName+' missing requestorID');}
if(!parameters.channelID){throw new Error(this.moduleName+' missing channelID');}
this.config=this.buildConfig(parameters);};namespace.TVE=TVE;TVE.prototype.initialize=function(){this.setupTVEAuthCallbacks();console.debug(this.moduleName+' initialize');if(this.TVEAuth._get('status')){this.onComponentReady();}else{this.TVEAuth.API.init(this.config);}};TVE.prototype.getVersion=function(){return this.TVEAuth._get('ver');};TVE.prototype.getTVEStorageKey=function(){return this.tveStorageKey;};TVE.prototype.getTVEStorageExpires=function(){return this.tveStorageExpires;};TVE.prototype.showMvpdPicker=function(targetId){this.TVEAuth.API.getMvpdPicker(targetId);};TVE.prototype.login=function(){console.debug(this.moduleName+' login');if(this.isTVEAuthReady){this.TVEAuth.API.login();}};TVE.prototype.logout=function(){console.debug(this.moduleName+' logout');if(this.isTVEAuthReady){this.TVEAuth.API.getLogoutScreen();}};TVE.prototype.setupTVEAuthCallbacks=function(){this.TVEAuth.Callback=this.TVEAuth.Callback||{};this.TVEAuth.Callback.componentLoaded=this.onComponentReady.bind(this);this.TVEAuth.Callback.checkStatusCompleted=this.onCheckStatusCompleted.bind(this);this.TVEAuth.Callback.logoutCompleted=this.onLogoutCompleted.bind(this);this.TVEAuth.Callback.errorHappened=this.onErrorHappened.bind(this);this.TVEAuth.Callback.freePreviewExpired=this.onFreePreviewExpired.bind(this);};TVE.prototype.onFreePreviewExpired=function(){this.trigger('freePreviewExpired');};TVE.prototype.onComponentReady=function(){this.isTVEAuthReady=true;console.debug(this.moduleName+' onComponentReady');this.TVEAuth.API.checkStatus(true);};TVE.prototype.onCheckStatusCompleted=function(status){if(status){this.status=status;if(status.provider){this.provider=status.provider;}
if(status.token){this.token=status.token;}
console.debug(this.moduleName+' onCheckStatusCompleted:',this.provider);this.trigger('checkStatusCompleted',status);if(status.isLoggedIn===true){$('body').addClass(this.bodyTveAuthClass);}else{$('body').removeClass(this.bodyTveAuthClass);}}};TVE.prototype.onLogoutCompleted=function(){this.status=null;this.provider=null;console.debug(this.moduleName+' onLogoutCompleted');this.trigger('logoutCompleted');$('body').removeClass(this.bodyTveAuthClass);};TVE.prototype.onErrorHappened=function(errorCode,errorMessage,errorObject){console.error(this.moduleName+' onErrorHappened:',errorCode,errorMessage);this.trigger('errorHappened',{code:errorCode,message:errorMessage,errorObject:errorObject});};TVE.prototype.buildConfig=function(parameters){var config={};if(parameters.requestorID){config.requestor=parameters.requestorID;}
if(parameters.channelID){config.resource=parameters.channelID;}
if(parameters.isCustomCSS){config.customCSS=parameters.isCustomCSS;}
if(parameters.locale){config.locale=parameters.locale;}
if(parameters.isStaging){config.dev=parameters.isStaging;}
return config;};TVE.prototype.on=function(eventName,cb){this._events=this._events||{};this._events[eventName]=this._events[eventName]||[];this._events[eventName].push(cb);};TVE.prototype.trigger=function(eventName){var args=Array.prototype.slice.call(arguments,1),event=this._events&&this._events[eventName],i,len;if(event&&event.length){for(i=0,len=event.length;i<len;i++){if(typeof event[i]==='function'){try{event[i].apply(null,args);}catch(e){console.error(this.moduleName+' error in event ['+eventName+']:',e);}}}}};TVE.prototype.reportEvent=function(){var controller=this,reTryCounter=0,RE_TRY_MAX_COUNT=5,reTryInterval;if(!this.makeReportingCall()){reTryInterval=setInterval(function(){if(controller.makeReportingCall()||reTryCounter++<RE_TRY_MAX_COUNT){clearInterval(reTryInterval);}},1000);}};TVE.prototype.makeReportingCall=function(){var pageFranchise='no-association';if($Crabapple.repo._repoData.omniture&&typeof Bento==='object'){if(Bento!==null){try{if($Crabapple.repo._repoData.omniture.values.eVar6){pageFranchise=$Crabapple.repo._repoData.omniture.values.eVar6;}
Bento.onCustomData("channel","TVE");Bento.onCustomData("franchise",pageFranchise);Bento.onTVEWelcome();return true;}catch(e){return false;}}}else{return false;}};})($Crabapple);(function(namespace){var Player=function(el,parameters){this._deferredEvents=[];this.instance=null;this.isInitialized=false;this.el=el;this.config=this.buildConfig(parameters);this.setupVideoConsentTracking();this.initialize();},_defaultConfig={width:'100%',height:'100%',multiplayerSupport:true};namespace.Player=Player;Player.isPlaybackSupported=(function(){var userAgent=navigator.userAgent,output=false,execResult;if(/iP(hone|ad)/.test(userAgent)){execResult=/OS (\d+)[_\d]+? like Mac OS X/.exec(userAgent);output=6<=parseInt(execResult&&execResult[1]);}else if(/iPod/.test(userAgent)){output=false;}else if(/Android/i.test(userAgent)){if(/Chrome/i.test(userAgent)){execResult=/Android\s([0-9\.]*)/.exec(userAgent);output=4.43<=getVersion(execResult&&execResult[1]);}}else if(/Windows Phone|IEMobile|WPDesktop|XBLWP7/i.test(userAgent)){output=false;}else if(/MSIE/.test(userAgent)){execResult=/MSIE (\d+\.\d+);/.exec(userAgent);output=10<=parseInt(execResult&&execResult[1]);}else{output=true;}
function getVersion(str){if(str){return parseFloat(str.replace(/(?!^\d+\.)((\d+)(\.))/g,"$2"));}
return 0;}
return output;}());Player.prototype.initialize=function(){var player=this;if(!Player.isPlaybackSupported){throw new Error('$Crabapple.Player: Playback is not supported on current platform');}
this.ensurePlayerScriptIsLoaded(function(){player.initializePlayerInstance();});this.isInitialized=true;};Player.prototype.initializePlayerInstance=function(){this.instance=new window.MTVNPlayer.Player(this.el,this.config);this.addDeferredPlayerEventsListeners();};Player.prototype.setupVideoConsentTracking=function(){var config=this.config;var setIMAConsentProperty=function(hasUserConsented){config.embedVars=config.embedVars||{};config.embedVars.custParams=config.embedVars.custParams||'';if(config.embedVars.custParams==''){config.embedVars.custParams+='consent='+hasUserConsented;}
else{if(config.embedVars.custParams.indexOf("consent=")!=-1){if(hasUserConsented){config.embedVars.custParams=config.embedVars.custParams.replace('consent=false','consent=true');}
else{config.embedVars.custParams=config.embedVars.custParams.replace('consent=true','consent=false');}}
else{config.embedVars.custParams+='&consent='+hasUserConsented;}}};var toggleVideoReporting=function(hasUserConsented){config.comScoreEnabled=hasUserConsented?config.comScoreEnabled:false;config.nielsenReporterEnabled=hasUserConsented?config.nielsenReporterEnabled:false;config.demdexEnabled=hasUserConsented?config.demdexEnabled:false;};var setFreewheelConsentProperty=function(hasUserConsented){config.flashVars=config.flashVars||{};config.flashVars.fwKeyValues=config.flashVars.fwKeyValues||{};config.flashVars.fwKeyValues.consent=hasUserConsented?"yes":"no";config.flashVars.fwKeyValues._fw_gdpr=hasUserConsented?"0":"1";};if(!window.evidon){document.addEventListener('evidon:loaded',this.setupVideoConsentTracking.bind(this));}
if(document.cookie.indexOf('_evidon_consent_cookie')===-1||(window.evidon&&window.evidon.notice&&!window.evidon.notice.consentIsGiven)){document.addEventListener('evidon:consentGiven',setIMAConsentProperty.bind(this,true));document.addEventListener('evidon:consentGiven',toggleVideoReporting.bind(this,true));document.addEventListener('evidon:consentGiven',setFreewheelConsentProperty.bind(this,true));setIMAConsentProperty(false);toggleVideoReporting(false);setFreewheelConsentProperty(false);return;}
setIMAConsentProperty(true);toggleVideoReporting(true);setFreewheelConsentProperty(true);};Player.prototype.destroy=function(){if(this.instance&&this.instance.$el&&typeof this.instance.destroy==='function'){this.instance.destroy();}
this.instance=null;};Player.prototype.playIndex=function(index){if(this.instance&&typeof this.instance.playIndex==='function'){this.instance.playIndex(index);}};Player.prototype.play=function(){if(this.instance&&typeof this.instance.play==='function'){this.instance.play();}};Player.prototype.pause=function(){if(this.instance&&typeof this.instance.pause==='function'){this.instance.pause();}};Player.prototype.isPaused=function(){if(this.instance&&typeof this.instance.isPaused==='function'){return this.instance.isPaused();}};Player.prototype.on=function(){if(!this.instance){this._deferredEvents=this._deferredEvents||[];this._deferredEvents.push(arguments);}else{this.instance.on.apply(this.instance,arguments);}};Player.prototype.addDeferredPlayerEventsListeners=function(){var deferredEvents=this._deferredEvents,playerInstance=this.instance,i,len;if(deferredEvents&&deferredEvents.length){for(i=0,len=deferredEvents.length;i<len;i++){playerInstance.on.apply(playerInstance,deferredEvents[i]);}
this._deferredEvents=[];}};Player.prototype.buildConfig=function(parameters){var config=$.extend({},_defaultConfig),embedVars={},flashVars={},tveMvpdName=(parameters.tveMvpdName||'none-selected').toLowerCase();config.uri=parameters.uri;if(parameters.embedVars){config.embedVars=parameters.embedVars;}
if(parameters.freewheelFlashProfileId){embedVars.freewheelFlashProfileId=parameters.freewheelFlashProfileId;}
if(parameters.freewheelHTML5ProfileId){embedVars.freewheelHTML5ProfileId=parameters.freewheelHTML5ProfileId;}
config.embedVars=$.extend({},config.embedVars,embedVars);flashVars.tveKeyValues=encodeURIComponent('tveAuthRequired='+parameters.tveAuthRequired+';tveMvpdName='+tveMvpdName);flashVars.fwKeyValues=parameters.flashVars&&parameters.flashVars.fwKeyValues;config.flashVars=$.extend({},config.flashVars,flashVars);config.tve={tveAuthRequired:parameters.tveAuthRequired,tveMvpdName:tveMvpdName,tveMediaToken:parameters.token};if(typeof parameters.autoPlay==='boolean'){config.autoPlay=parameters.autoPlay;}
if(typeof parameters.startIndex!=='undefined'){config.startIndex=parameters.startIndex;}
if(parameters.scoundrelMode){config.scoundrelMode=parameters.scoundrelMode;}
if(typeof parameters.jsHLSEnabledAndroid==='boolean'){config.jsHLSEnabledAndroid=parameters.jsHLSEnabledAndroid;}
if(typeof parameters.noBento==='boolean'){config.noBento=parameters.noBento;}
if(parameters.forceMute){config.forceMute=parameters.forceMute;}
if(parameters.isLive){config.isLive=parameters.isLive;}
if(parameters.isDVR){config.isDVR=parameters.isDVR;}
if(parameters.mediaGenAuthCheck){config.mediaGenAuthCheck=parameters.mediaGenAuthCheck;}
if(parameters.freewheelEnabled){config.freewheelEnabled=parameters.freewheelEnabled;}
if(parameters.comScoreAdTracking){config.comScoreAdTracking=parameters.comScoreAdTracking;}
if(parameters.comScoreEnabled){config.comScoreEnabled=parameters.comScoreEnabled;}
if(parameters.nielsenReporterEnabled){config.nielsenReporterEnabled=parameters.nielsenReporterEnabled;}
if(parameters.nielsenDprEnabled){config.nielsenDprEnabled=parameters.nielsenDprEnabled;}
if(parameters.omnitureAdTracking){config.omnitureAdTracking=parameters.omnitureAdTracking;}
if(parameters.omnitureEnabled){config.omnitureEnabled=parameters.omnitureEnabled;}
if(parameters.omnitureMediaTracking){config.omnitureMediaTracking=parameters.omnitureMediaTracking;}
if(parameters.chromeless){config.chromeless=parameters.chromeless;}
if(parameters.edgePlayerScript){config.edgePlayerScript=parameters.edgePlayerScript;}
if(parameters.omnitureHeartbeatMeasureDisabled){config.omnitureHeartbeatMeasureDisabled=parameters.omnitureHeartbeatMeasureDisabled;}
if(parameters.endSlateType){config.endSlateType=parameters.endSlateType;}
if(typeof parameters.simultaneousPlaybackEnabled==='boolean'){config.simultaneousPlaybackEnabled=parameters.simultaneousPlaybackEnabled;}
if(typeof parameters.demdexEnabled==='boolean'){config.demdexEnabled=parameters.demdexEnabled;}
if(typeof parameters.chromeless==='boolean'){config.chromeless=parameters.chromeless;}
return config;};Player.prototype.ensurePlayerScriptIsLoaded=function(cb){if(window.MTVNPlayer&&typeof window.MTVNPlayer.Player==='function'){if(typeof cb==='function'){cb();}}else{var playerScriptSrc=this.getPlayerScriptSrc();if(playerScriptSrc){this.loadScript(playerScriptSrc,cb);}else{throw new Error('$Crabapple.Player: no source for player script is configured. Can not load the player');}}};Player.prototype.loadScript=function(src,cb){var s=document.createElement('script');s.onload=function(){if(typeof cb==='function'){cb();}};s.src=src;document.head.appendChild(s);};Player.prototype.getPlayerScriptSrc=function(){var triforceConfig=window.TriforceConfiguration;var playerScript=triforceConfig.playerScript;if(this.config.edgePlayerScript)playerScript=this.config.edgePlayerScript;return playerScript;};})($Crabapple);
/*!
 *  Copyright 2011 Twitter, Inc.
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 */
var Hogan={};(function(Hogan){Hogan.Template=function(codeObj,text,compiler,options){codeObj=codeObj||{};this.r=codeObj.code||this.r;this.c=compiler;this.options=options||{};this.text=text||'';this.partials=codeObj.partials||{};this.subs=codeObj.subs||{};this.buf='';}
Hogan.Template.prototype={r:function(context,partials,indent){return'';},v:hoganEscape,t:coerceToString,render:function render(context,partials,indent){return this.ri([context],partials||{},indent);},ri:function(context,partials,indent){return this.r(context,partials,indent);},ep:function(symbol,partials){var partial=this.partials[symbol];var template=partials[partial.name];if(partial.instance&&partial.base==template){return partial.instance;}
if(typeof template=='string'){if(!this.c){throw new Error("No compiler available.");}
template=this.c.compile(template,this.options);}
if(!template){return null;}
this.partials[symbol].base=template;if(partial.subs){if(!partials.stackText)partials.stackText={};for(var key in partial.subs){if(!partials.stackText[key]){partials.stackText[key]=(this.activeSub!==undefined&&partials.stackText[this.activeSub])?partials.stackText[this.activeSub]:this.text;}}
template=createSpecializedPartial(template,partial.subs,partial.partials,this.stackSubs,this.stackPartials,partials.stackText);}
this.partials[symbol].instance=template;return template;},rp:function(symbol,context,partials,indent){var partial=this.ep(symbol,partials);if(!partial){return'';}
return partial.ri(context,partials,indent);},rs:function(context,partials,section){var tail=context[context.length-1];if(!isArray(tail)){section(context,partials,this);return;}
for(var i=0;i<tail.length;i++){context.push(tail[i]);section(context,partials,this);context.pop();}},s:function(val,ctx,partials,inverted,start,end,tags){var pass;if(isArray(val)&&val.length===0){return false;}
if(typeof val=='function'){val=this.ms(val,ctx,partials,inverted,start,end,tags);}
pass=!!val;if(!inverted&&pass&&ctx){ctx.push(val);}
return pass;},d:function(key,ctx,partials,returnFound){var found,names=key.split('.'),val=names[0]===''?ctx[ctx.length-1]:this.f(names[0],ctx,partials,returnFound),doModelGet=this.options.modelGet,cx=null;if(key!=='.'){for(var i=1;i<names.length;i++){found=findInScope(names[i],val,doModelGet);if(found!==undefined){cx=val;val=found;}else{val='';}}}
if(returnFound&&!val){return false;}
if(!returnFound&&typeof val=='function'){ctx.push(cx);val=this.mv(val,ctx,partials);ctx.pop();}
return val;},f:function(key,ctx,partials,returnFound){var val=false,v=null,found=false,doModelGet=this.options.modelGet;for(var i=ctx.length-1;i>=0;i--){v=ctx[i];val=findInScope(key,v,doModelGet);if(val!==undefined){found=true;break;}}
if(!found){return(returnFound)?false:"";}
if(!returnFound&&typeof val=='function'){val=this.mv(val,ctx,partials);}
return val;},ls:function(func,cx,ctx,partials,text,tags){var oldTags=this.options.delimiters;this.options.delimiters=tags;this.b(this.ct(coerceToString(func.call(cx,text,ctx)),cx,partials));this.options.delimiters=oldTags;return false;},ct:function(text,cx,partials){if(this.options.disableLambda){throw new Error('Lambda features disabled.');}
return this.c.compile(text,this.options).render(cx,partials);},b:function(s){this.buf+=s;},fl:function(){var r=this.buf;this.buf='';return r;},ms:function(func,ctx,partials,inverted,start,end,tags){var textSource,cx=ctx[ctx.length-1],result=func.call(cx);if(typeof result=='function'){if(inverted){return true;}else{textSource=(this.activeSub&&this.subsText&&this.subsText[this.activeSub])?this.subsText[this.activeSub]:this.text;return this.ls(result,cx,ctx,partials,textSource.substring(start,end),tags);}}
return result;},mv:function(func,ctx,partials){var cx=ctx[ctx.length-1];var result=func.call(cx);if(typeof result=='function'){return this.ct(coerceToString(result.call(cx)),cx,partials);}
return result;},sub:function(name,context,partials,indent){var f=this.subs[name];if(f){this.activeSub=name;f(context,partials,this,indent);this.activeSub=false;}}};function findInScope(key,scope,doModelGet){var val;if(scope&&typeof scope=='object'){if(scope[key]!==undefined){val=scope[key];}else if(doModelGet&&scope.get&&typeof scope.get=='function'){val=scope.get(key);}}
return val;}
function createSpecializedPartial(instance,subs,partials,stackSubs,stackPartials,stackText){function PartialTemplate(){}
PartialTemplate.prototype=instance;function Substitutions(){}
Substitutions.prototype=instance.subs;function StackSubstitutions(){}
StackSubstitutions.prototype=stackSubs||{};function StackPartials(){}
StackPartials.prototype=stackPartials||{};var key;var partial=new PartialTemplate();partial.subs=new Substitutions();partial.subsText={};partial.buf='';stackSubs=new StackSubstitutions();partial.stackSubs=stackSubs;partial.subsText=stackText;for(key in subs){if(!stackSubs[key])stackSubs[key]=subs[key];}
for(key in stackSubs){partial.subs[key]=stackSubs[key];}
stackPartials=new StackPartials();partial.stackPartials=stackPartials;for(key in partials){if(!stackPartials[key])stackPartials[key]=partials[key];}
for(key in stackPartials){partial.partials[key]=stackPartials[key];}
return partial;}
var rAmp=/&/g,rLt=/</g,rGt=/>/g,rApos=/\'/g,rQuot=/\"/g,hChars=/[&<>\"\']/;function coerceToString(val){return String((val===null||val===undefined)?'':val);}
function hoganEscape(str){str=coerceToString(str);return hChars.test(str)?str.replace(rAmp,'&amp;').replace(rLt,'&lt;').replace(rGt,'&gt;').replace(rApos,'&#39;').replace(rQuot,'&quot;'):str;}
var isArray=Array.isArray||function(a){return Object.prototype.toString.call(a)==='[object Array]';};})(typeof exports!=='undefined'?exports:Hogan);(function(Hogan){var rIsWhitespace=/\S/,rQuot=/\"/g,rNewline=/\n/g,rCr=/\r/g,rSlash=/\\/g,rLineSep=/\u2028/,rParagraphSep=/\u2029/;Hogan.tags={'#':1,'^':2,'<':3,'$':4,'/':5,'!':6,'>':7,'=':8,'_v':9,'{':10,'&':11,'_t':12};Hogan.scan=function scan(text,delimiters){var len=text.length,IN_TEXT=0,IN_TAG_TYPE=1,IN_TAG=2,state=IN_TEXT,tagType=null,tag=null,buf='',tokens=[],seenTag=false,i=0,lineStart=0,otag='{{',ctag='}}';function addBuf(){if(buf.length>0){tokens.push({tag:'_t',text:new String(buf)});buf='';}}
function lineIsWhitespace(){var isAllWhitespace=true;for(var j=lineStart;j<tokens.length;j++){isAllWhitespace=(Hogan.tags[tokens[j].tag]<Hogan.tags['_v'])||(tokens[j].tag=='_t'&&tokens[j].text.match(rIsWhitespace)===null);if(!isAllWhitespace){return false;}}
return isAllWhitespace;}
function filterLine(haveSeenTag,noNewLine){addBuf();if(haveSeenTag&&lineIsWhitespace()){for(var j=lineStart,next;j<tokens.length;j++){if(tokens[j].text){if((next=tokens[j+1])&&next.tag=='>'){next.indent=tokens[j].text.toString()}
tokens.splice(j,1);}}}else if(!noNewLine){tokens.push({tag:'\n'});}
seenTag=false;lineStart=tokens.length;}
function changeDelimiters(text,index){var close='='+ctag,closeIndex=text.indexOf(close,index),delimiters=trim(text.substring(text.indexOf('=',index)+1,closeIndex)).split(' ');otag=delimiters[0];ctag=delimiters[delimiters.length-1];return closeIndex+close.length-1;}
if(delimiters){delimiters=delimiters.split(' ');otag=delimiters[0];ctag=delimiters[1];}
for(i=0;i<len;i++){if(state==IN_TEXT){if(tagChange(otag,text,i)){--i;addBuf();state=IN_TAG_TYPE;}else{if(text.charAt(i)=='\n'){filterLine(seenTag);}else{buf+=text.charAt(i);}}}else if(state==IN_TAG_TYPE){i+=otag.length-1;tag=Hogan.tags[text.charAt(i+1)];tagType=tag?text.charAt(i+1):'_v';if(tagType=='='){i=changeDelimiters(text,i);state=IN_TEXT;}else{if(tag){i++;}
state=IN_TAG;}
seenTag=i;}else{if(tagChange(ctag,text,i)){tokens.push({tag:tagType,n:trim(buf),otag:otag,ctag:ctag,i:(tagType=='/')?seenTag-otag.length:i+ctag.length});buf='';i+=ctag.length-1;state=IN_TEXT;if(tagType=='{'){if(ctag=='}}'){i++;}else{cleanTripleStache(tokens[tokens.length-1]);}}}else{buf+=text.charAt(i);}}}
filterLine(seenTag,true);return tokens;}
function cleanTripleStache(token){if(token.n.substr(token.n.length-1)==='}'){token.n=token.n.substring(0,token.n.length-1);}}
function trim(s){if(s.trim){return s.trim();}
return s.replace(/^\s*|\s*$/g,'');}
function tagChange(tag,text,index){if(text.charAt(index)!=tag.charAt(0)){return false;}
for(var i=1,l=tag.length;i<l;i++){if(text.charAt(index+i)!=tag.charAt(i)){return false;}}
return true;}
var allowedInSuper={'_t':true,'\n':true,'$':true,'/':true};function buildTree(tokens,kind,stack,customTags){var instructions=[],opener=null,tail=null,token=null;tail=stack[stack.length-1];while(tokens.length>0){token=tokens.shift();if(tail&&tail.tag=='<'&&!(token.tag in allowedInSuper)){throw new Error('Illegal content in < super tag.');}
if(Hogan.tags[token.tag]<=Hogan.tags['$']||isOpener(token,customTags)){stack.push(token);token.nodes=buildTree(tokens,token.tag,stack,customTags);}else if(token.tag=='/'){if(stack.length===0){throw new Error('Closing tag without opener: /'+token.n);}
opener=stack.pop();if(token.n!=opener.n&&!isCloser(token.n,opener.n,customTags)){throw new Error('Nesting error: '+opener.n+' vs. '+token.n);}
opener.end=token.i;return instructions;}else if(token.tag=='\n'){token.last=(tokens.length==0)||(tokens[0].tag=='\n');}
instructions.push(token);}
if(stack.length>0){throw new Error('missing closing tag: '+stack.pop().n);}
return instructions;}
function isOpener(token,tags){for(var i=0,l=tags.length;i<l;i++){if(tags[i].o==token.n){token.tag='#';return true;}}}
function isCloser(close,open,tags){for(var i=0,l=tags.length;i<l;i++){if(tags[i].c==close&&tags[i].o==open){return true;}}}
function stringifySubstitutions(obj){var items=[];for(var key in obj){items.push('"'+esc(key)+'": function(c,p,t,i) {'+obj[key]+'}');}
return"{ "+items.join(",")+" }";}
function stringifyPartials(codeObj){var partials=[];for(var key in codeObj.partials){partials.push('"'+esc(key)+'":{name:"'+esc(codeObj.partials[key].name)+'", '+stringifyPartials(codeObj.partials[key])+"}");}
return"partials: {"+partials.join(",")+"}, subs: "+stringifySubstitutions(codeObj.subs);}
Hogan.stringify=function(codeObj,text,options){return"{code: function (c,p,i) { "+Hogan.wrapMain(codeObj.code)+" },"+stringifyPartials(codeObj)+"}";}
var serialNo=0;Hogan.generate=function(tree,text,options){serialNo=0;var context={code:'',subs:{},partials:{}};Hogan.walk(tree,context);if(options.asString){return this.stringify(context,text,options);}
return this.makeTemplate(context,text,options);}
Hogan.wrapMain=function(code){return'var t=this;t.b(i=i||"");'+code+'return t.fl();';}
Hogan.template=Hogan.Template;Hogan.makeTemplate=function(codeObj,text,options){var template=this.makePartials(codeObj);template.code=new Function('c','p','i',this.wrapMain(codeObj.code));return new this.template(template,text,this,options);}
Hogan.makePartials=function(codeObj){var key,template={subs:{},partials:codeObj.partials,name:codeObj.name};for(key in template.partials){template.partials[key]=this.makePartials(template.partials[key]);}
for(key in codeObj.subs){template.subs[key]=new Function('c','p','t','i',codeObj.subs[key]);}
return template;}
function esc(s){return s.replace(rSlash,'\\\\').replace(rQuot,'\\\"').replace(rNewline,'\\n').replace(rCr,'\\r').replace(rLineSep,'\\u2028').replace(rParagraphSep,'\\u2029');}
function chooseMethod(s){return(~s.indexOf('.'))?'d':'f';}
function createPartial(node,context){var prefix="<"+(context.prefix||"");var sym=prefix+node.n+serialNo++;context.partials[sym]={name:node.n,partials:{}};context.code+='t.b(t.rp("'+esc(sym)+'",c,p,"'+(node.indent||'')+'"));';return sym;}
Hogan.codegen={'#':function(node,context){context.code+='if(t.s(t.'+chooseMethod(node.n)+'("'+esc(node.n)+'",c,p,1),'+'c,p,0,'+node.i+','+node.end+',"'+node.otag+" "+node.ctag+'")){'+'t.rs(c,p,'+'function(c,p,t){';Hogan.walk(node.nodes,context);context.code+='});c.pop();}';},'^':function(node,context){context.code+='if(!t.s(t.'+chooseMethod(node.n)+'("'+esc(node.n)+'",c,p,1),c,p,1,0,0,"")){';Hogan.walk(node.nodes,context);context.code+='};';},'>':createPartial,'<':function(node,context){var ctx={partials:{},code:'',subs:{},inPartial:true};Hogan.walk(node.nodes,ctx);var template=context.partials[createPartial(node,context)];template.subs=ctx.subs;template.partials=ctx.partials;},'$':function(node,context){var ctx={subs:{},code:'',partials:context.partials,prefix:node.n};Hogan.walk(node.nodes,ctx);context.subs[node.n]=ctx.code;if(!context.inPartial){context.code+='t.sub("'+esc(node.n)+'",c,p,i);';}},'\n':function(node,context){context.code+=write('"\\n"'+(node.last?'':' + i'));},'_v':function(node,context){context.code+='t.b(t.v(t.'+chooseMethod(node.n)+'("'+esc(node.n)+'",c,p,0)));';},'_t':function(node,context){context.code+=write('"'+esc(node.text)+'"');},'{':tripleStache,'&':tripleStache}
function tripleStache(node,context){context.code+='t.b(t.t(t.'+chooseMethod(node.n)+'("'+esc(node.n)+'",c,p,0)));';}
function write(s){return't.b('+s+');';}
Hogan.walk=function(nodelist,context){var func;for(var i=0,l=nodelist.length;i<l;i++){func=Hogan.codegen[nodelist[i].tag];func&&func(nodelist[i],context);}
return context;}
Hogan.parse=function(tokens,text,options){options=options||{};return buildTree(tokens,'',[],options.sectionTags||[]);}
Hogan.cache={};Hogan.cacheKey=function(text,options){return[text,!!options.asString,!!options.disableLambda,options.delimiters,!!options.modelGet].join('||');}
Hogan.compile=function(text,options){options=options||{};var key=Hogan.cacheKey(text,options);var template=this.cache[key];if(template){var partials=template.partials;for(var name in partials){delete partials[name].instance;}
return template;}
template=this.generate(this.parse(this.scan(text,options.delimiters),text,options),text,options);return this.cache[key]=template;}})(typeof exports!=='undefined'?exports:Hogan);
/*!
 * Flickity PACKAGED v2.0.5
 * Touch, responsive, flickable carousels
 *
 * Licensed GPLv3 for open source use
 * or Flickity Commercial License for commercial use
 *
 * http://flickity.metafizzy.co
 * Copyright 2016 Metafizzy
 */!function(t,e){"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("jquery")):t.jQueryBridget=e(t,t.jQuery)}(window,function(t,e){"use strict";function i(i,o,a){function l(t,e,n){var s,o="$()."+i+'("'+e+'")';return t.each(function(t,l){var h=a.data(l,i);if(!h)return void r(i+" not initialized. Cannot call methods, i.e. "+o);var c=h[e];if(!c||"_"==e.charAt(0))return void r(o+" is not a valid method");var d=c.apply(h,n);s=void 0===s?d:s}),void 0!==s?s:t}function h(t,e){t.each(function(t,n){var s=a.data(n,i);s?(s.option(e),s._init()):(s=new o(n,e),a.data(n,i,s))})}a=a||e||t.jQuery,a&&(o.prototype.option||(o.prototype.option=function(t){a.isPlainObject(t)&&(this.options=a.extend(!0,this.options,t))}),a.fn[i]=function(t){if("string"==typeof t){var e=s.call(arguments,1);return l(this,t,e)}return h(this,t),this},n(a))}function n(t){!t||t&&t.bridget||(t.bridget=i)}var s=Array.prototype.slice,o=t.console,r="undefined"==typeof o?function(){}:function(t){o.error(t)};return n(e||t.jQuery),i}),function(t,e){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",e):"object"==typeof module&&module.exports?module.exports=e():t.EvEmitter=e()}("undefined"!=typeof window?window:this,function(){function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var i=this._events=this._events||{},n=i[t]=i[t]||[];return n.indexOf(e)==-1&&n.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var i=this._onceEvents=this._onceEvents||{},n=i[t]=i[t]||{};return n[e]=!0,this}},e.off=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=i.indexOf(e);return n!=-1&&i.splice(n,1),this}},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=0,s=i[n];e=e||[];for(var o=this._onceEvents&&this._onceEvents[t];s;){var r=o&&o[s];r&&(this.off(t,s),delete o[s]),s.apply(this,e),n+=r?0:1,s=i[n]}return this}},t}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("get-size/get-size",[],function(){return e()}):"object"==typeof module&&module.exports?module.exports=e():t.getSize=e()}(window,function(){"use strict";function t(t){var e=parseFloat(t),i=t.indexOf("%")==-1&&!isNaN(e);return i&&e}function e(){}function i(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0;e<h;e++){var i=l[e];t[i]=0}return t}function n(t){var e=getComputedStyle(t);return e||a("Style returned "+e+". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1"),e}function s(){if(!c){c=!0;var e=document.createElement("div");e.style.width="200px",e.style.padding="1px 2px 3px 4px",e.style.borderStyle="solid",e.style.borderWidth="1px 2px 3px 4px",e.style.boxSizing="border-box";var i=document.body||document.documentElement;i.appendChild(e);var s=n(e);o.isBoxSizeOuter=r=200==t(s.width),i.removeChild(e)}}function o(e){if(s(),"string"==typeof e&&(e=document.querySelector(e)),e&&"object"==typeof e&&e.nodeType){var o=n(e);if("none"==o.display)return i();var a={};a.width=e.offsetWidth,a.height=e.offsetHeight;for(var c=a.isBorderBox="border-box"==o.boxSizing,d=0;d<h;d++){var u=l[d],f=o[u],p=parseFloat(f);a[u]=isNaN(p)?0:p}var v=a.paddingLeft+a.paddingRight,g=a.paddingTop+a.paddingBottom,m=a.marginLeft+a.marginRight,y=a.marginTop+a.marginBottom,S=a.borderLeftWidth+a.borderRightWidth,E=a.borderTopWidth+a.borderBottomWidth,b=c&&r,x=t(o.width);x!==!1&&(a.width=x+(b?0:v+S));var C=t(o.height);return C!==!1&&(a.height=C+(b?0:g+E)),a.innerWidth=a.width-(v+S),a.innerHeight=a.height-(g+E),a.outerWidth=a.width+m,a.outerHeight=a.height+y,a}}var r,a="undefined"==typeof console?e:function(t){console.error(t)},l=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],h=l.length,c=!1;return o}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("desandro-matches-selector/matches-selector",e):"object"==typeof module&&module.exports?module.exports=e():t.matchesSelector=e()}(window,function(){"use strict";var t=function(){var t=Element.prototype;if(t.matches)return"matches";if(t.matchesSelector)return"matchesSelector";for(var e=["webkit","moz","ms","o"],i=0;i<e.length;i++){var n=e[i],s=n+"MatchesSelector";if(t[s])return s}}();return function(e,i){return e[t](i)}}),function(t,e){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("desandro-matches-selector")):t.fizzyUIUtils=e(t,t.matchesSelector)}(window,function(t,e){var i={};i.extend=function(t,e){for(var i in e)t[i]=e[i];return t},i.modulo=function(t,e){return(t%e+e)%e},i.makeArray=function(t){var e=[];if(Array.isArray(t))e=t;else if(t&&"number"==typeof t.length)for(var i=0;i<t.length;i++)e.push(t[i]);else e.push(t);return e},i.removeFrom=function(t,e){var i=t.indexOf(e);i!=-1&&t.splice(i,1)},i.getParent=function(t,i){for(;t!=document.body;)if(t=t.parentNode,e(t,i))return t},i.getQueryElement=function(t){return"string"==typeof t?document.querySelector(t):t},i.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},i.filterFindElements=function(t,n){t=i.makeArray(t);var s=[];return t.forEach(function(t){if(t instanceof HTMLElement){if(!n)return void s.push(t);e(t,n)&&s.push(t);for(var i=t.querySelectorAll(n),o=0;o<i.length;o++)s.push(i[o])}}),s},i.debounceMethod=function(t,e,i){var n=t.prototype[e],s=e+"Timeout";t.prototype[e]=function(){var t=this[s];t&&clearTimeout(t);var e=arguments,o=this;this[s]=setTimeout(function(){n.apply(o,e),delete o[s]},i||100)}},i.docReady=function(t){var e=document.readyState;"complete"==e||"interactive"==e?setTimeout(t):document.addEventListener("DOMContentLoaded",t)},i.toDashed=function(t){return t.replace(/(.)([A-Z])/g,function(t,e,i){return e+"-"+i}).toLowerCase()};var n=t.console;return i.htmlInit=function(e,s){i.docReady(function(){var o=i.toDashed(s),r="data-"+o,a=document.querySelectorAll("["+r+"]"),l=document.querySelectorAll(".js-"+o),h=i.makeArray(a).concat(i.makeArray(l)),c=r+"-options",d=t.jQuery;h.forEach(function(t){var i,o=t.getAttribute(r)||t.getAttribute(c);try{i=o&&JSON.parse(o)}catch(a){return void(n&&n.error("Error parsing "+r+" on "+t.className+": "+a))}var l=new e(t,i);d&&d.data(t,s,l)})})},i}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/cell",["get-size/get-size"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("get-size")):(t.Flickity=t.Flickity||{},t.Flickity.Cell=e(t,t.getSize))}(window,function(t,e){function i(t,e){this.element=t,this.parent=e,this.create()}var n=i.prototype;return n.create=function(){this.element.style.position="absolute",this.x=0,this.shift=0},n.destroy=function(){this.element.style.position="";var t=this.parent.originSide;this.element.style[t]=""},n.getSize=function(){this.size=e(this.element)},n.setPosition=function(t){this.x=t,this.updateTarget(),this.renderPosition(t)},n.updateTarget=n.setDefaultTarget=function(){var t="left"==this.parent.originSide?"marginLeft":"marginRight";this.target=this.x+this.size[t]+this.size.width*this.parent.cellAlign},n.renderPosition=function(t){var e=this.parent.originSide;this.element.style[e]=this.parent.getPositionValue(t)},n.wrapShift=function(t){this.shift=t,this.renderPosition(this.x+this.parent.slideableWidth*t)},n.remove=function(){this.element.parentNode.removeChild(this.element)},i}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/slide",e):"object"==typeof module&&module.exports?module.exports=e():(t.Flickity=t.Flickity||{},t.Flickity.Slide=e())}(window,function(){"use strict";function t(t){this.parent=t,this.isOriginLeft="left"==t.originSide,this.cells=[],this.outerWidth=0,this.height=0}var e=t.prototype;return e.addCell=function(t){if(this.cells.push(t),this.outerWidth+=t.size.outerWidth,this.height=Math.max(t.size.outerHeight,this.height),1==this.cells.length){this.x=t.x;var e=this.isOriginLeft?"marginLeft":"marginRight";this.firstMargin=t.size[e]}},e.updateTarget=function(){var t=this.isOriginLeft?"marginRight":"marginLeft",e=this.getLastCell(),i=e?e.size[t]:0,n=this.outerWidth-(this.firstMargin+i);this.target=this.x+this.firstMargin+n*this.parent.cellAlign},e.getLastCell=function(){return this.cells[this.cells.length-1]},e.select=function(){this.changeSelectedClass("add")},e.unselect=function(){this.changeSelectedClass("remove")},e.changeSelectedClass=function(t){this.cells.forEach(function(e){e.element.classList[t]("is-selected")})},e.getCellElements=function(){return this.cells.map(function(t){return t.element})},t}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/animate",["fizzy-ui-utils/utils"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("fizzy-ui-utils")):(t.Flickity=t.Flickity||{},t.Flickity.animatePrototype=e(t,t.fizzyUIUtils))}(window,function(t,e){var i=t.requestAnimationFrame||t.webkitRequestAnimationFrame,n=0;i||(i=function(t){var e=(new Date).getTime(),i=Math.max(0,16-(e-n)),s=setTimeout(t,i);return n=e+i,s});var s={};s.startAnimation=function(){this.isAnimating||(this.isAnimating=!0,this.restingFrames=0,this.animate())},s.animate=function(){this.applyDragForce(),this.applySelectedAttraction();var t=this.x;if(this.integratePhysics(),this.positionSlider(),this.settle(t),this.isAnimating){var e=this;i(function(){e.animate()})}};var o=function(){var t=document.documentElement.style;return"string"==typeof t.transform?"transform":"WebkitTransform"}();return s.positionSlider=function(){var t=this.x;this.options.wrapAround&&this.cells.length>1&&(t=e.modulo(t,this.slideableWidth),t-=this.slideableWidth,this.shiftWrapCells(t)),t+=this.cursorPosition,t=this.options.rightToLeft&&o?-t:t;var i=this.getPositionValue(t);this.slider.style[o]=this.isAnimating?"translate3d("+i+",0,0)":"translateX("+i+")";var n=this.slides[0];if(n){var s=-this.x-n.target,r=s/this.slidesWidth;this.dispatchEvent("scroll",null,[r,s])}},s.positionSliderAtSelected=function(){this.cells.length&&(this.x=-this.selectedSlide.target,this.positionSlider())},s.getPositionValue=function(t){return this.options.percentPosition?.01*Math.round(t/this.size.innerWidth*1e4)+"%":Math.round(t)+"px"},s.settle=function(t){this.isPointerDown||Math.round(100*this.x)!=Math.round(100*t)||this.restingFrames++,this.restingFrames>2&&(this.isAnimating=!1,delete this.isFreeScrolling,this.positionSlider(),this.dispatchEvent("settle"))},s.shiftWrapCells=function(t){var e=this.cursorPosition+t;this._shiftCells(this.beforeShiftCells,e,-1);var i=this.size.innerWidth-(t+this.slideableWidth+this.cursorPosition);this._shiftCells(this.afterShiftCells,i,1)},s._shiftCells=function(t,e,i){for(var n=0;n<t.length;n++){var s=t[n],o=e>0?i:0;s.wrapShift(o),e-=s.size.outerWidth}},s._unshiftCells=function(t){if(t&&t.length)for(var e=0;e<t.length;e++)t[e].wrapShift(0)},s.integratePhysics=function(){this.x+=this.velocity,this.velocity*=this.getFrictionFactor()},s.applyForce=function(t){this.velocity+=t},s.getFrictionFactor=function(){return 1-this.options[this.isFreeScrolling?"freeScrollFriction":"friction"]},s.getRestingPosition=function(){return this.x+this.velocity/(1-this.getFrictionFactor())},s.applyDragForce=function(){if(this.isPointerDown){var t=this.dragX-this.x,e=t-this.velocity;this.applyForce(e)}},s.applySelectedAttraction=function(){if(!this.isPointerDown&&!this.isFreeScrolling&&this.cells.length){var t=this.selectedSlide.target*-1-this.x,e=t*this.options.selectedAttraction;this.applyForce(e)}},s}),function(t,e){if("function"==typeof define&&define.amd)define("flickity/js/flickity",["ev-emitter/ev-emitter","get-size/get-size","fizzy-ui-utils/utils","./cell","./slide","./animate"],function(i,n,s,o,r,a){return e(t,i,n,s,o,r,a)});else if("object"==typeof module&&module.exports)module.exports=e(t,require("ev-emitter"),require("get-size"),require("fizzy-ui-utils"),require("./cell"),require("./slide"),require("./animate"));else{var i=t.Flickity;t.Flickity=e(t,t.EvEmitter,t.getSize,t.fizzyUIUtils,i.Cell,i.Slide,i.animatePrototype)}}(window,function(t,e,i,n,s,o,r){function a(t,e){for(t=n.makeArray(t);t.length;)e.appendChild(t.shift())}function l(t,e){var i=n.getQueryElement(t);if(!i)return void(d&&d.error("Bad element for Flickity: "+(i||t)));if(this.element=i,this.element.flickityGUID){var s=f[this.element.flickityGUID];return s.option(e),s}h&&(this.$element=h(this.element)),this.options=n.extend({},this.constructor.defaults),this.option(e),this._create()}var h=t.jQuery,c=t.getComputedStyle,d=t.console,u=0,f={};l.defaults={accessibility:!0,cellAlign:"center",freeScrollFriction:.075,friction:.28,namespaceJQueryEvents:!0,percentPosition:!0,resize:!0,selectedAttraction:.025,setGallerySize:!0},l.createMethods=[];var p=l.prototype;n.extend(p,e.prototype),p._create=function(){var e=this.guid=++u;this.element.flickityGUID=e,f[e]=this,this.selectedIndex=0,this.restingFrames=0,this.x=0,this.velocity=0,this.originSide=this.options.rightToLeft?"right":"left",this.viewport=document.createElement("div"),this.viewport.className="flickity-viewport",this._createSlider(),(this.options.resize||this.options.watchCSS)&&t.addEventListener("resize",this),l.createMethods.forEach(function(t){this[t]()},this),this.options.watchCSS?this.watchCSS():this.activate()},p.option=function(t){n.extend(this.options,t)},p.activate=function(){if(!this.isActive){this.isActive=!0,this.element.classList.add("flickity-enabled"),this.options.rightToLeft&&this.element.classList.add("flickity-rtl"),this.getSize();var t=this._filterFindCellElements(this.element.children);a(t,this.slider),this.viewport.appendChild(this.slider),this.element.appendChild(this.viewport),this.reloadCells(),this.options.accessibility&&(this.element.tabIndex=0,this.element.addEventListener("keydown",this)),this.emitEvent("activate");var e,i=this.options.initialIndex;e=this.isInitActivated?this.selectedIndex:void 0!==i&&this.cells[i]?i:0,this.select(e,!1,!0),this.isInitActivated=!0}},p._createSlider=function(){var t=document.createElement("div");t.className="flickity-slider",t.style[this.originSide]=0,this.slider=t},p._filterFindCellElements=function(t){return n.filterFindElements(t,this.options.cellSelector)},p.reloadCells=function(){this.cells=this._makeCells(this.slider.children),this.positionCells(),this._getWrapShiftCells(),this.setGallerySize()},p._makeCells=function(t){var e=this._filterFindCellElements(t),i=e.map(function(t){return new s(t,this)},this);return i},p.getLastCell=function(){return this.cells[this.cells.length-1]},p.getLastSlide=function(){return this.slides[this.slides.length-1]},p.positionCells=function(){this._sizeCells(this.cells),this._positionCells(0)},p._positionCells=function(t){t=t||0,this.maxCellHeight=t?this.maxCellHeight||0:0;var e=0;if(t>0){var i=this.cells[t-1];e=i.x+i.size.outerWidth}for(var n=this.cells.length,s=t;s<n;s++){var o=this.cells[s];o.setPosition(e),e+=o.size.outerWidth,this.maxCellHeight=Math.max(o.size.outerHeight,this.maxCellHeight)}this.slideableWidth=e,this.updateSlides(),this._containSlides(),this.slidesWidth=n?this.getLastSlide().target-this.slides[0].target:0},p._sizeCells=function(t){t.forEach(function(t){t.getSize()})},p.updateSlides=function(){if(this.slides=[],this.cells.length){var t=new o(this);this.slides.push(t);var e="left"==this.originSide,i=e?"marginRight":"marginLeft",n=this._getCanCellFit();this.cells.forEach(function(e,s){if(!t.cells.length)return void t.addCell(e);var r=t.outerWidth-t.firstMargin+(e.size.outerWidth-e.size[i]);n.call(this,s,r)?t.addCell(e):(t.updateTarget(),t=new o(this),this.slides.push(t),t.addCell(e))},this),t.updateTarget(),this.updateSelectedSlide()}},p._getCanCellFit=function(){var t=this.options.groupCells;if(!t)return function(){return!1};if("number"==typeof t){var e=parseInt(t,10);return function(t){return t%e!==0}}var i="string"==typeof t&&t.match(/^(\d+)%$/),n=i?parseInt(i[1],10)/100:1;return function(t,e){return e<=(this.size.innerWidth+1)*n}},p._init=p.reposition=function(){this.positionCells(),this.positionSliderAtSelected()},p.getSize=function(){this.size=i(this.element),this.setCellAlign(),this.cursorPosition=this.size.innerWidth*this.cellAlign};var v={center:{left:.5,right:.5},left:{left:0,right:1},right:{right:0,left:1}};return p.setCellAlign=function(){var t=v[this.options.cellAlign];this.cellAlign=t?t[this.originSide]:this.options.cellAlign},p.setGallerySize=function(){if(this.options.setGallerySize){var t=this.options.adaptiveHeight&&this.selectedSlide?this.selectedSlide.height:this.maxCellHeight;this.viewport.style.height=t+"px"}},p._getWrapShiftCells=function(){if(this.options.wrapAround){this._unshiftCells(this.beforeShiftCells),this._unshiftCells(this.afterShiftCells);var t=this.cursorPosition,e=this.cells.length-1;this.beforeShiftCells=this._getGapCells(t,e,-1),t=this.size.innerWidth-this.cursorPosition,this.afterShiftCells=this._getGapCells(t,0,1)}},p._getGapCells=function(t,e,i){for(var n=[];t>0;){var s=this.cells[e];if(!s)break;n.push(s),e+=i,t-=s.size.outerWidth}return n},p._containSlides=function(){if(this.options.contain&&!this.options.wrapAround&&this.cells.length){var t=this.options.rightToLeft,e=t?"marginRight":"marginLeft",i=t?"marginLeft":"marginRight",n=this.slideableWidth-this.getLastCell().size[i],s=n<this.size.innerWidth,o=this.cursorPosition+this.cells[0].size[e],r=n-this.size.innerWidth*(1-this.cellAlign);this.slides.forEach(function(t){s?t.target=n*this.cellAlign:(t.target=Math.max(t.target,o),t.target=Math.min(t.target,r))},this)}},p.dispatchEvent=function(t,e,i){var n=e?[e].concat(i):i;if(this.emitEvent(t,n),h&&this.$element){t+=this.options.namespaceJQueryEvents?".flickity":"";var s=t;if(e){var o=h.Event(e);o.type=t,s=o}this.$element.trigger(s,i)}},p.select=function(t,e,i){this.isActive&&(t=parseInt(t,10),this._wrapSelect(t),(this.options.wrapAround||e)&&(t=n.modulo(t,this.slides.length)),this.slides[t]&&(this.selectedIndex=t,this.updateSelectedSlide(),i?this.positionSliderAtSelected():this.startAnimation(),this.options.adaptiveHeight&&this.setGallerySize(),this.dispatchEvent("select"),this.dispatchEvent("cellSelect")))},p._wrapSelect=function(t){var e=this.slides.length,i=this.options.wrapAround&&e>1;if(!i)return t;var s=n.modulo(t,e),o=Math.abs(s-this.selectedIndex),r=Math.abs(s+e-this.selectedIndex),a=Math.abs(s-e-this.selectedIndex);!this.isDragSelect&&r<o?t+=e:!this.isDragSelect&&a<o&&(t-=e),t<0?this.x-=this.slideableWidth:t>=e&&(this.x+=this.slideableWidth)},p.previous=function(t,e){this.select(this.selectedIndex-1,t,e)},p.next=function(t,e){this.select(this.selectedIndex+1,t,e)},p.updateSelectedSlide=function(){var t=this.slides[this.selectedIndex];t&&(this.unselectSelectedSlide(),this.selectedSlide=t,t.select(),this.selectedCells=t.cells,this.selectedElements=t.getCellElements(),this.selectedCell=t.cells[0],this.selectedElement=this.selectedElements[0])},p.unselectSelectedSlide=function(){this.selectedSlide&&this.selectedSlide.unselect()},p.selectCell=function(t,e,i){var n;"number"==typeof t?n=this.cells[t]:("string"==typeof t&&(t=this.element.querySelector(t)),n=this.getCell(t));for(var s=0;n&&s<this.slides.length;s++){var o=this.slides[s],r=o.cells.indexOf(n);if(r!=-1)return void this.select(s,e,i)}},p.getCell=function(t){for(var e=0;e<this.cells.length;e++){var i=this.cells[e];if(i.element==t)return i}},p.getCells=function(t){t=n.makeArray(t);var e=[];return t.forEach(function(t){var i=this.getCell(t);i&&e.push(i)},this),e},p.getCellElements=function(){return this.cells.map(function(t){return t.element})},p.getParentCell=function(t){var e=this.getCell(t);return e?e:(t=n.getParent(t,".flickity-slider > *"),this.getCell(t))},p.getAdjacentCellElements=function(t,e){if(!t)return this.selectedSlide.getCellElements();e=void 0===e?this.selectedIndex:e;var i=this.slides.length;if(1+2*t>=i)return this.getCellElements();for(var s=[],o=e-t;o<=e+t;o++){var r=this.options.wrapAround?n.modulo(o,i):o,a=this.slides[r];a&&(s=s.concat(a.getCellElements()))}return s},p.uiChange=function(){this.emitEvent("uiChange")},p.childUIPointerDown=function(t){this.emitEvent("childUIPointerDown",[t])},p.onresize=function(){this.watchCSS(),this.resize()},n.debounceMethod(l,"onresize",150),p.resize=function(){if(this.isActive){this.getSize(),this.options.wrapAround&&(this.x=n.modulo(this.x,this.slideableWidth)),this.positionCells(),this._getWrapShiftCells(),this.setGallerySize(),this.emitEvent("resize");var t=this.selectedElements&&this.selectedElements[0];this.selectCell(t,!1,!0)}},p.watchCSS=function(){var t=this.options.watchCSS;if(t){var e=c(this.element,":after").content;e.indexOf("flickity")!=-1?this.activate():this.deactivate()}},p.onkeydown=function(t){if(this.options.accessibility&&(!document.activeElement||document.activeElement==this.element))if(37==t.keyCode){var e=this.options.rightToLeft?"next":"previous";this.uiChange(),this[e]()}else if(39==t.keyCode){var i=this.options.rightToLeft?"previous":"next";this.uiChange(),this[i]()}},p.deactivate=function(){this.isActive&&(this.element.classList.remove("flickity-enabled"),this.element.classList.remove("flickity-rtl"),this.cells.forEach(function(t){t.destroy()}),this.unselectSelectedSlide(),this.element.removeChild(this.viewport),a(this.slider.children,this.element),this.options.accessibility&&(this.element.removeAttribute("tabIndex"),this.element.removeEventListener("keydown",this)),this.isActive=!1,this.emitEvent("deactivate"))},p.destroy=function(){this.deactivate(),t.removeEventListener("resize",this),this.emitEvent("destroy"),h&&this.$element&&h.removeData(this.element,"flickity"),delete this.element.flickityGUID,delete f[this.guid]},n.extend(p,r),l.data=function(t){t=n.getQueryElement(t);var e=t&&t.flickityGUID;return e&&f[e]},n.htmlInit(l,"flickity"),h&&h.bridget&&h.bridget("flickity",l),l.Cell=s,l}),function(t,e){"function"==typeof define&&define.amd?define("unipointer/unipointer",["ev-emitter/ev-emitter"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("ev-emitter")):t.Unipointer=e(t,t.EvEmitter)}(window,function(t,e){function i(){}function n(){}var s=n.prototype=Object.create(e.prototype);s.bindStartEvent=function(t){this._bindStartEvent(t,!0)},s.unbindStartEvent=function(t){this._bindStartEvent(t,!1)},s._bindStartEvent=function(e,i){i=void 0===i||!!i;var n=i?"addEventListener":"removeEventListener";t.navigator.pointerEnabled?e[n]("pointerdown",this):t.navigator.msPointerEnabled?e[n]("MSPointerDown",this):(e[n]("mousedown",this),e[n]("touchstart",this))},s.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},s.getTouch=function(t){for(var e=0;e<t.length;e++){var i=t[e];if(i.identifier==this.pointerIdentifier)return i}},s.onmousedown=function(t){var e=t.button;e&&0!==e&&1!==e||this._pointerDown(t,t)},s.ontouchstart=function(t){this._pointerDown(t,t.changedTouches[0])},s.onMSPointerDown=s.onpointerdown=function(t){this._pointerDown(t,t)},s._pointerDown=function(t,e){this.isPointerDown||(this.isPointerDown=!0,this.pointerIdentifier=void 0!==e.pointerId?e.pointerId:e.identifier,this.pointerDown(t,e))},s.pointerDown=function(t,e){this._bindPostStartEvents(t),this.emitEvent("pointerDown",[t,e])};var o={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"],MSPointerDown:["MSPointerMove","MSPointerUp","MSPointerCancel"]};return s._bindPostStartEvents=function(e){if(e){var i=o[e.type];i.forEach(function(e){t.addEventListener(e,this)},this),this._boundPointerEvents=i}},s._unbindPostStartEvents=function(){this._boundPointerEvents&&(this._boundPointerEvents.forEach(function(e){t.removeEventListener(e,this)},this),delete this._boundPointerEvents)},s.onmousemove=function(t){this._pointerMove(t,t)},s.onMSPointerMove=s.onpointermove=function(t){t.pointerId==this.pointerIdentifier&&this._pointerMove(t,t)},s.ontouchmove=function(t){var e=this.getTouch(t.changedTouches);e&&this._pointerMove(t,e)},s._pointerMove=function(t,e){this.pointerMove(t,e)},s.pointerMove=function(t,e){this.emitEvent("pointerMove",[t,e])},s.onmouseup=function(t){this._pointerUp(t,t)},s.onMSPointerUp=s.onpointerup=function(t){t.pointerId==this.pointerIdentifier&&this._pointerUp(t,t)},s.ontouchend=function(t){var e=this.getTouch(t.changedTouches);e&&this._pointerUp(t,e)},s._pointerUp=function(t,e){this._pointerDone(),this.pointerUp(t,e)},s.pointerUp=function(t,e){this.emitEvent("pointerUp",[t,e])},s._pointerDone=function(){this.isPointerDown=!1,delete this.pointerIdentifier,this._unbindPostStartEvents(),this.pointerDone()},s.pointerDone=i,s.onMSPointerCancel=s.onpointercancel=function(t){t.pointerId==this.pointerIdentifier&&this._pointerCancel(t,t)},s.ontouchcancel=function(t){var e=this.getTouch(t.changedTouches);e&&this._pointerCancel(t,e)},s._pointerCancel=function(t,e){this._pointerDone(),this.pointerCancel(t,e)},s.pointerCancel=function(t,e){this.emitEvent("pointerCancel",[t,e])},n.getPointerPoint=function(t){return{x:t.pageX,y:t.pageY}},n}),function(t,e){"function"==typeof define&&define.amd?define("unidragger/unidragger",["unipointer/unipointer"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("unipointer")):t.Unidragger=e(t,t.Unipointer)}(window,function(t,e){function i(){}function n(){}var s=n.prototype=Object.create(e.prototype);s.bindHandles=function(){this._bindHandles(!0)},s.unbindHandles=function(){this._bindHandles(!1)};var o=t.navigator;return s._bindHandles=function(t){t=void 0===t||!!t;var e;e=o.pointerEnabled?function(e){e.style.touchAction=t?"none":""}:o.msPointerEnabled?function(e){e.style.msTouchAction=t?"none":""}:i;for(var n=t?"addEventListener":"removeEventListener",s=0;s<this.handles.length;s++){var r=this.handles[s];this._bindStartEvent(r,t),e(r),r[n]("click",this)}},s.pointerDown=function(t,e){if("INPUT"==t.target.nodeName&&"range"==t.target.type)return this.isPointerDown=!1,void delete this.pointerIdentifier;this._dragPointerDown(t,e);var i=document.activeElement;i&&i.blur&&i.blur(),this._bindPostStartEvents(t),this.emitEvent("pointerDown",[t,e])},s._dragPointerDown=function(t,i){this.pointerDownPoint=e.getPointerPoint(i);var n=this.canPreventDefaultOnPointerDown(t,i);n&&t.preventDefault()},s.canPreventDefaultOnPointerDown=function(t){return"SELECT"!=t.target.nodeName},s.pointerMove=function(t,e){var i=this._dragPointerMove(t,e);this.emitEvent("pointerMove",[t,e,i]),this._dragMove(t,e,i)},s._dragPointerMove=function(t,i){var n=e.getPointerPoint(i),s={x:n.x-this.pointerDownPoint.x,y:n.y-this.pointerDownPoint.y};return!this.isDragging&&this.hasDragStarted(s)&&this._dragStart(t,i),s},s.hasDragStarted=function(t){return Math.abs(t.x)>3||Math.abs(t.y)>3},s.pointerUp=function(t,e){this.emitEvent("pointerUp",[t,e]),this._dragPointerUp(t,e)},s._dragPointerUp=function(t,e){this.isDragging?this._dragEnd(t,e):this._staticClick(t,e)},s._dragStart=function(t,i){this.isDragging=!0,this.dragStartPoint=e.getPointerPoint(i),this.isPreventingClicks=!0,this.dragStart(t,i)},s.dragStart=function(t,e){this.emitEvent("dragStart",[t,e])},s._dragMove=function(t,e,i){this.isDragging&&this.dragMove(t,e,i)},s.dragMove=function(t,e,i){t.preventDefault(),this.emitEvent("dragMove",[t,e,i])},s._dragEnd=function(t,e){this.isDragging=!1,setTimeout(function(){delete this.isPreventingClicks}.bind(this)),this.dragEnd(t,e)},s.dragEnd=function(t,e){this.emitEvent("dragEnd",[t,e])},s.onclick=function(t){this.isPreventingClicks&&t.preventDefault()},s._staticClick=function(t,e){if(!this.isIgnoringMouseUp||"mouseup"!=t.type){var i=t.target.nodeName;"INPUT"!=i&&"TEXTAREA"!=i||t.target.focus(),this.staticClick(t,e),"mouseup"!=t.type&&(this.isIgnoringMouseUp=!0,setTimeout(function(){delete this.isIgnoringMouseUp}.bind(this),400))}},s.staticClick=function(t,e){this.emitEvent("staticClick",[t,e])},n.getPointerPoint=e.getPointerPoint,n}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/drag",["./flickity","unidragger/unidragger","fizzy-ui-utils/utils"],function(i,n,s){return e(t,i,n,s)}):"object"==typeof module&&module.exports?module.exports=e(t,require("./flickity"),require("unidragger"),require("fizzy-ui-utils")):t.Flickity=e(t,t.Flickity,t.Unidragger,t.fizzyUIUtils)}(window,function(t,e,i,n){function s(){return{x:t.pageXOffset,y:t.pageYOffset}}n.extend(e.defaults,{draggable:!0,dragThreshold:3}),e.createMethods.push("_createDrag");var o=e.prototype;n.extend(o,i.prototype);var r="createTouch"in document,a=!1;o._createDrag=function(){this.on("activate",this.bindDrag),this.on("uiChange",this._uiChangeDrag),this.on("childUIPointerDown",this._childUIPointerDownDrag),this.on("deactivate",this.unbindDrag),r&&!a&&(t.addEventListener("touchmove",function(){}),a=!0)},o.bindDrag=function(){this.options.draggable&&!this.isDragBound&&(this.element.classList.add("is-draggable"),this.handles=[this.viewport],this.bindHandles(),this.isDragBound=!0)},o.unbindDrag=function(){this.isDragBound&&(this.element.classList.remove("is-draggable"),this.unbindHandles(),delete this.isDragBound)},o._uiChangeDrag=function(){delete this.isFreeScrolling},o._childUIPointerDownDrag=function(t){t.preventDefault(),this.pointerDownFocus(t)};var l={TEXTAREA:!0,INPUT:!0,OPTION:!0},h={radio:!0,checkbox:!0,button:!0,submit:!0,image:!0,file:!0};o.pointerDown=function(e,i){var n=l[e.target.nodeName]&&!h[e.target.type];if(n)return this.isPointerDown=!1,void delete this.pointerIdentifier;this._dragPointerDown(e,i);var o=document.activeElement;o&&o.blur&&o!=this.element&&o!=document.body&&o.blur(),this.pointerDownFocus(e),this.dragX=this.x,this.viewport.classList.add("is-pointer-down"),this._bindPostStartEvents(e),this.pointerDownScroll=s(),t.addEventListener("scroll",this),this.dispatchEvent("pointerDown",e,[i])};var c={touchstart:!0,MSPointerDown:!0},d={INPUT:!0,SELECT:!0};return o.pointerDownFocus=function(e){if(this.options.accessibility&&!c[e.type]&&!d[e.target.nodeName]){var i=t.pageYOffset;this.element.focus(),t.pageYOffset!=i&&t.scrollTo(t.pageXOffset,i)}},o.canPreventDefaultOnPointerDown=function(t){var e="touchstart"==t.type,i=t.target.nodeName;return!e&&"SELECT"!=i},o.hasDragStarted=function(t){return Math.abs(t.x)>this.options.dragThreshold},o.pointerUp=function(t,e){delete this.isTouchScrolling,this.viewport.classList.remove("is-pointer-down"),this.dispatchEvent("pointerUp",t,[e]),this._dragPointerUp(t,e)},o.pointerDone=function(){t.removeEventListener("scroll",this),delete this.pointerDownScroll},o.dragStart=function(e,i){this.dragStartPosition=this.x,this.startAnimation(),t.removeEventListener("scroll",this),this.dispatchEvent("dragStart",e,[i])},o.pointerMove=function(t,e){var i=this._dragPointerMove(t,e);this.dispatchEvent("pointerMove",t,[e,i]),this._dragMove(t,e,i)},o.dragMove=function(t,e,i){t.preventDefault(),this.previousDragX=this.dragX;var n=this.options.rightToLeft?-1:1,s=this.dragStartPosition+i.x*n;if(!this.options.wrapAround&&this.slides.length){var o=Math.max(-this.slides[0].target,this.dragStartPosition);s=s>o?.5*(s+o):s;var r=Math.min(-this.getLastSlide().target,this.dragStartPosition);s=s<r?.5*(s+r):s}this.dragX=s,this.dragMoveTime=new Date,this.dispatchEvent("dragMove",t,[e,i])},o.dragEnd=function(t,e){this.options.freeScroll&&(this.isFreeScrolling=!0);var i=this.dragEndRestingSelect();if(this.options.freeScroll&&!this.options.wrapAround){var n=this.getRestingPosition();this.isFreeScrolling=-n>this.slides[0].target&&-n<this.getLastSlide().target}else this.options.freeScroll||i!=this.selectedIndex||(i+=this.dragEndBoostSelect());delete this.previousDragX,this.isDragSelect=this.options.wrapAround,this.select(i),delete this.isDragSelect,this.dispatchEvent("dragEnd",t,[e])},o.dragEndRestingSelect=function(){var t=this.getRestingPosition(),e=Math.abs(this.getSlideDistance(-t,this.selectedIndex)),i=this._getClosestResting(t,e,1),n=this._getClosestResting(t,e,-1),s=i.distance<n.distance?i.index:n.index;return s},o._getClosestResting=function(t,e,i){for(var n=this.selectedIndex,s=1/0,o=this.options.contain&&!this.options.wrapAround?function(t,e){return t<=e}:function(t,e){return t<e};o(e,s)&&(n+=i,s=e,e=this.getSlideDistance(-t,n),null!==e);)e=Math.abs(e);return{distance:s,index:n-i}},o.getSlideDistance=function(t,e){var i=this.slides.length,s=this.options.wrapAround&&i>1,o=s?n.modulo(e,i):e,r=this.slides[o];if(!r)return null;var a=s?this.slideableWidth*Math.floor(e/i):0;return t-(r.target+a)},o.dragEndBoostSelect=function(){if(void 0===this.previousDragX||!this.dragMoveTime||new Date-this.dragMoveTime>100)return 0;var t=this.getSlideDistance(-this.dragX,this.selectedIndex),e=this.previousDragX-this.dragX;return t>0&&e>0?1:t<0&&e<0?-1:0},o.staticClick=function(t,e){var i=this.getParentCell(t.target),n=i&&i.element,s=i&&this.cells.indexOf(i);this.dispatchEvent("staticClick",t,[e,n,s])},o.onscroll=function(){var t=s(),e=this.pointerDownScroll.x-t.x,i=this.pointerDownScroll.y-t.y;(Math.abs(e)>3||Math.abs(i)>3)&&this._pointerDone()},e}),function(t,e){"function"==typeof define&&define.amd?define("tap-listener/tap-listener",["unipointer/unipointer"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("unipointer")):t.TapListener=e(t,t.Unipointer)}(window,function(t,e){function i(t){this.bindTap(t)}var n=i.prototype=Object.create(e.prototype);return n.bindTap=function(t){t&&(this.unbindTap(),this.tapElement=t,this._bindStartEvent(t,!0))},n.unbindTap=function(){this.tapElement&&(this._bindStartEvent(this.tapElement,!0),delete this.tapElement)},n.pointerUp=function(i,n){if(!this.isIgnoringMouseUp||"mouseup"!=i.type){var s=e.getPointerPoint(n),o=this.tapElement.getBoundingClientRect(),r=t.pageXOffset,a=t.pageYOffset,l=s.x>=o.left+r&&s.x<=o.right+r&&s.y>=o.top+a&&s.y<=o.bottom+a;if(l&&this.emitEvent("tap",[i,n]),"mouseup"!=i.type){this.isIgnoringMouseUp=!0;var h=this;setTimeout(function(){delete h.isIgnoringMouseUp},400)}}},n.destroy=function(){this.pointerDone(),this.unbindTap()},i}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/prev-next-button",["./flickity","tap-listener/tap-listener","fizzy-ui-utils/utils"],function(i,n,s){return e(t,i,n,s)}):"object"==typeof module&&module.exports?module.exports=e(t,require("./flickity"),require("tap-listener"),require("fizzy-ui-utils")):e(t,t.Flickity,t.TapListener,t.fizzyUIUtils)}(window,function(t,e,i,n){"use strict";function s(t,e){this.direction=t,this.parent=e,this._create()}function o(t){return"string"==typeof t?t:"M "+t.x0+",50 L "+t.x1+","+(t.y1+50)+" L "+t.x2+","+(t.y2+50)+" L "+t.x3+",50  L "+t.x2+","+(50-t.y2)+" L "+t.x1+","+(50-t.y1)+" Z"}var r="http://www.w3.org/2000/svg";s.prototype=new i,s.prototype._create=function(){this.isEnabled=!0,this.isPrevious=this.direction==-1;var t=this.parent.options.rightToLeft?1:-1;this.isLeft=this.direction==t;var e=this.element=document.createElement("button");e.className="flickity-prev-next-button",e.className+=this.isPrevious?" previous":" next",e.setAttribute("type","button"),this.disable(),e.setAttribute("aria-label",this.isPrevious?"previous":"next");var i=this.createSVG();e.appendChild(i),this.on("tap",this.onTap),this.parent.on("select",this.update.bind(this)),this.on("pointerDown",this.parent.childUIPointerDown.bind(this.parent))},s.prototype.activate=function(){this.bindTap(this.element),this.element.addEventListener("click",this),this.parent.element.appendChild(this.element)},s.prototype.deactivate=function(){this.parent.element.removeChild(this.element),i.prototype.destroy.call(this),this.element.removeEventListener("click",this)},s.prototype.createSVG=function(){var t=document.createElementNS(r,"svg");t.setAttribute("viewBox","0 0 100 100");var e=document.createElementNS(r,"path"),i=o(this.parent.options.arrowShape);return e.setAttribute("d",i),e.setAttribute("class","arrow"),this.isLeft||e.setAttribute("transform","translate(100, 100) rotate(180) "),t.appendChild(e),t},s.prototype.onTap=function(){if(this.isEnabled){this.parent.uiChange();var t=this.isPrevious?"previous":"next";this.parent[t]()}},s.prototype.handleEvent=n.handleEvent,s.prototype.onclick=function(){var t=document.activeElement;t&&t==this.element&&this.onTap()},s.prototype.enable=function(){this.isEnabled||(this.element.disabled=!1,this.isEnabled=!0)},s.prototype.disable=function(){this.isEnabled&&(this.element.disabled=!0,this.isEnabled=!1)},s.prototype.update=function(){var t=this.parent.slides;if(this.parent.options.wrapAround&&t.length>1)return void this.enable();var e=t.length?t.length-1:0,i=this.isPrevious?0:e,n=this.parent.selectedIndex==i?"disable":"enable";this[n]()},s.prototype.destroy=function(){this.deactivate()},n.extend(e.defaults,{prevNextButtons:!0,arrowShape:{x0:10,x1:60,y1:50,x2:70,y2:40,x3:30}}),e.createMethods.push("_createPrevNextButtons");var a=e.prototype;return a._createPrevNextButtons=function(){this.options.prevNextButtons&&(this.prevButton=new s((-1),this),this.nextButton=new s(1,this),this.on("activate",this.activatePrevNextButtons))},a.activatePrevNextButtons=function(){this.prevButton.activate(),this.nextButton.activate(),this.on("deactivate",this.deactivatePrevNextButtons)},a.deactivatePrevNextButtons=function(){this.prevButton.deactivate(),this.nextButton.deactivate(),this.off("deactivate",this.deactivatePrevNextButtons)},e.PrevNextButton=s,e}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/page-dots",["./flickity","tap-listener/tap-listener","fizzy-ui-utils/utils"],function(i,n,s){return e(t,i,n,s)}):"object"==typeof module&&module.exports?module.exports=e(t,require("./flickity"),require("tap-listener"),require("fizzy-ui-utils")):e(t,t.Flickity,t.TapListener,t.fizzyUIUtils)}(window,function(t,e,i,n){function s(t){this.parent=t,this._create()}s.prototype=new i,s.prototype._create=function(){this.holder=document.createElement("ol"),this.holder.className="flickity-page-dots",this.dots=[],this.on("tap",this.onTap),this.on("pointerDown",this.parent.childUIPointerDown.bind(this.parent))},s.prototype.activate=function(){this.setDots(),this.bindTap(this.holder),this.parent.element.appendChild(this.holder)},s.prototype.deactivate=function(){this.parent.element.removeChild(this.holder),i.prototype.destroy.call(this)},s.prototype.setDots=function(){var t=this.parent.slides.length-this.dots.length;t>0?this.addDots(t):t<0&&this.removeDots(-t)},s.prototype.addDots=function(t){for(var e=document.createDocumentFragment(),i=[];t;){var n=document.createElement("li");n.className="dot",e.appendChild(n),i.push(n),t--}this.holder.appendChild(e),this.dots=this.dots.concat(i)},s.prototype.removeDots=function(t){var e=this.dots.splice(this.dots.length-t,t);e.forEach(function(t){this.holder.removeChild(t)},this)},s.prototype.updateSelected=function(){this.selectedDot&&(this.selectedDot.className="dot"),this.dots.length&&(this.selectedDot=this.dots[this.parent.selectedIndex],this.selectedDot.className="dot is-selected")},s.prototype.onTap=function(t){var e=t.target;if("LI"==e.nodeName){this.parent.uiChange();var i=this.dots.indexOf(e);this.parent.select(i)}},s.prototype.destroy=function(){this.deactivate()},e.PageDots=s,n.extend(e.defaults,{pageDots:!0}),e.createMethods.push("_createPageDots");var o=e.prototype;return o._createPageDots=function(){this.options.pageDots&&(this.pageDots=new s(this),this.on("activate",this.activatePageDots),this.on("select",this.updateSelectedPageDots),this.on("cellChange",this.updatePageDots),this.on("resize",this.updatePageDots),this.on("deactivate",this.deactivatePageDots))},o.activatePageDots=function(){this.pageDots.activate()},o.updateSelectedPageDots=function(){this.pageDots.updateSelected()},o.updatePageDots=function(){this.pageDots.setDots()},o.deactivatePageDots=function(){this.pageDots.deactivate()},e.PageDots=s,e}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/player",["ev-emitter/ev-emitter","fizzy-ui-utils/utils","./flickity"],function(t,i,n){return e(t,i,n)}):"object"==typeof module&&module.exports?module.exports=e(require("ev-emitter"),require("fizzy-ui-utils"),require("./flickity")):e(t.EvEmitter,t.fizzyUIUtils,t.Flickity)}(window,function(t,e,i){function n(t){this.parent=t,this.state="stopped",o&&(this.onVisibilityChange=function(){this.visibilityChange()}.bind(this),this.onVisibilityPlay=function(){this.visibilityPlay()}.bind(this))}var s,o;"hidden"in document?(s="hidden",o="visibilitychange"):"webkitHidden"in document&&(s="webkitHidden",o="webkitvisibilitychange"),n.prototype=Object.create(t.prototype),n.prototype.play=function(){if("playing"!=this.state){var t=document[s];if(o&&t)return void document.addEventListener(o,this.onVisibilityPlay);this.state="playing",o&&document.addEventListener(o,this.onVisibilityChange),this.tick()}},n.prototype.tick=function(){if("playing"==this.state){var t=this.parent.options.autoPlay;t="number"==typeof t?t:3e3;var e=this;this.clear(),this.timeout=setTimeout(function(){e.parent.next(!0),e.tick()},t)}},n.prototype.stop=function(){this.state="stopped",this.clear(),o&&document.removeEventListener(o,this.onVisibilityChange)},n.prototype.clear=function(){clearTimeout(this.timeout)},n.prototype.pause=function(){"playing"==this.state&&(this.state="paused",this.clear())},n.prototype.unpause=function(){"paused"==this.state&&this.play()},n.prototype.visibilityChange=function(){var t=document[s];this[t?"pause":"unpause"]()},n.prototype.visibilityPlay=function(){this.play(),document.removeEventListener(o,this.onVisibilityPlay)},e.extend(i.defaults,{pauseAutoPlayOnHover:!0}),i.createMethods.push("_createPlayer");var r=i.prototype;return r._createPlayer=function(){this.player=new n(this),this.on("activate",this.activatePlayer),this.on("uiChange",this.stopPlayer),this.on("pointerDown",this.stopPlayer),this.on("deactivate",this.deactivatePlayer)},r.activatePlayer=function(){this.options.autoPlay&&(this.player.play(),this.element.addEventListener("mouseenter",this))},r.playPlayer=function(){this.player.play()},r.stopPlayer=function(){this.player.stop()},r.pausePlayer=function(){this.player.pause()},r.unpausePlayer=function(){this.player.unpause()},r.deactivatePlayer=function(){this.player.stop(),this.element.removeEventListener("mouseenter",this)},r.onmouseenter=function(){this.options.pauseAutoPlayOnHover&&(this.player.pause(),this.element.addEventListener("mouseleave",this))},r.onmouseleave=function(){this.player.unpause(),this.element.removeEventListener("mouseleave",this)},i.Player=n,i}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/add-remove-cell",["./flickity","fizzy-ui-utils/utils"],function(i,n){return e(t,i,n)}):"object"==typeof module&&module.exports?module.exports=e(t,require("./flickity"),require("fizzy-ui-utils")):e(t,t.Flickity,t.fizzyUIUtils)}(window,function(t,e,i){function n(t){var e=document.createDocumentFragment();return t.forEach(function(t){e.appendChild(t.element)}),e}var s=e.prototype;return s.insert=function(t,e){var i=this._makeCells(t);if(i&&i.length){var s=this.cells.length;e=void 0===e?s:e;var o=n(i),r=e==s;if(r)this.slider.appendChild(o);else{var a=this.cells[e].element;this.slider.insertBefore(o,a)}if(0===e)this.cells=i.concat(this.cells);else if(r)this.cells=this.cells.concat(i);else{var l=this.cells.splice(e,s-e);this.cells=this.cells.concat(i).concat(l)}this._sizeCells(i);var h=e>this.selectedIndex?0:i.length;this._cellAddedRemoved(e,h)}},s.append=function(t){this.insert(t,this.cells.length)},s.prepend=function(t){this.insert(t,0)},s.remove=function(t){var e,n,s=this.getCells(t),o=0,r=s.length;for(e=0;e<r;e++){n=s[e];var a=this.cells.indexOf(n)<this.selectedIndex;o-=a?1:0}for(e=0;e<r;e++)n=s[e],n.remove(),i.removeFrom(this.cells,n);s.length&&this._cellAddedRemoved(0,o)},s._cellAddedRemoved=function(t,e){e=e||0,this.selectedIndex+=e,this.selectedIndex=Math.max(0,Math.min(this.slides.length-1,this.selectedIndex)),this.cellChange(t,!0),this.emitEvent("cellAddedRemoved",[t,e])},s.cellSizeChange=function(t){var e=this.getCell(t);if(e){e.getSize();var i=this.cells.indexOf(e);this.cellChange(i)}},s.cellChange=function(t,e){var i=this.slideableWidth;if(this._positionCells(t),this._getWrapShiftCells(),this.setGallerySize(),this.emitEvent("cellChange",[t]),this.options.freeScroll){var n=i-this.slideableWidth;this.x+=n*this.cellAlign,this.positionSlider()}else e&&this.positionSliderAtSelected(),this.select(this.selectedIndex)},e}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/lazyload",["./flickity","fizzy-ui-utils/utils"],function(i,n){return e(t,i,n)}):"object"==typeof module&&module.exports?module.exports=e(t,require("./flickity"),require("fizzy-ui-utils")):e(t,t.Flickity,t.fizzyUIUtils)}(window,function(t,e,i){"use strict";function n(t){if("IMG"==t.nodeName&&t.getAttribute("data-flickity-lazyload"))return[t];var e=t.querySelectorAll("img[data-flickity-lazyload]");return i.makeArray(e)}function s(t,e){this.img=t,this.flickity=e,this.load()}e.createMethods.push("_createLazyload");var o=e.prototype;return o._createLazyload=function(){this.on("select",this.lazyLoad)},o.lazyLoad=function(){var t=this.options.lazyLoad;if(t){var e="number"==typeof t?t:0,i=this.getAdjacentCellElements(e),o=[];i.forEach(function(t){var e=n(t);o=o.concat(e)}),o.forEach(function(t){new s(t,this)},this)}},s.prototype.handleEvent=i.handleEvent,s.prototype.load=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.img.getAttribute("data-flickity-lazyload"),this.img.removeAttribute("data-flickity-lazyload")},s.prototype.onload=function(t){this.complete(t,"flickity-lazyloaded")},s.prototype.onerror=function(t){this.complete(t,"flickity-lazyerror")},s.prototype.complete=function(t,e){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this);var i=this.flickity.getParentCell(this.img),n=i&&i.element;this.flickity.cellSizeChange(n),this.img.classList.add(e),this.flickity.dispatchEvent("lazyLoad",t,n)},e.LazyLoader=s,e}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/index",["./flickity","./drag","./prev-next-button","./page-dots","./player","./add-remove-cell","./lazyload"],e):"object"==typeof module&&module.exports&&(module.exports=e(require("./flickity"),require("./drag"),require("./prev-next-button"),require("./page-dots"),require("./player"),require("./add-remove-cell"),require("./lazyload")))}(window,function(t){return t}),function(t,e){"function"==typeof define&&define.amd?define("flickity-as-nav-for/as-nav-for",["flickity/js/index","fizzy-ui-utils/utils"],e):"object"==typeof module&&module.exports?module.exports=e(require("flickity"),require("fizzy-ui-utils")):t.Flickity=e(t.Flickity,t.fizzyUIUtils)}(window,function(t,e){function i(t,e,i){return(e-t)*i+t}t.createMethods.push("_createAsNavFor");var n=t.prototype;return n._createAsNavFor=function(){this.on("activate",this.activateAsNavFor),this.on("deactivate",this.deactivateAsNavFor),this.on("destroy",this.destroyAsNavFor);var t=this.options.asNavFor;if(t){var e=this;setTimeout(function(){e.setNavCompanion(t)})}},n.setNavCompanion=function(i){i=e.getQueryElement(i);var n=t.data(i);if(n&&n!=this){this.navCompanion=n;var s=this;this.onNavCompanionSelect=function(){s.navCompanionSelect()},n.on("select",this.onNavCompanionSelect),this.on("staticClick",this.onNavStaticClick),this.navCompanionSelect(!0)}},n.navCompanionSelect=function(t){if(this.navCompanion){var e=this.navCompanion.selectedCells[0],n=this.navCompanion.cells.indexOf(e),s=n+this.navCompanion.selectedCells.length-1,o=Math.floor(i(n,s,this.navCompanion.cellAlign));if(this.selectCell(o,!1,t),this.removeNavSelectedElements(),!(o>=this.cells.length)){var r=this.cells.slice(n,s+1);this.navSelectedElements=r.map(function(t){return t.element}),this.changeNavSelectedClass("add")}}},n.changeNavSelectedClass=function(t){this.navSelectedElements.forEach(function(e){e.classList[t]("is-nav-selected")})},n.activateAsNavFor=function(){this.navCompanionSelect(!0)},n.removeNavSelectedElements=function(){this.navSelectedElements&&(this.changeNavSelectedClass("remove"),delete this.navSelectedElements)},n.onNavStaticClick=function(t,e,i,n){"number"==typeof n&&this.navCompanion.selectCell(n)},n.deactivateAsNavFor=function(){this.removeNavSelectedElements()},n.destroyAsNavFor=function(){this.navCompanion&&(this.navCompanion.off("select",this.onNavCompanionSelect),this.off("staticClick",this.onNavStaticClick),delete this.navCompanion)},t}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("imagesloaded/imagesloaded",["ev-emitter/ev-emitter"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("ev-emitter")):t.imagesLoaded=e(t,t.EvEmitter)}(window,function(t,e){function i(t,e){for(var i in e)t[i]=e[i];return t}function n(t){var e=[];if(Array.isArray(t))e=t;else if("number"==typeof t.length)for(var i=0;i<t.length;i++)e.push(t[i]);else e.push(t);return e}function s(t,e,o){return this instanceof s?("string"==typeof t&&(t=document.querySelectorAll(t)),this.elements=n(t),this.options=i({},this.options),"function"==typeof e?o=e:i(this.options,e),o&&this.on("always",o),this.getImages(),a&&(this.jqDeferred=new a.Deferred),void setTimeout(function(){this.check()}.bind(this))):new s(t,e,o)}function o(t){this.img=t}function r(t,e){this.url=t,this.element=e,this.img=new Image}var a=t.jQuery,l=t.console;s.prototype=Object.create(e.prototype),s.prototype.options={},s.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},s.prototype.addElementImages=function(t){"IMG"==t.nodeName&&this.addImage(t),this.options.background===!0&&this.addElementBackgroundImages(t);var e=t.nodeType;if(e&&h[e]){for(var i=t.querySelectorAll("img"),n=0;n<i.length;n++){var s=i[n];this.addImage(s)}if("string"==typeof this.options.background){var o=t.querySelectorAll(this.options.background);for(n=0;n<o.length;n++){var r=o[n];this.addElementBackgroundImages(r)}}}};var h={1:!0,9:!0,11:!0};return s.prototype.addElementBackgroundImages=function(t){var e=getComputedStyle(t);if(e)for(var i=/url\((['"])?(.*?)\1\)/gi,n=i.exec(e.backgroundImage);null!==n;){var s=n&&n[2];s&&this.addBackground(s,t),n=i.exec(e.backgroundImage)}},s.prototype.addImage=function(t){var e=new o(t);this.images.push(e)},s.prototype.addBackground=function(t,e){var i=new r(t,e);this.images.push(i)},s.prototype.check=function(){function t(t,i,n){setTimeout(function(){e.progress(t,i,n)})}var e=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(e){e.once("progress",t),e.check()}):void this.complete()},s.prototype.progress=function(t,e,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded,this.emitEvent("progress",[this,t,e]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,t),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&l&&l.log("progress: "+i,t,e)},s.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(t,[this]),this.emitEvent("always",[this]),this.jqDeferred){var e=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[e](this)}},o.prototype=Object.create(e.prototype),o.prototype.check=function(){var t=this.getIsImageComplete();return t?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},o.prototype.getIsImageComplete=function(){return this.img.complete&&void 0!==this.img.naturalWidth},o.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.img,e])},o.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},o.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},o.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},o.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},r.prototype=Object.create(o.prototype),r.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url;var t=this.getIsImageComplete();t&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},r.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},r.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.element,e])},s.makeJQueryPlugin=function(e){e=e||t.jQuery,e&&(a=e,a.fn.imagesLoaded=function(t,e){var i=new s(this,t,e);return i.jqDeferred.promise(a(this))})},s.makeJQueryPlugin(),s}),function(t,e){"function"==typeof define&&define.amd?define(["flickity/js/index","imagesloaded/imagesloaded"],function(i,n){return e(t,i,n)}):"object"==typeof module&&module.exports?module.exports=e(t,require("flickity"),require("imagesloaded")):t.Flickity=e(t,t.Flickity,t.imagesLoaded)}(window,function(t,e,i){"use strict";e.createMethods.push("_createImagesLoaded");var n=e.prototype;return n._createImagesLoaded=function(){this.on("activate",this.imagesLoaded)},n.imagesLoaded=function(){function t(t,i){var n=e.getParentCell(i.img);e.cellSizeChange(n&&n.element),e.options.freeScroll||e.positionSliderAtSelected()}if(this.options.imagesLoaded){var e=this;i(this.slider).on("progress",t)}},e});$(function(){window.Triforce.getMediator().trigger('triforce:addqueue',{'queueName':'ads-reporting','type':'default','loadFunction':function(){if(triforceManifestFeed.supplemental&&triforceManifestFeed.supplemental.isWebview)return;var a=document.createElement('div');a.id='ads-reporting';document.body.appendChild(a);$.ajaxSetup({cache:true});$.getScript('/media/module/ENT_Reporting').done(function(){var a=$('#ads-reporting'),s=new $Crabapple.TriforceModule_reporting_v1();s.init(a,{});});},'processFunction':function($item){}});$('html').addClass(window.Triforce.getMediator().isMobile()?'device-mobile':'device-desktop');(function(){var PAGE_MODAL_CLASS='page--modal',MODULE_NAME_FOR_REPORTING='Page Modal',pageLoader=window.Triforce.getPageLoader(),mediator=window.Triforce.getMediator(),allowModalExperience=true,hasEnteredModal=false,pageToLoadOnModalClose;if(mediator.triforcePageReady){onPageReady();}
mediator.on('triforce:pageready',onPageReady);function onModalClose(){mediator.off('page:modal:close',onModalClose);mediator.trigger('triforce:loadpage',pageToLoadOnModalClose);reportEvent({action:'Clicks on Modal X',destination:pageToLoadOnModalClose});}
function isModalable(){return triforceManifestFeed.parameters&&triforceManifestFeed.parameters.isModalable==='true';}
function onPageReady(){var previousPageURL=pageLoader.previousPage;if(previousPageURL===pageLoader.currentPage){if(isModalable()){allowModalExperience=false;}
return;}
if(isModalable()){if(allowModalExperience&&!hasEnteredModal){hasEnteredModal=true;pageToLoadOnModalClose=previousPageURL;document.documentElement.classList.add(PAGE_MODAL_CLASS);mediator.trigger('page:modal:enter',{previousPageURL:previousPageURL});mediator.on('page:modal:close',onModalClose);}}else{if(!allowModalExperience){allowModalExperience=true;}
if(hasEnteredModal){hasEnteredModal=false;pageToLoadOnModalClose=null;document.documentElement.classList.remove(PAGE_MODAL_CLASS);mediator.trigger('page:modal:exit');}}}
function reportEvent(reportingObject){var destination='no destination',action='';if(reportingObject){if(reportingObject.destination){destination=reportingObject.destination;}
if(reportingObject.action){action=reportingObject.action;}}
try{$Crabapple.repo.trackModuleClickThrough(MODULE_NAME_FOR_REPORTING,destination,action);}catch(e){mediator.trigger('triforce:message',{'type':'error','message':'Reporting for '+MODULE_NAME_FOR_REPORTING+' returns error','exception':e});}}})();(function(){var _loadingStyleSheet;window.Triforce.getMediator().on('triforce:pageready',function(){var styleSheets=document.querySelectorAll('link[rel=stylesheet]'),pageStyle=triforceManifestFeed&&triforceManifestFeed.supplemental&&triforceManifestFeed.supplemental.pageStyle,activeSiteStyleSheets=[],styleSheetType,isDefaultStyleSheet=false,pageStyleSheet,i,len;for(i=0,len=styleSheets.length;i<len;i++){if(styleSheets[i]){styleSheetType=styleSheets[i].getAttribute('data-type');isDefaultStyleSheet=styleSheetType==='defaultSiteCSS';if(pageStyle){if(styleSheetType==='siteCSS'||isDefaultStyleSheet){if(styleSheets[i].getAttribute('href')!==pageStyle){if(!styleSheets[i].disabled){activeSiteStyleSheets.push(styleSheets[i]);}}else{pageStyleSheet=styleSheets[i];}}}else{if(styleSheetType==='siteCSS'){styleSheets[i].disabled=true;}else if(isDefaultStyleSheet){styleSheets[i].disabled=false;}}}}
if(pageStyle){if(pageStyleSheet){toggleTransitionState(false);disableStyleSheets(activeSiteStyleSheets);pageStyleSheet.disabled=false;}else{toggleTransitionState(true);var link=_loadingStyleSheet=document.createElement('link');link.rel='stylesheet';link.type='text/css';link.href=pageStyle;link.setAttribute('data-type','siteCSS');link.onload=function(){if(link===_loadingStyleSheet){toggleTransitionState(false);disableStyleSheets(activeSiteStyleSheets);}else{this.disabled=true;}};document.head.appendChild(link);}}});function disableStyleSheets(styleSheets){if(styleSheets&&styleSheets.length){var i,len;for(i=0,len=styleSheets.length;i<len;i++){styleSheets[i].disabled=true;}}}
function toggleTransitionState(toggleFlag){$('html').toggleClass('page--in-css-transition',toggleFlag);}})();var AdobeTarget={init:function(){var reTryCounter=0,RE_TRY_MAX_COUNT=50,reTryInterval,_this=this;if(!_this.addEvents()){reTryInterval=setInterval(function(){if(_this.addEvents()||reTryCounter++>=RE_TRY_MAX_COUNT){clearInterval(reTryInterval);}},100);}},addEvents:function(){if(typeof btg==='object'&&typeof Bento==='object'&&typeof adobe==='object'){try{var _this=this;_this.globalMboxName=config.getAdobeTargetMboxName();console.log('AT: attach triforce:complete');window.Triforce.getMediator().on('page:videoStart',function(evt){console.log('AT: page:videoStart');console.log('categoryId:'+evt[1].category);_this.createOffer({mbox:"videoStart",params:{"entity.id":triforceManifestFeed.reporting.itemId,"entity.categoryId":evt[1].category}});});window.Triforce.getMediator().on('page:videoEnd',function(){console.log('AT: page:videoComplete');_this.createOffer({mbox:"videoComplete",params:{"orderId":Date.now(),"orderTotal":1,"productPurchasedId":triforceManifestFeed.reporting.itemId}});});window.Triforce.getMediator().on('triforce:complete',function(){console.log('triforce:complete triggered');if(typeof adobe==='object'&&window.Triforce.priorityManager.completeFired===true){if(adobe.target){_this.createOffer({mbox:_this.globalMboxName,params:{"requestType":"pushState"}});}}});if(window.Triforce.priorityManager.completeFired===true){if(typeof adobe==='object'&&window.Triforce.priorityManager.completeFired===true){if(adobe.target){_this.createOffer({mbox:_this.globalMboxName,params:{"requestType":"pushState"}});}}}
return true;}catch(e){return false;}}else{return false;}},createOffer:function(configObj){console.log('AT: getOffer');console.log(configObj);adobe.target.getOffer({"mbox":configObj.mbox,"params":configObj.params,"timeout":5000,"success":function(offer){console.log('AT: applyOffer: '+JSON.stringify(offer));if(offer&&offer.length){adobe.target.applyOffer({"mbox":configObj.mbox,"offer":offer});window.Triforce.getMediator().trigger('page:AdobeTarget:ENT_M240',{"response":offer});console.log('Fired page:AdobeTarget:ENT_M240 event');}},"error":function(status,error){console.log('Error',status,error);}});}};if(typeof(config.getAdobeTargetEnabled)=='function'&&config.getAdobeTargetEnabled()&&typeof(config.getAdobeTargetMboxName)=='function'&&config.getAdobeTargetMboxName()){AdobeTarget.init();}});(function($){$.fn.trimTextToFit=function(ellipsisText){var ellipsis;if(ellipsisText!="undefined")ellipsis=ellipsisText;else ellipsis="...";return this.each(function(){var wrapContainer=$(this);var textContainer=$(this).children('span').first();var textContainerHTML;if(textContainer.length==0)textContainer=$(this).children().first();if(textContainer.length!=0){var wrapContainerMaxHeight=wrapContainer.css("max-height");if(wrapContainerMaxHeight!='none'){var wrapContainerHeight;if(wrapContainerMaxHeight=="none")wrapContainerHeight=wrapContainer[0].offsetHeight;else wrapContainerHeight=parseInt(wrapContainerMaxHeight.substr(0,wrapContainerMaxHeight.indexOf('px')));var textContainerHeight=textContainer[0].offsetHeight;if(textContainerHeight>wrapContainerHeight){wrapContainer[0].setAttribute("title",textContainer.text());}
while(textContainerHeight>wrapContainerHeight){textContainerHTML=textContainer.html();if(textContainerHTML.lastIndexOf(" ")==-1)break;textContainer.html(textContainer.html().substring(0,textContainerHTML.lastIndexOf(" "))+"...");textContainerHeight=textContainer[0].offsetHeight;if(textContainerHeight==wrapContainerHeight)break;}}}});};})(jQuery);$(function(){var $body=$('body'),isTransitionSupported='webkitTransition'in $body[0].style||'transition'in $body[0].style;function checkTVEAuth(){var tveAuthObject=window.Triforce.getStorageManager().getObject('tveStorage'),tveClass='tve_auth';if(tveAuthObject&&tveAuthObject.authorized){$body.addClass(tveClass);}else{$body.removeClass(tveClass);}}
checkTVEAuth();window.Triforce.getMediator().on('triforce:rendercomplete',checkTVEAuth);$body.on('click','.toggleable_module_trigger',function(){var contentDiv=$(this).closest('.toggleable_module');if(contentDiv.hasClass('open')){collapseModule(contentDiv);}else{expandModule(contentDiv);}}).on('webkitTransitionEnd transitionend','.toggleable_module_content',function(e){if(e.originalEvent.propertyName==='max-height'&&e.target===this){$(this).css('max-height','');}});function collapseModule($moduleElement){var $content=$moduleElement.find('.toggleable_module_content');if(isTransitionSupported){$content.css('max-height',$content.height()||'none').css('max-height');$content.css('max-height',0);}
$moduleElement.removeClass('open').trigger('triforce:module_collapsed');}
function expandModule($moduleElement){var $content=$moduleElement.find('.toggleable_module_content');if(isTransitionSupported){$content.css('max-height',$content[0].scrollHeight||'none');}
$moduleElement.addClass('open').trigger('triforce:module_expanded');}
window.$MTV=window.$MTV||{};window.$MTV.triforce=window.$MTV.triforce||{};window.$MTV.triforce.colorPicker=function(){var result={'primary':false,'secondary':false,'tertiary':false,'darktheme':false};if(typeof triforceManifestFeed!='undefined'&&triforceManifestFeed.supplemental&&triforceManifestFeed.supplemental.colors){if(triforceManifestFeed.supplemental.colors.colors&&triforceManifestFeed.supplemental.colors.colors.primary){result.primary=triforceManifestFeed.supplemental.colors.colors.primary;}else if(triforceManifestFeed.supplemental.colors.primary){result.primary=triforceManifestFeed.supplemental.colors.primary;}
if(triforceManifestFeed.supplemental.colors.colors&&triforceManifestFeed.supplemental.colors.colors.secondary){result.secondary=triforceManifestFeed.supplemental.colors.colors.secondary;}else if(triforceManifestFeed.supplemental.colors.secondary){result.secondary=triforceManifestFeed.supplemental.colors.secondary;}
if(triforceManifestFeed.supplemental.colors.colors&&triforceManifestFeed.supplemental.colors.colors.tertiary){result.tertiary=triforceManifestFeed.supplemental.colors.colors.tertiary;}else if(triforceManifestFeed.supplemental.colors.tertiary){result.tertiary=triforceManifestFeed.supplemental.colors.tertiary;}
if(triforceManifestFeed.supplemental.colors.colors&&triforceManifestFeed.supplemental.colors.colors.darkTheme){result.darkTheme=true;}else if(triforceManifestFeed.supplemental.colors&&triforceManifestFeed.supplemental.colors.darkTheme){result.darkTheme=true;}}
return result;};window.$MTV.triforce.applyChannelStyles=function(){var currentChannel=$('body').data('channel');if(currentChannel){$('body').removeClass(currentChannel)}
if(typeof triforceManifestFeed!='undefined'&&triforceManifestFeed.supplemental&&triforceManifestFeed.supplemental.channel){$('body').addClass(triforceManifestFeed.supplemental.channel);$('body').data('channel',triforceManifestFeed.supplemental.channel);}};window.$MTV.triforce.setDarkTheme=function(){var darkTheme=window.$MTV.triforce.colorPicker().darkTheme,htmlString="";if(darkTheme){if(!$('#darktheme_style').length){htmlString+=".ent_p016_mtv #background_holder {background-color: #232323;} .show_portal .ent_m213 .linelist-item-meta-label {color: #fff;} .show_portal .ent_m213 .linelist-item-meta-title {color: #fff;}";htmlString+=".ent_m067 .S002_line_list_header .content .header_text{color:#fff;}";htmlString+=".ent_m067 .S001_line_list_item .link_wrapper p{color:#fff;}";htmlString+=".ent_m067 .S001_line_list_item .link_wrapper h3 {color:#fff;}";htmlString+=".ent_m067 .S001_line_list_item .link_wrapper h4 {color:#fff;}";htmlString+=".ent_m101 .S002_line_list_header .content .header_text {color:#fff}";htmlString+=".ent_m101 .S001_line_list_item .link_wrapper p {color:#fff;}";htmlString+=".ent_m101 .S001_line_list_item .link_wrapper h3 {color:#fff;}";htmlString+=".ent_m101 .S001_line_list_item .link_wrapper h4 {color:#fff;}";var styleElement=document.createElement('style');styleElement.id='darktheme_style';styleElement.innerHTML=htmlString;document.head.appendChild(styleElement);}}else{$('#darktheme_style').remove();}};window.$MTV.triforce.generateFloodlightTag=function(){if(typeof triforceManifestFeed!='undefined'&&triforceManifestFeed.supplemental&&triforceManifestFeed.supplemental.floodlight&&!triforceManifestFeed.supplemental.isWebview){var existingTag=$('#floodlight_tag');if(existingTag.length){existingTag.remove();}
var floodlightTag=document.createElement('iframe');floodlightTag.id="floodlight_tag",floodlightTag.width=1,floodlightTag.height=1,floodlightTag.frameBorder=0,floodlightTag.style='display:none;',floodlightTag.src=triforceManifestFeed.supplemental.floodlight;$('#footer').append(floodlightTag);}};window.$MTV.triforce.checkForFullEpisodeFlag=function(item){var showFlagOnTheseDescriptors=['Full Episode','Reunion','Special'],descriptor='';if(item.distPolicy&&item.distPolicy.episodeDescriptor){descriptor=item.distPolicy.episodeDescriptor;}
if(item.type=="episode"&&descriptor&&showFlagOnTheseDescriptors.indexOf(descriptor)>=0){return true;}else{return false;}};window.$MTV.triforce.generateFloodlightTag();window.$MTV.triforce.setDarkTheme();window.$MTV.triforce.applyChannelStyles();window.Triforce.getMediator().on('triforce:pageready',function(){window.$MTV.triforce.generateFloodlightTag();window.$MTV.triforce.setDarkTheme();window.$MTV.triforce.applyChannelStyles();});window.Triforce.getMediator().trigger('triforce:addqueue',{'queueName':'beacons','type':'default','loadFunction':function(){$('#seriesPixelMathtag').remove();$('#seriesPixelTapad').remove();$('#seriesPixelGoogle').remove();if(triforceManifestFeed.supplemental){if(triforceManifestFeed.supplemental.pixelMathtag){var location=document.getElementsByTagName('script')[0];var script=document.createElement('script');script.src=triforceManifestFeed.supplemental.pixelMathtag;script.async=true;script.id="pixelMathtag";location.parentNode.insertBefore(script,location);}
if(triforceManifestFeed.supplemental.pixelTapad){var i=document.createElement('img');i.src=triforceManifestFeed.supplemental.pixelTapad;i.width=1;i.height=1;i.setAttribute('style','display:none');i.id="seriesPixelTapad";document.body.appendChild(i);}
if(triforceManifestFeed.supplemental.pixelGoogle){var i=document.createElement('img');i.src=triforceManifestFeed.supplemental.pixelGoogle;i.width=1;i.height=1;i.setAttribute('style','display:none');i.id="seriesPixelGoogle";document.body.appendChild(i);}}},'processFunction':function(item){}});window.Triforce.getMediator().on('triforce:loadpage',function(evt){if(triforceManifestFeed.supplemental.isWebview)return;if(typeof DY!='undefined'){DY.API('event',{name:'New_Pageview',properties:{}});}
$Crabapple.pageLoadTimer=performance.now();});window.Triforce.getMediator().on('triforce:rendercomplete',function(evt){var newPageLoad=new Event('New_PageView');document.dispatchEvent(newPageLoad);var timeToRender;var pageRenderTime=performance.now();try{if(typeof $Crabapple.pageLoadTimer!='undefined'){timeToRender=pageRenderTime-$Crabapple.pageLoadTimer;}
else{timeToRender=pageRenderTime-GlobalLoadTime;}
if(typeof newrelic!='undefined')
newrelic.setCustomAttribute('pageLoadTime',timeToRender);console.log('timeToRender='+timeToRender);}catch(e){}});window.Triforce.getMediator().on('triforce:monitorVideoStart',function(evt){if(triforceManifestFeed.supplemental.isWebview)return;if(typeof evt[1]=='undefined'){return;}
if(typeof DY=='undefined'){return;}
var categories=[];if(triforceManifestFeed.supplemental){if(triforceManifestFeed.supplemental.seriesTitle){categories.push(triforceManifestFeed.supplemental.seriesTitle);}
if(triforceManifestFeed.supplemental.videoType){categories.push(triforceManifestFeed.supplemental.videoType);}}
DY.API('event',{name:'Video Watch',properties:{dyType:'video-watch-v1',itemId:evt[1],categories:categories,autoplay:true,progress:'VIDEO STARTED'}});});window.Triforce.getMediator().on('triforce:loadpage',function(evt){if(typeof EdgePlayer!='undefined'){EdgePlayer.getPlayers().forEach(function(player)
{player.destroy();});}
if(typeof DY!='undefined'){DY.API('event',{name:'New_Pageview',properties:{}});}});window.Triforce.getMediator().on('triforce:loadpage',function(evt){const urlArgument=evt[1]
if(urlArgument.includes('/vma')){window.location.href=urlArgument}})});function autoLinkTrackEvent(promoName,destinationUrl,extraReportingObjs){var destinationUrl=(typeof destinationUrl!='undefined'||destinationUrl=='')?destinationUrl:'no_destination_url';if(destinationUrl.substr(0,1)=='/'){destinationUrl=window.location.protocol+"//"+window.location.host+destinationUrl;}
var _pageName=null;var _repCallObject=null;try{var _pageName=pageName;var _repCallObject=repCallObject;}catch(e){}
if(_pageName===null){_pageName='pageName not found';}
var promoName=promoName.toLowerCase();destinationUrl=destinationUrl.toLowerCase();if(_repCallObject===null){_repCallObject={prop8:'undefined',eVar6:'undefined'};}
var show=_pageName.split('/')[1];baseReportingObj={linkName:promoName,linkType:'o',prop8:show,prop25:promoName,prop26:promoName+'|'+_pageName,prop27:destinationUrl,eVar5:destinationUrl,eVar6:show,eVar7:promoName,eVar8:promoName+'|'+_pageName,eVar9:_pageName};if(typeof extraReportingObjs=='object'){jQuery.extend(baseReportingObj,extraReportingObjs);}
if(typeof(mtvn)!='undefined'){mtvn.btg.Controller.sendLinkEvent(baseReportingObj);}}
function shareWidgetTracking(shareService,linkValue,uniqueID){if(typeof(pageName)=='undefined'){var pageName='pageName not found';}
var linkEventObj={linkName:linkValue,linkType:'o',eVar60:pageName,eVar51:shareService,events:'event84'};if(typeof(uniqueID)!="undefined"){$.extend(linkEventObj,{eVar65:uniqueID});}
if(typeof(mtvn)!='undefined'){mtvn.btg.Controller.sendLinkEvent(linkEventObj);}}
function shareBarLinkTracking(shareService,uniqueID){var shareService='share_'+shareService,eVar65=(typeof(eVar65)!="undefined")?eVar65.substr(4):document.title;var baseReportingObj={linkName:'Community - Share',linkType:'o',eVar60:pageName,eVar65:eVar65,eVar51:shareService,events:'event84'};if(typeof uniqueID!='undefined'&&uniqueID!=''){eVar65Add={"eVar65":uniqueID};jQuery.extend(baseReportingObj,eVar65Add);}
if(typeof extraReportingObjs=='object'){jQuery.extend(baseReportingObj,extraReportingObjs);}
if(typeof(mtvn)!='undefined'){mtvn.btg.Controller.sendLinkEvent(baseReportingObj);}}
function commentTracking(shareService){var shareService='Community-Comment';var eVar65=$('.ent_m002 .comments').attr('data-mgid');if(typeof(mtvn)!='undefined'){mtvn.btg.Controller.sendLinkEvent({linkName:'commenting',linkType:'o',events:'event88',evar60:pageName,evar65:eVar65,pev2:shareService});}}
$(document).ready(function(){var destinationUrl="";var shareService="embed";var $contentHolder=$('#content_holder');$contentHolder.on('click','.ent_m002 .toggleable_module_trigger',function(){destinationUrl=($(this).closest('.toggleable_module').hasClass('open'))?'spike_flux_activity_header_collapse':'spike_flux_activity_header_expand';autoLinkTrackEvent('mtv_flux_activity',destinationUrl);});$contentHolder.on('click','.ent_m017 .season_info a',function(){destinationUrl=$(this).attr('href');autoLinkTrackEvent('mtv_seriesvideos_promo',destinationUrl);});$contentHolder.on('click','.ent_m017 .share_wrapper .share li, .ent_m018 .share_wrapper .share li, .ent_m019 .share_wrapper .share li',function(){var link=$(this),reportShare=false,uniqueId=link.parents(".share_widget").attr("data-contenturi");if(link.hasClass("email")){shareService="email";reportShare=true;}
if(link.hasClass("embed")){shareService="embed";reportShare=true;}
if(link.hasClass("facebook")){shareService="facebook";reportShare=true;}
if(link.hasClass("twitter")){shareService="twitter";reportShare=true;}
if(reportShare)shareBarLinkTracking(shareService,uniqueId);});$contentHolder.on('click','.ent_m022 a',function(){destinationUrl=$(this).attr('href');autoLinkTrackEvent('mtv_editorialpromo_app',destinationUrl);});$contentHolder.on('click','.ent_m023 a',function(){destinationUrl=$(this).attr('href');autoLinkTrackEvent('mtv_episodeinfo_promo',destinationUrl);});$contentHolder.on('click','.ent_m023 .slate_holder a',function(){var affiliate='mtv_affiliate_',link=$(this),reportShare=false,destinationUrl=$(this).attr('href');if(link.hasClass("amazon")){affiliate+="amazon";reportShare=true;}
if(link.hasClass("hulu")){affiliate+="hulu";reportShare=true;}
if(link.hasClass("netflix")){affiliate+="netflix";reportShare=true;}
if(reportShare)autoLinkTrackEvent(affiliate,destinationUrl);});$contentHolder.on('click','.ent_m027 a',function(){destinationUrl=$(this).attr('href');autoLinkTrackEvent('mtv_random_image',destinationUrl);});$contentHolder.on('click','.ent_m046 a',function(){destinationUrl=$(this).attr('href');autoLinkTrackEvent('mtv_announcement',destinationUrl);});$('body').on('click','.ent_m066 .top_inner .logo',function(){autoLinkTrackEvent('mtvlogo',this.href);});$('body').on('click','.ent_m066 .site_menu_wrapper a',function(){if($(this).parent().hasClass('social')){autoLinkTrackEvent('mtv_socialbuttons',this.href);}else{if($('.sticky_header')[0]){autoLinkTrackEvent('mtv_top-nav-mini',this.href);}else{autoLinkTrackEvent('mtv_top-nav',this.href);}}});$('body').on('click','.ent_m070 .top_outer .site_logo',function(){var destinationUrl='http://www.mtv.com';autoLinkTrackEvent('mtvlogo',destinationUrl);});$('body').on('click','.ent_m070 .top_outer .show_logo',function(){var destinationUrl=$(this).attr('href');autoLinkTrackEvent('series_logo',destinationUrl);});$('body').on('click','.ent_m070 .top_outer .top_inner .show_menu_wrapper .show_menu li a',function(){var destinationUrl=$(this).attr('href');if($(this).parent().hasClass('social')){autoLinkTrackEvent('series_socialbuttons',destinationUrl);}else{if(($('#header').hasClass('sticky_header'))&&($(this).parent().hasClass('social'))){autoLinkTrackEvent('series_socialbuttons-mini',destinationUrl);}else if($('#header').hasClass('sticky_header')){autoLinkTrackEvent('series_top-nav-mini',destinationUrl);}else{autoLinkTrackEvent('series_top-nav',destinationUrl);}}});$('body').on('click','.ent_m070 .top_inner #site_search form',function(){if($('.ent_m070 .top_inner #site_search form .search_input').val()!=' '){var term=$('.ent_m070 .top_inner #site_search form').val();var extraReportingObjs={v2:term,v3:'TERM'};autoLinkTrackEvent('series_searchbox',undefined,extraReportingObjs);}});$('body').on('click','.ent_m070 .top_inner .favorite_show',function(){var show=$('.ent_m070 .top_inner div.favorite_show');var destinationUrl=$('.ent_m070 .top_inner .favorite_show').attr('data-title');if(show.hasClass('favorited')){autoLinkTrackEvent('series_favorite',destinationUrl);}else{var extraReportingObjs={'events':'event6'};autoLinkTrackEvent('series_favorite',destinationUrl,extraReportingObjs);}});$('body').on('click','.ent_m070 .top_outer .menu_holder #trigger',function(){autoLinkTrackEvent('mtvmenu');});$('body').on('click','.ent_m070 .top_outer .menu_holder .side_navigation li a',function(){var destinationUrl=$(this).attr('href');if($(this).parent().hasClass('social')){autoLinkTrackEvent('mtv_socialbuttons_vertical',destinationUrl);}else{autoLinkTrackEvent('mtv_top-nav_vertical',destinationUrl);}});$contentHolder.on('click','.ent_m100 a',function(){destinationUrl=$(this).attr('href');autoLinkTrackEvent('mtv_featured_shows',destinationUrl);});$contentHolder.on('click','.ent_m112 #sub-filter label label',function(){var checkbox=$(this).parent().find('input[type=checkbox]'),reportingVariable='availability_filter_checked',destinationUrl=checkbox.attr('data-availableurl');if(checkbox.prop('checked')){reportingVariable='availability_filter_unchecked';destinationUrl=checkbox.attr('data-allurl');}
autoLinkTrackEvent(reportingVariable,destinationUrl);});$contentHolder.on('mouseover','.ent_m112 #sub-filter .info-hover',function(){autoLinkTrackEvent('availability_info_hover','');});$contentHolder.on('click','.ent_m112 .s_buttons_button',function(){destinationUrl='load_more';autoLinkTrackEvent('mtv_series_episodes',destinationUrl);});$contentHolder.on('click','.ent_m122 > .module_content a, .ent_m122 .s_buttons_buttonWrapper a',function(){destinationUrl=$(this).attr('href');autoLinkTrackEvent('mtv_text_container',destinationUrl);});$contentHolder.on('click','.ent_m145 a',function(event){var destinationUrl=$(this).attr('href');autoLinkTrackEvent('ENT_M145',destinationUrl);});$contentHolder.on('click','.ent_m155 a',function(){destinationUrl=$(this).attr('href');autoLinkTrackEvent('mtv_trending_promo',destinationUrl);});$contentHolder.on('click','.ent_m156 a',function(){destinationUrl=$(this).attr('href');autoLinkTrackEvent('mtv_related_episodes_promo',destinationUrl);});$contentHolder.on('click','.ent_m164 .s_layouts_lineListItem a',function(){destinationUrl=$(this).attr('href');autoLinkTrackEvent('mtv_right_rail_promo',destinationUrl);});$contentHolder.on('click','.ent_m164 .mediavoice .link_wrapper',function(){destinationUrl=$(this).attr('href');autoLinkTrackEvent('mtv_right_rail_native_ad',destinationUrl);});$contentHolder.on('click','.ent_m169 .s_layouts_lineListItem a',function(){destinationUrl=$(this).attr('href');autoLinkTrackEvent('mtv_right_rail_video_promo',destinationUrl);});$contentHolder.on('click','.ent_m169 .mediavoice .link_wrapper',function(){destinationUrl=$(this).attr('href');autoLinkTrackEvent('mtv_right_rail_video_native_ad',destinationUrl);});$contentHolder.on('click','.ent_m170 a',function(){destinationUrl=$(this).attr('href');autoLinkTrackEvent('mtv_series_news',destinationUrl);});$contentHolder.on('click','.ent_m176 .s_layouts_lineListItem a',function(){destinationUrl=$(this).attr('href');autoLinkTrackEvent('mtv_right_rail_editorial_promo',destinationUrl);});$contentHolder.on('click','.ent_m176 .mediavoice .link_wrapper',function(){destinationUrl=$(this).attr('href');autoLinkTrackEvent('mtv_right_rail_editorial_native_ad',destinationUrl);});});;(function(window){'use strict';var docElem=window.document.documentElement;function getViewportH(){var client=docElem['clientHeight'],inner=window['innerHeight'];if(client<inner)
return inner;else
return client;}
function scrollY(){return window.pageYOffset||docElem.scrollTop;}
function getOffset(el){var offsetTop=0,offsetLeft=0;do{if(!isNaN(el.offsetTop)){offsetTop+=el.offsetTop;}
if(!isNaN(el.offsetLeft)){offsetLeft+=el.offsetLeft;}}while(el=el.offsetParent)
return{top:offsetTop,left:offsetLeft}}
function inViewport(el,h){var elH=el.offsetHeight,scrolled=scrollY(),viewed=scrolled+getViewportH(),elTop=getOffset(el).top,elBottom=elTop+elH,h=h||0;return(elTop+elH*h)<=viewed&&(elBottom-elH*h)>=scrolled;}
function extend(a,b){for(var key in b){if(b.hasOwnProperty(key)){a[key]=b[key];}}
return a;}
function AnimOnScroll(el,options){this.el=el;this.options=extend(this.defaults,options);this._init();}
AnimOnScroll.prototype={defaults:{minDuration:0,maxDuration:0,viewportFactor:0},_init:function(){this.items=Array.prototype.slice.call(document.querySelectorAll('#'+this.el.id+' > li'));if(this.items.length==0){this.items=Array.prototype.slice.call(document.querySelectorAll('#'+this.el.id+' > .gallery__item'));}
this.itemsCount=this.items.length;this.itemsRenderedCount=0;this.didScroll=false;var self=this;self.items.forEach(function(el,i){if(inViewport(el)){self._checkTotalRendered();$(el).addClass('shown');}});window.addEventListener('scroll',function(){self._onScrollFn();},false);window.addEventListener('resize',function(){self._resizeHandler();},false);},_onScrollFn:function(){var self=this;if(!this.didScroll){this.didScroll=true;setTimeout(function(){self._scrollPage();},60);}},_scrollPage:function(){var self=this;this.items.forEach(function(el,i){if(!$(el).hasClass('shown')&&!$(el).hasClass('animate')&&inViewport(el,self.options.viewportFactor)){setTimeout(function(){var perspY=scrollY()+getViewportH()/ 2;self.el.style.WebkitPerspectiveOrigin='50% '+perspY+'px';self.el.style.MozPerspectiveOrigin='50% '+perspY+'px';self.el.style.perspectiveOrigin='50% '+perspY+'px';self._checkTotalRendered();if(self.options.minDuration&&self.options.maxDuration){var randDuration=(Math.random()*(self.options.maxDuration-self.options.minDuration)+self.options.minDuration)+'s';el.style.WebkitAnimationDuration=randDuration;el.style.MozAnimationDuration=randDuration;el.style.animationDuration=randDuration;}
$(el).addClass('animate');},25);}});this.didScroll=false;},_resizeHandler:function(){var self=this;function delayed(){self._scrollPage();self.resizeTimeout=null;}
if(this.resizeTimeout){clearTimeout(this.resizeTimeout);}
this.resizeTimeout=setTimeout(delayed,1000);},_checkTotalRendered:function(){++this.itemsRenderedCount;if(this.itemsRenderedCount===this.itemsCount){window.removeEventListener('scroll',this._onScrollFn);}}}
window.AnimOnScroll=AnimOnScroll;})(window);(function(name){this.$Crabapple=this.$Crabapple||{};this.$Crabapple.TriforceTemplates=this.$Crabapple.TriforceTemplates||{};this.$Crabapple.TriforceTemplates[name]=this.$Crabapple.TriforceTemplates[name]||new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");if(t.s(t.d("image.0",c,p,1),c,p,0,12,425,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div data-toqueue=\"true\" data-info=\"[");if(t.s(t.f("image",c,p,1),c,p,0,59,310,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("{&quot;original&quot;: { ");if(t.s(t.f("width",c,p,1),c,p,0,94,175,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("height",c,p,1),c,p,0,105,164,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("&quot;width&quot;: ");t.b(t.v(t.f("width",c,p,0)));t.b(", &quot;height&quot;:");t.b(t.v(t.f("height",c,p,0)));});c.pop();}});c.pop();}t.b(" }, &quot;src&quot;: &quot;");t.b(t.v(t.d(".url",c,p,0)));t.b("&quot;, ");if(t.s(t.d(".alt",c,p,1),c,p,0,237,273,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" &quot;alt&quot;: &quot;");t.b(t.v(t.d(".",c,p,0)));t.b("&quot;,");});c.pop();}t.b(" &quot;quality&quot;: 0.85},");});c.pop();}t.b("null]\" class=\"image_holder deferred ");t.sub("imageClass",c,p,i);t.b("\" ");t.sub("imageStyle",c,p,i);t.b("></div>");});c.pop();}if(!t.s(t.d("image.0",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("image",c,p,1),c,p,0,459,1052,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div data-toqueue=\"true\" data-info=\"[");if(t.s(t.f("image",c,p,1),c,p,0,506,756,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("{&quot;original&quot;: { ");if(t.s(t.f("width",c,p,1),c,p,0,541,622,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("height",c,p,1),c,p,0,552,611,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("&quot;width&quot;: ");t.b(t.v(t.f("width",c,p,0)));t.b(", &quot;height&quot;:");t.b(t.v(t.f("height",c,p,0)));});c.pop();}});c.pop();}t.b(" }, &quot;src&quot;: &quot;");t.b(t.v(t.d(".url",c,p,0)));t.b("&quot;,");if(t.s(t.d(".alt",c,p,1),c,p,0,683,719,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" &quot;alt&quot;: &quot;");t.b(t.v(t.d(".",c,p,0)));t.b("&quot;,");});c.pop();}t.b(" &quot;quality&quot;: 0.85},");});c.pop();}t.b("null]\" class=\"image_holder deferred");if(t.s(t.d(".isRaw",c,p,1),c,p,0,812,830,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" image_holder--raw");});c.pop();}t.b(" ");t.sub("imageClass",c,p,i);t.b("\" ");if(t.s(t.f("imageRatio_f",c,p,1),c,p,0,891,907,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("data-ratio=");t.b(t.v(t.d(".",c,p,0)));});c.pop();}t.b(" ");t.sub("imageStyle",c,p,i);t.b(">");if(t.s(t.d(".ratio",c,p,1),c,p,0,967,1035,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"image_holder__spacer\" style=\"padding-top: ");t.b(t.v(t.d(".",c,p,0)));t.b("%\"></div>");});c.pop();}t.b("</div>");});c.pop();}};return t.fl();},partials:{},subs:{"imageClass":function(c,p,t,i){},"imageStyle":function(c,p,t,i){}}});}).call(this,"common/image");(function(name){this.$Crabapple=this.$Crabapple||{};this.$Crabapple.TriforceTemplates=this.$Crabapple.TriforceTemplates||{};this.$Crabapple.TriforceTemplates[name]=this.$Crabapple.TriforceTemplates[name]||new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");if(t.s(t.f("data",c,p,1),c,p,0,9,1257,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"linelist-module-content\"><div class=\"linelist-module-header\">");if(t.s(t.d("header.filters.0",c,p,1),c,p,0,103,142,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("<module/linelist/standard/filters0",c,p,""));});c.pop();}if(!t.s(t.d("header.filters",c,p,1),c,p,1,0,0,"")){if(t.s(t.d("header.title",c,p,1),c,p,0,199,688,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.d("settings.isMinimized",c,p,1),c,p,0,224,286,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<h2 class=\"linelist-module-header-title\">");t.b(t.v(t.d("header.title",c,p,0)));t.b("</h2>");});c.pop();}if(!t.s(t.d("settings.isMinimized",c,p,1),c,p,1,0,0,"")){t.b("<h1 class=\"linelist-module-header-title\">");t.b(t.v(t.d("header.title",c,p,0)));t.b("</h1>");};if(t.s(t.d("settings.sponsorAdSize",c,p,1),c,p,0,450,661,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.d("settings.campaignId",c,p,1),c,p,0,474,637,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"linelist-sponsor-ad\" data-adsize=\"");t.b(t.v(t.d("settings.sponsorAdSize",c,p,0)));t.b("\" data-ad-sizes=\"");t.b(t.v(t.d("settings.sponsorAdSize",c,p,0)));t.b("\" data-campaign=\"");t.b(t.v(t.d("settings.campaignId",c,p,0)));t.b("\"></div>");});c.pop();}});c.pop();}});c.pop();}};t.b("</div><ul class=\"linelist-items linelist-grid effect-2\" id=\"linelist-grid\">");t.b(t.rp("<module/linelist/standard/listitems1",c,p,""));t.b("</ul>");if(!t.s(t.d("settings.isMinimized",c,p,1),c,p,1,0,0,"")){t.b("<div class=\"linelist-loading-graphic\"></div>");};if(t.s(t.f("nextPage",c,p,1),c,p,0,952,1238,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.d("settings.isMinimized",c,p,1),c,p,0,977,1004,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<a href=\"");t.b(t.v(t.d("nextPage.url",c,p,0)));t.b("\">");});c.pop();}t.b("<div class=\"linelist-load-more-btn ");if(t.s(t.d("settings.isMinimized",c,p,1),c,p,0,1089,1108,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" linelist-minimized");});c.pop();}t.b("\"><span class=\"primary_btn\">");t.b(t.v(t.d(".label",c,p,0)));t.b("</span></div>");if(t.s(t.d("settings.isMinimized",c,p,1),c,p,0,1209,1213,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("</a>");});c.pop();}});c.pop();}t.b("</div>");});c.pop();}return t.fl();},partials:{"<module/linelist/standard/filters0":{name:"module/linelist/standard/filters",partials:{},subs:{}},"<module/linelist/standard/listitems1":{name:"module/linelist/standard/listitems",partials:{},subs:{}}},subs:{}});}).call(this,"module/linelist/standard/template");(function(name){this.$Crabapple=this.$Crabapple||{};this.$Crabapple.TriforceTemplates=this.$Crabapple.TriforceTemplates||{};this.$Crabapple.TriforceTemplates[name]=this.$Crabapple.TriforceTemplates[name]||new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");if(t.s(t.d("header.title",c,p,1),c,p,0,17,241,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.d("settings.isMinimized",c,p,1),c,p,0,42,104,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<h2 class=\"linelist-module-header-title\">");t.b(t.v(t.d("header.title",c,p,0)));t.b("</h2>");});c.pop();}if(!t.s(t.d("settings.isMinimized",c,p,1),c,p,1,0,0,"")){t.b("<h1 class=\"linelist-module-header-title\">");t.b(t.v(t.d("header.title",c,p,0)));t.b("</h1>");};});c.pop();}if(t.s(t.d("header.filters",c,p,1),c,p,0,277,434,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.d(".isSelected",c,p,1),c,p,0,293,418,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"linelist-filter-title linelist-module-filter-list-item  linelist-module-filter-list-item-selected\">");t.b(t.v(t.f("name",c,p,0)));t.b("</div>");});c.pop();}});c.pop();}t.b("<ul class=\"linelist-module-filter-list\">");if(t.s(t.d("header.filters",c,p,1),c,p,0,512,667,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<li class=\"linelist-module-filter-list-item");if(t.s(t.d(".isSelected",c,p,1),c,p,0,571,613,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" linelist-module-filter-list-item-selected");});c.pop();}t.b("\" data-feedurl=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\">");t.b(t.v(t.f("name",c,p,0)));t.b("</li>");});c.pop();}t.b("</ul>");return t.fl();},partials:{},subs:{}});}).call(this,"module/linelist/standard/filters");(function(name){this.$Crabapple=this.$Crabapple||{};this.$Crabapple.TriforceTemplates=this.$Crabapple.TriforceTemplates||{};this.$Crabapple.TriforceTemplates[name]=this.$Crabapple.TriforceTemplates[name]||new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");if(t.s(t.f("items",c,p,1),c,p,0,10,1446,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("isAd",c,p,1),c,p,0,19,189,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<li class=\"linelist-item linelist-item-ad\"><div class=\"ad-label\">");t.b(t.v(t.f("adLabel",c,p,0)));t.b("</div><div class=\"lineList_ad\" data-adsize=\"");t.b(t.v(t.f("adSize",c,p,0)));t.b("\" data-ad-sizes=\"");t.b(t.v(t.f("adSize",c,p,0)));t.b("\"></div></li>");});c.pop();}if(!t.s(t.f("isAd",c,p,1),c,p,1,0,0,"")){t.b("<li class=\"linelist-item ");if(t.s(t.f("isTVELocked",c,p,1),c,p,0,248,259,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" tve_locked");});c.pop();}if(t.s(t.f("layout",c,p,1),c,p,0,286,315,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" linelist-item__layout--");t.b(t.v(t.d(".",c,p,0)));});c.pop();}t.b("\">");if(t.s(t.f("url",c,p,1),c,p,0,336,422,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<a class=\"linelist-link-wrapper\" href=\"");t.b(t.v(t.d(".",c,p,0)));t.b("\" ");if(t.s(t.f("isPopup",c,p,1),c,p,0,394,409,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("target=\"_blank\"");});c.pop();}t.b(">");});c.pop();}t.b("<div class=\"linelist-item-image-wrapper\">");if(t.s(t.f("imageTitle",c,p,1),c,p,0,486,589,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"linelist-item-image-title\"><span class=\"linelist-item-image-title-inner\">");t.b(t.v(t.d(".",c,p,0)));t.b("</span></div>");});c.pop();}t.b(t.rp("<common/image0",c,p,""));if(t.s(t.f("tveAuthDesktop",c,p,1),c,p,0,642,703,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"linelist-item-tve-lock desktop-tve-locked\"></div>");});c.pop();}if(t.s(t.f("tveAuthMobile",c,p,1),c,p,0,740,800,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"linelist-item-tve-lock mobile-tve-locked\"></div>");});c.pop();}if(t.s(t.f("flags",c,p,1),c,p,0,828,908,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("display",c,p,1),c,p,0,840,896,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<span class=\"");if(t.s(t.f("type",c,p,1),c,p,0,862,867,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.d(".",c,p,0)));});c.pop();}t.b("\">");t.b(t.v(t.f("display",c,p,0)));t.b("</span>");});c.pop();}});c.pop();}t.b("</div><div class=\"linelist-item-meta-wrapper\">");if(t.s(t.f("label",c,p,1),c,p,0,974,1025,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<span class=\"linelist-item-meta-label\">");t.b(t.v(t.d(".",c,p,0)));t.b("</span>");});c.pop();}if(t.s(t.f("title",c,p,1),c,p,0,1045,1096,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<span class=\"linelist-item-meta-title\">");t.b(t.v(t.d(".",c,p,0)));t.b("</span>");});c.pop();}if(t.s(t.f("description",c,p,1),c,p,0,1122,1179,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<span class=\"linelist-item-meta-description\">");t.b(t.v(t.d(".",c,p,0)));t.b("</span>");});c.pop();}if(t.s(t.f("timestamp",c,p,1),c,p,0,1209,1264,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<span class=\"linelist-item-meta-timestamp\">");t.b(t.v(t.d(".",c,p,0)));t.b("</span>");});c.pop();}if(t.s(t.f("inlineUrl",c,p,1),c,p,0,1292,1392,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<a class=\"linelist-link-inline\" href=\"");t.b(t.v(t.f("href",c,p,0)));t.b("\" ");if(t.s(t.f("isPopup",c,p,1),c,p,0,1352,1367,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("target=\"_blank\"");});c.pop();}t.b(">");t.b(t.v(t.f("text",c,p,0)));t.b("</a>");});c.pop();}t.b("</div>");if(t.s(t.f("url",c,p,1),c,p,0,1420,1424,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("</a>");});c.pop();}t.b("</li>");};});c.pop();}return t.fl();},partials:{"<common/image0":{name:"common/image",partials:{},subs:{}}},subs:{}});}).call(this,"module/linelist/standard/listitems");(function(name){this.$Crabapple=this.$Crabapple||{};this.$Crabapple.TriforceTemplates=this.$Crabapple.TriforceTemplates||{};this.$Crabapple.TriforceTemplates[name]=this.$Crabapple.TriforceTemplates[name]||new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");if(t.s(t.f("overlay",c,p,1),c,p,0,12,592,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"page-overlay");if(t.s(t.d(".typeClass",c,p,1),c,p,0,51,57,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" ");t.b(t.v(t.d(".",c,p,0)));});c.pop();}t.b("\"><div class=\"page-overlay_wrapper\"><div class=\"page-overlay_header\"><div class=\"page-overlay_close\"></div>");if(t.s(t.d(".headline",c,p,1),c,p,0,193,237,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<h2 class=\"page-overlay_headline\">");t.b(t.v(t.d(".",c,p,0)));t.b("</h2>");});c.pop();}t.b("</div><div class=\"page-overlay_body\">");if(t.s(t.d(".description",c,p,1),c,p,0,305,350,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<p class=\"page-overlay_description\">");t.b(t.v(t.d(".",c,p,0)));t.b("</p>");});c.pop();}if(t.s(t.d(".copy",c,p,1),c,p,0,377,419,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"page-overlay_copy\">");t.b(t.v(t.d(".",c,p,0)));t.b("</div>");});c.pop();}if(t.s(t.d(".button",c,p,1),c,p,0,441,496,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<button class=\"page-overlay_button\">");t.b(t.v(t.d(".title",c,p,0)));t.b("</button>");});c.pop();}t.b("</div></div>");if(t.s(t.f("notification",c,p,1),c,p,0,537,569,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("<common/overlay_notification0",c,p,""));});c.pop();}t.b("</div>");});c.pop();}return t.fl();},partials:{"<common/overlay_notification0":{name:"common/overlay_notification",partials:{},subs:{}}},subs:{}});}).call(this,"common/overlay");(function(name){this.$Crabapple=this.$Crabapple||{};this.$Crabapple.TriforceTemplates=this.$Crabapple.TriforceTemplates||{};this.$Crabapple.TriforceTemplates[name]=this.$Crabapple.TriforceTemplates[name]||new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");if(t.s(t.f("message",c,p,1),c,p,0,12,62,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"page-overlay_notification\">");t.b(t.v(t.d(".",c,p,0)));t.b("</div>");});c.pop();}return t.fl();},partials:{},subs:{}});}).call(this,"common/overlay_notification");$(document).ready(function(){if(!("ontouchstart"in document.documentElement)){document.documentElement.className+=" no-touch";}else{document.documentElement.className+=" touch";}});